(self.webpackChunkqrscanner=self.webpackChunkqrscanner||[]).push([[179],{673:(La,Pa,G)=>{"use strict";function Je(e){return"function"==typeof e}function us(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ds=us(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function fs(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class An{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const a of n)a.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Je(r))try{r()}catch(a){t=a instanceof ds?a.errors:[a]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const a of i)try{gn(a)}catch(u){t=t??[],u instanceof ds?t=[...t,...u.errors]:t.push(u)}}if(t)throw new ds(t)}}add(t){var n;if(t&&t!==this)if(this.closed)gn(t);else{if(t instanceof An){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&fs(n,t)}remove(t){const{_finalizers:n}=this;n&&fs(n,t),t instanceof An&&t._removeParent(this)}}An.EMPTY=(()=>{const e=new An;return e.closed=!0,e})();const Fa=An.EMPTY;function Qt(e){return e instanceof An||e&&"closed"in e&&Je(e.remove)&&Je(e.add)&&Je(e.unsubscribe)}function gn(e){Je(e)?e():e.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},rr={setTimeout(e,t,...n){const{delegate:r}=rr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=rr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function St(e){rr.setTimeout(()=>{const{onUnhandledError:t}=te;if(!t)throw e;t(e)})}function hs(){}const rt=It("C",void 0,void 0);function It(e,t,n){return{kind:e,value:t,error:n}}let De=null;function it(e){if(te.useDeprecatedSynchronousErrorHandling){const t=!De;if(t&&(De={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=De;if(De=null,n)throw r}}else e()}class at extends An{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Qt(t)&&t.add(this)):this.destination=Lt}static create(t,n,r){return new ir(t,n,r)}next(t){this.isStopped?et(function ka(e){return It("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?et(function gs(e){return It("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?et(rt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const q=Function.prototype.bind;function ze(e,t){return q.call(e,t)}class Y{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ht(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ht(r)}else Ht(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ht(n)}}}class ir extends at{constructor(t,n,r){let i;if(super(),Je(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let a;this&&te.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ze(t.next,a),error:t.error&&ze(t.error,a),complete:t.complete&&ze(t.complete,a)}):i=t}this.destination=new Y(i)}}function Ht(e){te.useDeprecatedSynchronousErrorHandling?function oo(e){te.useDeprecatedSynchronousErrorHandling&&De&&(De.errorThrown=!0,De.error=e)}(e):St(e)}function et(e,t){const{onStoppedNotification:n}=te;n&&rr.setTimeout(()=>n(e,t))}const Lt={closed:!0,next:hs,error:function Ce(e){throw e},complete:hs},U="function"==typeof Symbol&&Symbol.observable||"@@observable";function ut(e){return e}function ci(e){return 0===e.length?ut:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let lt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const a=function tn(e){return e&&e instanceof at||function Ba(e){return e&&Je(e.next)&&Je(e.error)&&Je(e.complete)}(e)&&Qt(e)}(n)?n:new ir(n,r,i);return it(()=>{const{operator:u,source:g}=this;a.add(u?u.call(a,g):g?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=or(r))((i,a)=>{const u=new ir({next:g=>{try{n(g)}catch(m){a(m),u.unsubscribe()}},error:a,complete:i});this.subscribe(u)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[U](){return this}pipe(...n){return ci(n)(this)}toPromise(n){return new(n=or(n))((r,i)=>{let a;this.subscribe(u=>a=u,u=>i(u),()=>r(a))})}}return e.create=t=>new e(t),e})();function or(e){var t;return null!==(t=e??te.Promise)&&void 0!==t?t:Promise}const jr=us(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ft=(()=>{class e extends lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Ni(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new jr}next(n){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:a}=this;return r||i?Fa:(this.currentObservers=null,a.push(n),new An(()=>{this.currentObservers=null,fs(a,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:a}=this;r?n.error(i):a&&n.complete()}asObservable(){const n=new lt;return n.source=this,n}}return e.create=(t,n)=>new Ni(t,n),e})();class Ni extends ft{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Fa}}function le(e){return Je(e?.lift)}function wt(e){return t=>{if(le(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(e,t,n,r,i){return new Ri(e,t,n,r,i)}class Ri extends at{constructor(t,n,r,i,a,u){super(t),this.onFinalize=a,this.shouldUnsubscribe=u,this._next=n?function(g){try{n(g)}catch(m){t.error(m)}}:super._next,this._error=i?function(g){try{i(g)}catch(m){t.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Me(e,t){return wt((n,r)=>{let i=0;n.subscribe(Fe(r,a=>{r.next(e.call(t,a,i++))}))})}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function Z(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function In(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(u){return new Promise(function(g,m){!function i(a,u,g,m){Promise.resolve(m).then(function(y){a({value:y,done:g})},u)}(g,m,(u=e[a](u)).done,u.value)})}}}const Li=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ms(e){return Je(e?.then)}function ys(e){return Je(e[U])}function vn(e){return Symbol.asyncIterator&&Je(e?.[Symbol.asyncIterator])}function uo(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const zr=function Hr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Pi(e){return Je(e?.[zr])}function Ln(e){return function Qc(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),a=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(v){r[v]&&(i[v]=function(T){return new Promise(function(R,P){a.push([v,T,R,P])>1||g(v,T)})})}function g(v,T){try{!function m(v){v.value instanceof Yn?Promise.resolve(v.value.v).then(y,C):D(a[0][2],v)}(r[v](T))}catch(R){D(a[0][3],R)}}function y(v){g("next",v)}function C(v){g("throw",v)}function D(v,T){v(T),a.shift(),a.length&&g(a[0][0],a[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Yn(n.read());if(i)return yield Yn(void 0);yield yield Yn(r)}}finally{n.releaseLock()}})}function Wa(e){return Je(e?.getReader)}function Gt(e){if(e instanceof lt)return e;if(null!=e){if(ys(e))return function ws(e){return new lt(t=>{const n=e[U]();if(Je(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Li(e))return function Pn(e){return new lt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(ms(e))return function Gr(e){return new lt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,St)})}(e);if(vn(e))return ee(e);if(Pi(e))return function ui(e){return new lt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Wa(e))return function di(e){return ee(Ln(e))}(e)}throw uo(e)}function ee(e){return new lt(t=>{(function xs(e,t){var n,r,i,a;return function lo(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Z(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(u){i={error:u}}finally{try{r&&!r.done&&(a=n.return)&&(yield a.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function bt(e,t,n,r=0,i=!1){const a=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function Wt(e,t,n=1/0){return Je(t)?Wt((r,i)=>Me((a,u)=>t(r,a,i,u))(Gt(e(r,i))),n):("number"==typeof t&&(n=t),wt((r,i)=>function Jc(e,t,n,r,i,a,u,g){const m=[];let y=0,C=0,D=!1;const v=()=>{D&&!m.length&&!y&&t.complete()},T=P=>y<r?R(P):m.push(P),R=P=>{a&&t.next(P),y++;let k=!1;Gt(n(P,C++)).subscribe(Fe(t,H=>{i?.(H),a?T(H):t.next(H)},()=>{k=!0},void 0,()=>{if(k)try{for(y--;m.length&&y<r;){const H=m.shift();u?bt(t,u,()=>R(H)):R(H)}v()}catch(H){t.error(H)}}))};return e.subscribe(Fe(t,T,()=>{D=!0,v()})),()=>{g?.()}}(r,i,e,n)))}function sr(e=1/0){return Wt(ut,e)}const Fn=new lt(e=>e.complete());function Cs(e){return e[e.length-1]}function fi(e){return function tu(e){return e&&Je(e.schedule)}(Cs(e))?e.pop():void 0}function fo(e,t=0){return wt((n,r)=>{n.subscribe(Fe(r,i=>bt(r,e,()=>r.next(i),t),()=>bt(r,e,()=>r.complete(),t),i=>bt(r,e,()=>r.error(i),t)))})}function V(e,t=0){return wt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Xe(e,t){if(!e)throw new Error("Iterable cannot be null");return new lt(n=>{bt(n,t,()=>{const r=e[Symbol.asyncIterator]();bt(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ct(e,t){return t?function ke(e,t){if(null!=e){if(ys(e))return function nu(e,t){return Gt(e).pipe(V(t),fo(t))}(e,t);if(Li(e))return function hi(e,t){return new lt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(ms(e))return function pt(e,t){return Gt(e).pipe(V(t),fo(t))}(e,t);if(vn(e))return Xe(e,t);if(Pi(e))return function ru(e,t){return new lt(n=>{let r;return bt(n,t,()=>{r=e[zr](),bt(n,t,()=>{let i,a;try{({value:i,done:a}=r.next())}catch(u){return void n.error(u)}a?n.complete():n.next(i)},0,!0)}),()=>Je(r?.return)&&r.return()})}(e,t);if(Wa(e))return function Ze(e,t){return Xe(Ln(e),t)}(e,t)}throw uo(e)}(e,t):Gt(e)}function mt(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new ir({next:()=>{r.unsubscribe(),e()}});return Gt(t(...n)).subscribe(r)}function je(e){for(let t in e)if(e[t]===je)return t;throw Error("Could not find renamed property on target object.")}function Ee(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ee).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function gi(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const iu=je({__forward_ref__:je});function ar(e){return e.__forward_ref__=ar,e.toString=function(){return Ee(this())},e}function K(e){return Pt(e)?e():e}function Pt(e){return"function"==typeof e&&e.hasOwnProperty(iu)&&e.__forward_ref__===ar}function L(e){return e&&!!e.\u0275providers}class $ extends Error{constructor(t,n){super(nn(t,n)),this.code=t}}function nn(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function Ae(e){return"string"==typeof e?e:null==e?"":String(e)}function Fi(e,t){throw new $(-201,!1)}function cn(e,t){null==e&&function qe(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function lr(e){return{providers:e.providers||[],imports:e.imports||[]}}function vr(e){return rn(e,yo)||rn(e,Ka)}function rn(e,t){return e.hasOwnProperty(t)?e[t]:null}function Qa(e){return e&&(e.hasOwnProperty(Is)||e.hasOwnProperty(nt))?e[Is]:null}const yo=je({\u0275prov:je}),Is=je({\u0275inj:je}),Ka=je({ngInjectableDef:je}),nt=je({ngInjectorDef:je});var ue=(()=>((ue=ue||{})[ue.Default=0]="Default",ue[ue.Host=1]="Host",ue[ue.Self=2]="Self",ue[ue.SkipSelf=4]="SkipSelf",ue[ue.Optional=8]="Optional",ue))();let mi;function Sn(e){const t=mi;return mi=e,t}function F(e,t,n){const r=vr(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ue.Optional?null:void 0!==t?t:void Fi(Ee(e))}const _e=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ki={},vs="__NG_DI_FLAG__",$r="ngTempTokenPath",Tt="ngTokenPath",Ss=/\n/gm,yi="\u0275",Bi="__source";let _r;function Qe(e){const t=_r;return _r=e,t}function de(e,t=ue.Default){if(void 0===_r)throw new $(-203,!1);return null===_r?F(e,void 0,t):_r.get(e,t&ue.Optional?null:void 0,t)}function fe(e,t=ue.Default){return(function Sr(){return mi}()||de)(K(e),t)}function Be(e,t=ue.Default){return fe(e,Ui(t))}function Ui(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function _s(e){const t=[];for(let n=0;n<e.length;n++){const r=K(e[n]);if(Array.isArray(r)){if(0===r.length)throw new $(900,!1);let i,a=ue.Default;for(let u=0;u<r.length;u++){const g=r[u],m=bs(g);"number"==typeof m?-1===m?i=g.token:a|=m:i=g}t.push(fe(i,a))}else t.push(fe(r))}return t}function ji(e,t){return e[vs]=t,e.prototype[vs]=t,e}function bs(e){return e[vs]}function Xn(e){return{toString:e}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),Zn=(()=>{return(e=Zn||(Zn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Zn;var e})();const un={},He=[],wo=je({\u0275cmp:je}),Yr=je({\u0275dir:je}),Ms=je({\u0275pipe:je}),cr=je({\u0275mod:je}),_n=je({\u0275fac:je}),Jt=je({__NG_ELEMENT_ID__:je});let tl=0;function bn(e){return Xn(()=>{const t=l(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||Zn.Emulated,id:"c"+tl++,styles:e.styles||He,_:null,schemas:e.schemas||null,tView:null};c(n);const r=e.dependencies;return n.directiveDefs=d(r,!1),n.pipeDefs=d(r,!0),n})}function Ns(e){return re(e)||Mt(e)}function cu(e){return null!==e}function br(e){return Xn(()=>({type:e.type,bootstrap:e.bootstrap||He,declarations:e.declarations||He,imports:e.imports||He,exports:e.exports||He,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function nl(e,t){if(null==e)return un;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}function Yt(e){return Xn(()=>{const t=l(e);return c(t),t})}function re(e){return e[wo]||null}function Mt(e){return e[Yr]||null}function x(e){return e[Ms]||null}function s(e,t){const n=e[cr]||null;if(!n&&!0===t)throw new Error(`Type ${Ee(e)} does not have '\u0275mod' property.`);return n}function l(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||He,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nl(e.inputs,t),outputs:nl(e.outputs)}}function c(e){e.features?.forEach(t=>t(e))}function d(e,t){if(!e)return null;const n=t?x:Ns;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(cu)}const f=0,h=1,p=2,w=3,E=4,A=5,I=6,S=7,b=8,M=9,O=10,N=11,W=12,X=13,B=14,Ie=15,se=16,kt=17,en=18,ht=19,Ke=20,Bt=21,Le=22,Tr=1,rl=2,xo=7,il=8,Co=9,yn=10;function Bn(e){return Array.isArray(e)&&"object"==typeof e[Tr]}function ur(e){return Array.isArray(e)&&!0===e[Tr]}function uu(e){return 0!=(4&e.flags)}function Rs(e){return e.componentOffset>-1}function dr(e){return!!e.template}function Yx(e){return 0!=(256&e[p])}function Hi(e,t){return e.hasOwnProperty(_n)?e[_n]:null}class qx{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function zi(){return Wh}function Wh(e){return e.type.prototype.ngOnChanges&&(e.setInput=Kx),Qx}function Qx(){const e=Yh(this),t=e?.current;if(t){const n=e.previous;if(n===un)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Kx(e,t,n,r){const i=this.declaredInputs[n],a=Yh(e)||function Jx(e,t){return e[$h]=t}(e,{previous:un,current:null}),u=a.current||(a.current={}),g=a.previous,m=g[i];u[i]=new qx(m&&m.currentValue,t,g===un),e[r]=t}zi.ngInherit=!0;const $h="__ngSimpleChanges__";function Yh(e){return e[$h]||null}const Qn=function(e,t,n){};function on(e){for(;Array.isArray(e);)e=e[f];return e}function Un(e,t){return on(t[e.index])}function jn(e,t){const n=t[e];return Bn(n)?n:n[f]}function al(e){return 64==(64&e[p])}function wi(e,t){return null==t?null:e[t]}function Qh(e){e[en]=0}function fu(e,t){e[A]+=t;let n=e,r=e[w];for(;null!==r&&(1===t&&1===n[A]||-1===t&&0===n[A]);)r[A]+=t,n=r,r=r[w]}const ve={lFrame:l0(null),bindingsEnabled:!0};function Jh(){return ve.bindingsEnabled}function z(){return ve.lFrame.lView}function Ye(){return ve.lFrame.tView}function sn(){let e=e0();for(;null!==e&&64===e.type;)e=e.parent;return e}function e0(){return ve.lFrame.currentTNode}function Mr(e,t){const n=ve.lFrame;n.currentTNode=e,n.isParent=t}function hu(){return ve.lFrame.isParent}function gC(e,t){const n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=e,pu(t)}function pu(e){ve.lFrame.currentDirectiveIndex=e}function yu(e){ve.lFrame.currentQueryIndex=e}function mC(e){const t=e[h];return 2===t.type?t.declTNode:1===t.type?e[I]:null}function s0(e,t,n){if(n&ue.SkipSelf){let i=t,a=e;for(;!(i=i.parent,null!==i||n&ue.Host||(i=mC(a),null===i||(a=a[Ie],10&i.type))););if(null===i)return!1;t=i,e=a}const r=ve.lFrame=a0();return r.currentTNode=t,r.lView=e,!0}function wu(e){const t=a0(),n=e[h];ve.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function a0(){const e=ve.lFrame,t=null===e?null:e.child;return null===t?l0(e):t}function l0(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function c0(){const e=ve.lFrame;return ve.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const u0=c0;function xu(){const e=c0();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function xn(){return ve.lFrame.selectedIndex}function Gi(e){ve.lFrame.selectedIndex=e}function ll(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const a=e.data[n].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:g,ngAfterViewInit:m,ngAfterViewChecked:y,ngOnDestroy:C}=a;u&&(e.contentHooks||(e.contentHooks=[])).push(-n,u),g&&((e.contentHooks||(e.contentHooks=[])).push(n,g),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,g)),m&&(e.viewHooks||(e.viewHooks=[])).push(-n,m),y&&((e.viewHooks||(e.viewHooks=[])).push(n,y),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,y)),null!=C&&(e.destroyHooks||(e.destroyHooks=[])).push(n,C)}}function cl(e,t,n){d0(e,t,3,n)}function ul(e,t,n,r){(3&e[p])===n&&d0(e,t,n,r)}function Cu(e,t){let n=e[p];(3&n)===t&&(n&=2047,n+=1,e[p]=n)}function d0(e,t,n,r){const a=r??-1,u=t.length-1;let g=0;for(let m=void 0!==r?65535&e[en]:0;m<u;m++)if("number"==typeof t[m+1]){if(g=t[m],null!=r&&g>=r)break}else t[m]<0&&(e[en]+=65536),(g<a||-1==a)&&(vC(e,n,t,m),e[en]=(4294901760&e[en])+m+2),m++}function vC(e,t,n,r){const i=n[r]<0,a=n[r+1],g=e[i?-n[r]:n[r]];if(i){if(e[p]>>11<e[en]>>16&&(3&e[p])===t){e[p]+=2048,Qn(4,g,a);try{a.call(g)}finally{Qn(5,g,a)}}}else{Qn(4,g,a);try{a.call(g)}finally{Qn(5,g,a)}}}const Ao=-1;class Ls{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Du(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const a=n[r++],u=n[r++],g=n[r++];e.setAttribute(t,u,g,a)}else{const a=i,u=n[++r];h0(a)?e.setProperty(t,a,u):e.setAttribute(t,a,u),r++}}return r}function f0(e){return 3===e||4===e||6===e}function h0(e){return 64===e.charCodeAt(0)}function Ps(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||g0(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function g0(e,t,n,r,i){let a=0,u=e.length;if(-1===t)u=-1;else for(;a<e.length;){const g=e[a++];if("number"==typeof g){if(g===t){u=-1;break}if(g>t){u=a-1;break}}}for(;a<e.length;){const g=e[a];if("number"==typeof g)break;if(g===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==u&&(e.splice(u,0,t),a=u+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function p0(e){return e!==Ao}function dl(e){return 32767&e}function fl(e,t){let n=function TC(e){return e>>16}(e),r=t;for(;n>0;)r=r[Ie],n--;return r}let Au=!0;function hl(e){const t=Au;return Au=e,t}const m0=255,y0=5;let MC=0;const Nr={};function gl(e,t){const n=w0(e,t);if(-1!==n)return n;const r=t[h];r.firstCreatePass&&(e.injectorIndex=t.length,Iu(r.data,e),Iu(t,null),Iu(r.blueprint,null));const i=vu(e,t),a=e.injectorIndex;if(p0(i)){const u=dl(i),g=fl(i,t),m=g[h].data;for(let y=0;y<8;y++)t[a+y]=g[u+y]|m[u+y]}return t[a+8]=i,a}function Iu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function w0(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function vu(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=S0(i),null===r)return Ao;if(n++,i=i[Ie],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ao}function Su(e,t,n){!function NC(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Jt)&&(r=n[Jt]),null==r&&(r=n[Jt]=MC++);const i=r&m0;t.data[e+(i>>y0)]|=1<<i}(e,t,n)}function x0(e,t,n){if(n&ue.Optional||void 0!==e)return e;Fi()}function C0(e,t,n,r){if(n&ue.Optional&&void 0===r&&(r=null),!(n&(ue.Self|ue.Host))){const i=e[M],a=Sn(void 0);try{return i?i.get(t,r,n&ue.Optional):F(t,r,n&ue.Optional)}finally{Sn(a)}}return x0(r,0,n)}function E0(e,t,n,r=ue.Default,i){if(null!==e){if(1024&t[p]){const u=function FC(e,t,n,r,i){let a=e,u=t;for(;null!==a&&null!==u&&1024&u[p]&&!(256&u[p]);){const g=D0(a,u,n,r|ue.Self,Nr);if(g!==Nr)return g;let m=a.parent;if(!m){const y=u[Bt];if(y){const C=y.get(n,Nr,r);if(C!==Nr)return C}m=S0(u),u=u[Ie]}a=m}return i}(e,t,n,r,Nr);if(u!==Nr)return u}const a=D0(e,t,n,r,Nr);if(a!==Nr)return a}return C0(t,n,r,i)}function D0(e,t,n,r,i){const a=function LC(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Jt)?e[Jt]:void 0;return"number"==typeof t?t>=0?t&m0:PC:t}(n);if("function"==typeof a){if(!s0(t,e,r))return r&ue.Host?x0(i,0,r):C0(t,n,r,i);try{const u=a(r);if(null!=u||r&ue.Optional)return u;Fi()}finally{u0()}}else if("number"==typeof a){let u=null,g=w0(e,t),m=Ao,y=r&ue.Host?t[se][I]:null;for((-1===g||r&ue.SkipSelf)&&(m=-1===g?vu(e,t):t[g+8],m!==Ao&&I0(r,!1)?(u=t[h],g=dl(m),t=fl(m,t)):g=-1);-1!==g;){const C=t[h];if(A0(a,g,C.data)){const D=OC(g,t,n,u,r,y);if(D!==Nr)return D}m=t[g+8],m!==Ao&&I0(r,t[h].data[g+8]===y)&&A0(a,g,t)?(u=C,g=dl(m),t=fl(m,t)):g=-1}}return i}function OC(e,t,n,r,i,a){const u=t[h],g=u.data[e+8],C=function pl(e,t,n,r,i){const a=e.providerIndexes,u=t.data,g=1048575&a,m=e.directiveStart,C=a>>20,v=i?g+C:e.directiveEnd;for(let T=r?g:g+C;T<v;T++){const R=u[T];if(T<m&&n===R||T>=m&&R.type===n)return T}if(i){const T=u[m];if(T&&dr(T)&&T.type===n)return m}return null}(g,u,n,null==r?Rs(g)&&Au:r!=u&&0!=(3&g.type),i&ue.Host&&a===g);return null!==C?Wi(t,u,C,g):Nr}function Wi(e,t,n,r){let i=e[n];const a=t.data;if(function SC(e){return e instanceof Ls}(i)){const u=i;u.resolving&&function pn(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new $(-200,`Circular dependency in DI detected for ${e}${n}`)}(function $e(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ae(e)}(a[n]));const g=hl(u.canSeeViewProviders);u.resolving=!0;const m=u.injectImpl?Sn(u.injectImpl):null;s0(e,r,ue.Default);try{i=e[n]=u.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function IC(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=t.type.prototype;if(r){const u=Wh(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a))}(n,a[n],t)}finally{null!==m&&Sn(m),hl(g),u.resolving=!1,u0()}}return i}function A0(e,t,n){return!!(n[t+(e>>y0)]&1<<e)}function I0(e,t){return!(e&ue.Self||e&ue.Host&&t)}class Io{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return E0(this._tNode,this._lView,t,Ui(r),n)}}function PC(){return new Io(sn(),z())}function _u(e){return Pt(e)?()=>{const t=_u(K(e));return t&&t()}:Hi(e)}function S0(e){const t=e[h],n=t.type;return 2===n?t.declTNode:1===n?e[I]:null}const So="__parameters__";function bo(e,t,n){return Xn(()=>{const r=function bu(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...a){if(this instanceof i)return r.apply(this,a),this;const u=new i(...a);return g.annotation=u,g;function g(m,y,C){const D=m.hasOwnProperty(So)?m[So]:Object.defineProperty(m,So,{value:[]})[So];for(;D.length<=C;)D.push(null);return(D[C]=D[C]||[]).push(u),m}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class ye{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=he({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $i(e,t){e.forEach(n=>Array.isArray(n)?$i(n,t):t(n))}function b0(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function yl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Us=ji(bo("Optional"),8),js=ji(bo("SkipSelf"),4);var Tn=(()=>((Tn=Tn||{})[Tn.Important=1]="Important",Tn[Tn.DashCase=2]="DashCase",Tn))();const Fu=new Map;let l2=0;const Bu="__ngContext__";function dn(e,t){Bn(t)?(e[Bu]=t[Ke],function u2(e){Fu.set(e[Ke],e)}(t)):e[Bu]=t}let Uu;function ju(e,t){return Uu(e,t)}function Gs(e){const t=e[w];return ur(t)?t[w]:t}function Vu(e){return Z0(e[X])}function Hu(e){return Z0(e[E])}function Z0(e){for(;null!==e&&!ur(e);)e=e[E];return e}function No(e,t,n,r,i){if(null!=r){let a,u=!1;ur(r)?a=r:Bn(r)&&(u=!0,r=r[f]);const g=on(r);0===e&&null!==n?null==i?t1(t,n,g):Yi(t,n,g,i||null,!0):1===e&&null!==n?Yi(t,n,g,i||null,!0):2===e?function Zu(e,t,n){const r=El(e,t);r&&function M2(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,g,u):3===e&&t.destroyNode(g),null!=a&&function O2(e,t,n,r,i){const a=n[xo];a!==on(n)&&No(t,e,r,a,i);for(let g=yn;g<n.length;g++){const m=n[g];Ws(m[h],m,e,t,r,a)}}(t,e,a,n,i)}}function Gu(e,t,n){return e.createElement(t,n)}function Q0(e,t){const n=e[Co],r=n.indexOf(t),i=t[w];512&t[p]&&(t[p]&=-513,fu(i,-1)),n.splice(r,1)}function Wu(e,t){if(e.length<=yn)return;const n=yn+t,r=e[n];if(r){const i=r[kt];null!==i&&i!==e&&Q0(i,r),t>0&&(e[n-1][E]=r[E]);const a=yl(e,yn+t);!function D2(e,t){Ws(e,t,t[N],2,null,null),t[f]=null,t[I]=null}(r[h],r);const u=a[ht];null!==u&&u.detachView(a[h]),r[w]=null,r[E]=null,r[p]&=-65}return r}function K0(e,t){if(!(128&t[p])){const n=t[N];n.destroyNode&&Ws(e,t,n,3,null,null),function v2(e){let t=e[X];if(!t)return $u(e[h],e);for(;t;){let n=null;if(Bn(t))n=t[X];else{const r=t[yn];r&&(n=r)}if(!n){for(;t&&!t[E]&&t!==e;)Bn(t)&&$u(t[h],t),t=t[w];null===t&&(t=e),Bn(t)&&$u(t[h],t),n=t&&t[E]}t=n}}(t)}}function $u(e,t){if(!(128&t[p])){t[p]&=-65,t[p]|=128,function T2(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Ls)){const a=n[r+1];if(Array.isArray(a))for(let u=0;u<a.length;u+=2){const g=i[a[u]],m=a[u+1];Qn(4,g,m);try{m.call(g)}finally{Qn(5,g,m)}}else{Qn(4,i,a);try{a.call(i)}finally{Qn(5,i,a)}}}}}(e,t),function b2(e,t){const n=e.cleanup,r=t[S];let i=-1;if(null!==n)for(let a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){const u=n[a+3];u>=0?r[i=u]():r[i=-u].unsubscribe(),a+=2}else{const u=r[i=n[a+1]];n[a].call(u)}if(null!==r){for(let a=i+1;a<r.length;a++)(0,r[a])();t[S]=null}}(e,t),1===t[h].type&&t[N].destroy();const n=t[kt];if(null!==n&&ur(t[w])){n!==t[w]&&Q0(n,t);const r=t[ht];null!==r&&r.detachView(e)}!function d2(e){Fu.delete(e[Ke])}(t)}}function J0(e,t,n){return function e1(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[f];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:a}=e.data[r.directiveStart+i];if(a===Zn.None||a===Zn.Emulated)return null}return Un(r,n)}}(e,t.parent,n)}function Yi(e,t,n,r,i){e.insertBefore(t,n,r,i)}function t1(e,t,n){e.appendChild(t,n)}function n1(e,t,n,r,i){null!==r?Yi(e,t,n,r,i):t1(e,t,n)}function El(e,t){return e.parentNode(t)}let Yu,Ku,o1=function i1(e,t,n){return 40&e.type?Un(e,n):null};function Dl(e,t,n,r){const i=J0(e,r,t),a=t[N],g=function r1(e,t,n){return o1(e,t,n)}(r.parent||t[I],r,t);if(null!=i)if(Array.isArray(n))for(let m=0;m<n.length;m++)n1(a,i,n[m],g,!1);else n1(a,i,n,g,!1);void 0!==Yu&&Yu(a,r,t,n,i)}function Al(e,t){if(null!==t){const n=t.type;if(3&n)return Un(t,e);if(4&n)return Xu(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Al(e,r);{const i=e[t.index];return ur(i)?Xu(-1,i):on(i)}}if(32&n)return ju(t,e)()||on(e[t.index]);{const r=a1(e,t);return null!==r?Array.isArray(r)?r[0]:Al(Gs(e[se]),r):Al(e,t.next)}}return null}function a1(e,t){return null!==t?e[se][I].projection[t.projection]:null}function Xu(e,t){const n=yn+e+1;if(n<t.length){const r=t[n],i=r[h].firstChild;if(null!==i)return Al(r,i)}return t[xo]}function qu(e,t,n,r,i,a,u){for(;null!=n;){const g=r[n.index],m=n.type;if(u&&0===t&&(g&&dn(on(g),r),n.flags|=2),32!=(32&n.flags))if(8&m)qu(e,t,n.child,r,i,a,!1),No(t,e,i,g,a);else if(32&m){const y=ju(n,r);let C;for(;C=y();)No(t,e,i,C,a);No(t,e,i,g,a)}else 16&m?l1(e,t,r,n,i,a):No(t,e,i,g,a);n=u?n.projectionNext:n.next}}function Ws(e,t,n,r,i,a){qu(n,r,e.firstChild,t,i,a,!1)}function l1(e,t,n,r,i,a){const u=n[se],m=u[I].projection[r.projection];if(Array.isArray(m))for(let y=0;y<m.length;y++)No(t,e,i,m[y],a);else qu(e,t,m,u[w],i,a,!0)}function c1(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function u1(e,t,n){const{mergedAttrs:r,classes:i,styles:a}=n;null!==r&&Du(e,t,r),null!==i&&c1(e,t,i),null!==a&&function P2(e,t,n){e.setAttribute(t,"style",n)}(e,t,a)}const _l=new ye("ENVIRONMENT_INITIALIZER"),v1=new ye("INJECTOR",-1),S1=new ye("INJECTOR_DEF_TYPES");class _1{get(t,n=ki){if(n===ki){const r=new Error(`NullInjectorError: No provider for ${Ee(t)}!`);throw r.name="NullInjectorError",r}return n}}function lE(...e){return{\u0275providers:b1(0,e),\u0275fromNgModule:!0}}function b1(e,...t){const n=[],r=new Set;let i;return $i(t,a=>{const u=a;id(u,n,[],r)&&(i||(i=[]),i.push(u))}),void 0!==i&&T1(i,n),n}function T1(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];od(i,a=>{t.push(a)})}}function id(e,t,n,r){if(!(e=K(e)))return!1;let i=null,a=Qa(e);const u=!a&&re(e);if(a||u){if(u&&!u.standalone)return!1;i=e}else{const m=e.ngModule;if(a=Qa(m),!a)return!1;i=m}const g=r.has(i);if(u){if(g)return!1;if(r.add(i),u.dependencies){const m="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const y of m)id(y,t,n,r)}}else{if(!a)return!1;{if(null!=a.imports&&!g){let y;r.add(i);try{$i(a.imports,C=>{id(C,t,n,r)&&(y||(y=[]),y.push(C))})}finally{}void 0!==y&&T1(y,t)}if(!g){const y=Hi(i)||(()=>new i);t.push({provide:i,useFactory:y,deps:He},{provide:S1,useValue:i,multi:!0},{provide:_l,useValue:()=>fe(i),multi:!0})}const m=a.providers;null==m||g||od(m,C=>{t.push(C)})}}return i!==e&&void 0!==e.providers}function od(e,t){for(let n of e)L(n)&&(n=n.\u0275providers),Array.isArray(n)?od(n,t):t(n)}const cE=je({provide:String,useValue:je});function sd(e){return null!==e&&"object"==typeof e&&cE in e}function Xi(e){return"function"==typeof e}const ad=new ye("Set Injector scope."),bl={},dE={};let ld;function Tl(){return void 0===ld&&(ld=new _1),ld}class Qr{}class R1 extends Qr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ud(t,u=>this.processProvider(u)),this.records.set(v1,Oo(void 0,this)),i.has("environment")&&this.records.set(Qr,Oo(void 0,this));const a=this.records.get(ad);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(S1.multi,He,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Qe(this),r=Sn(void 0);try{return t()}finally{Qe(n),Sn(r)}}get(t,n=ki,r=ue.Default){this.assertNotDestroyed(),r=Ui(r);const i=Qe(this),a=Sn(void 0);try{if(!(r&ue.SkipSelf)){let g=this.records.get(t);if(void 0===g){const m=function mE(e){return"function"==typeof e||"object"==typeof e&&e instanceof ye}(t)&&vr(t);g=m&&this.injectableDefInScope(m)?Oo(cd(t),bl):null,this.records.set(t,g)}if(null!=g)return this.hydrate(t,g)}return(r&ue.Self?Tl():this.parent).get(t,n=r&ue.Optional&&n===ki?null:n)}catch(u){if("NullInjectorError"===u.name){if((u[$r]=u[$r]||[]).unshift(Ee(t)),i)throw u;return function el(e,t,n,r){const i=e[$r];throw t[Bi]&&i.unshift(t[Bi]),e.message=function Ts(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==yi?e.slice(2):e;let i=Ee(t);if(Array.isArray(t))i=t.map(Ee).join(" -> ");else if("object"==typeof t){let a=[];for(let u in t)if(t.hasOwnProperty(u)){let g=t[u];a.push(u+":"+("string"==typeof g?JSON.stringify(g):Ee(g)))}i=`{${a.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Ss,"\n  ")}`}("\n"+e.message,i,n,r),e[Tt]=i,e[$r]=null,e}(u,t,"R3InjectorError",this.source)}throw u}finally{Sn(a),Qe(i)}}resolveInjectorInitializers(){const t=Qe(this),n=Sn(void 0);try{const r=this.get(_l.multi,He,ue.Self);for(const i of r)i()}finally{Qe(t),Sn(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Ee(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(t){let n=Xi(t=K(t))?t:K(t&&t.provide);const r=function hE(e){return sd(e)?Oo(void 0,e.useValue):Oo(function O1(e,t,n){let r;if(Xi(e)){const i=K(e);return Hi(i)||cd(i)}if(sd(e))r=()=>K(e.useValue);else if(function N1(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(..._s(e.deps||[]));else if(function M1(e){return!(!e||!e.useExisting)}(e))r=()=>fe(K(e.useExisting));else{const i=K(e&&(e.useClass||e.provide));if(!function gE(e){return!!e.deps}(e))return Hi(i)||cd(i);r=()=>new i(..._s(e.deps))}return r}(e),bl)}(t);if(Xi(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Oo(void 0,bl,!0),i.factory=()=>_s(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===bl&&(n.value=dE,n.value=n.factory()),"object"==typeof n.value&&n.value&&function pE(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=K(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function cd(e){const t=vr(e),n=null!==t?t.factory:Hi(e);if(null!==n)return n;if(e instanceof ye)throw new $(204,!1);if(e instanceof Function)return function fE(e){const t=e.length;if(t>0)throw function Bs(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new $(204,!1);const n=function Za(e){const t=e&&(e[yo]||e[Ka]);return t?(function qa(e){if(e.hasOwnProperty("name"))return e.name;(""+e).match(/^function\s*([^\s(]+)/)}(e),t):null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new $(204,!1)}function Oo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function ud(e,t){for(const n of e)Array.isArray(n)?ud(n,t):n&&L(n)?ud(n.\u0275providers,t):t(n)}class yE{}class L1{}class xE{resolveComponentFactory(t){throw function wE(e){const t=Error(`No component factory found for ${Ee(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Zs=(()=>{class e{}return e.NULL=new xE,e})();function CE(){return Lo(sn(),z())}function Lo(e,t){return new Ci(Un(e,t))}let Ci=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=CE,e})();class F1{}let AE=(()=>{class e{}return e.\u0275prov=he({token:e,providedIn:"root",factory:()=>null}),e})();class Nl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const IE=new Nl("15.2.5"),dd={},fd="ngOriginalError";function hd(e){return e[fd]}class Po{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&hd(t);for(;n&&hd(n);)n=hd(n);return n||null}}function Kr(e){return e instanceof Function?e():e}function B1(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}const U1="ng-template";function PE(e,t,n){let r=0,i=!0;for(;r<e.length;){let a=e[r++];if("string"==typeof a&&i){const u=e[r++];if(n&&"class"===a&&-1!==B1(u.toLowerCase(),t,0))return!0}else{if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===t)return!0;return!1}"number"==typeof a&&(i=!1)}}return!1}function j1(e){return 4===e.type&&e.value!==U1}function FE(e,t,n){return t===(4!==e.type||n?e.value:U1)}function kE(e,t,n){let r=4;const i=e.attrs||[],a=function jE(e){for(let t=0;t<e.length;t++)if(f0(e[t]))return t;return e.length}(i);let u=!1;for(let g=0;g<t.length;g++){const m=t[g];if("number"!=typeof m){if(!u)if(4&r){if(r=2|1&r,""!==m&&!FE(e,m,n)||""===m&&1===t.length){if(fr(r))return!1;u=!0}}else{const y=8&r?m:t[++g];if(8&r&&null!==e.attrs){if(!PE(e.attrs,y,n)){if(fr(r))return!1;u=!0}continue}const D=BE(8&r?"class":m,i,j1(e),n);if(-1===D){if(fr(r))return!1;u=!0;continue}if(""!==y){let v;v=D>a?"":i[D+1].toLowerCase();const T=8&r?v:null;if(T&&-1!==B1(T,y,0)||2&r&&y!==v){if(fr(r))return!1;u=!0}}}}else{if(!u&&!fr(r)&&!fr(m))return!1;if(u&&fr(m))continue;u=!1,r=m|1&r}}return fr(r)||u}function fr(e){return 0==(1&e)}function BE(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let a=!1;for(;i<t.length;){const u=t[i];if(u===e)return i;if(3===u||6===u)a=!0;else{if(1===u||2===u){let g=t[++i];for(;"string"==typeof g;)g=t[++i];continue}if(4===u)break;if(0===u){i+=4;continue}}i+=a?1:2}return-1}return function VE(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function V1(e,t,n=!1){for(let r=0;r<t.length;r++)if(kE(e,t[r],n))return!0;return!1}function H1(e,t){return e?":not("+t.trim()+")":t}function zE(e){let t=e[0],n=1,r=2,i="",a=!1;for(;n<e.length;){let u=e[n];if("string"==typeof u)if(2&r){const g=e[++n];i+="["+u+(g.length>0?'="'+g+'"':"")+"]"}else 8&r?i+="."+u:4&r&&(i+=" "+u);else""!==i&&!fr(u)&&(t+=H1(a,i),i=""),r=u,a=a||!fr(r);n++}return""!==i&&(t+=H1(a,i)),t}const Se={};function gd(e){z1(Ye(),z(),xn()+e,!1)}function z1(e,t,n,r){if(!r)if(3==(3&t[p])){const a=e.preOrderCheckHooks;null!==a&&cl(t,a,n)}else{const a=e.preOrderHooks;null!==a&&ul(t,a,0,n)}Gi(n)}function Y1(e,t=null,n=null,r){const i=X1(e,t,n,r);return i.resolveInjectorInitializers(),i}function X1(e,t=null,n=null,r,i=new Set){const a=[n||He,lE(e)];return r=r||("object"==typeof e?void 0:Ee(e)),new R1(a,t||Tl(),r||null,i)}let Jr=(()=>{class e{static create(n,r){if(Array.isArray(n))return Y1({name:""},r,n,"");{const i=n.name??"";return Y1({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=ki,e.NULL=new _1,e.\u0275prov=he({token:e,providedIn:"any",factory:()=>fe(v1)}),e.__NG_ELEMENT_ID__=-1,e})();function we(e,t=ue.Default){const n=z();return null===n?fe(e,t):E0(sn(),n,K(e),t)}function ng(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const a=n[r+1];if(-1!==a){const u=e.data[a];yu(n[r]),u.contentQueries(2,t[a],a)}}}function Ol(e,t,n,r,i,a,u,g,m,y,C){const D=t.blueprint.slice();return D[f]=i,D[p]=76|r,(null!==C||e&&1024&e[p])&&(D[p]|=1024),Qh(D),D[w]=D[Ie]=e,D[b]=n,D[O]=u||e&&e[O],D[N]=g||e&&e[N],D[W]=m||e&&e[W]||null,D[M]=y||e&&e[M]||null,D[I]=a,D[Ke]=function c2(){return l2++}(),D[Bt]=C,D[se]=2==t.type?e[se]:D,D}function Bo(e,t,n,r,i){let a=e.data[t];if(null===a)a=function xd(e,t,n,r,i){const a=e0(),u=hu(),m=e.data[t]=function pD(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=m),null!==a&&(u?null==a.child&&null!==m.parent&&(a.child=m):null===a.next&&(a.next=m,m.prev=a)),m}(e,t,n,r,i),function hC(){return ve.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;const u=function Os(){const e=ve.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();a.injectorIndex=null===u?-1:u.injectorIndex}return Mr(a,!0),a}function qs(e,t,n,r){if(0===n)return-1;const i=t.length;for(let a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Cd(e,t,n){wu(t);try{const r=e.viewQuery;null!==r&&Md(1,r,n);const i=e.template;null!==i&&rg(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ng(e,t),e.staticViewQueries&&Md(2,e.viewQuery,n);const a=e.components;null!==a&&function fD(e,t){for(let n=0;n<t.length;n++)LD(e,t[n])}(t,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[p]&=-5,xu()}}function Ll(e,t,n,r){const i=t[p];if(128!=(128&i)){wu(t);try{Qh(t),function n0(e){return ve.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&rg(e,t,n,2,r);const u=3==(3&i);if(u){const y=e.preOrderCheckHooks;null!==y&&cl(t,y,null)}else{const y=e.preOrderHooks;null!==y&&ul(t,y,0,null),Cu(t,0)}if(function RD(e){for(let t=Vu(e);null!==t;t=Hu(t)){if(!t[rl])continue;const n=t[Co];for(let r=0;r<n.length;r++){const i=n[r];512&i[p]||fu(i[w],1),i[p]|=512}}}(t),function ND(e){for(let t=Vu(e);null!==t;t=Hu(t))for(let n=yn;n<t.length;n++){const r=t[n],i=r[h];al(r)&&Ll(i,r,i.template,r[b])}}(t),null!==e.contentQueries&&ng(e,t),u){const y=e.contentCheckHooks;null!==y&&cl(t,y)}else{const y=e.contentHooks;null!==y&&ul(t,y,1),Cu(t,1)}!function uD(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Gi(~i);else{const a=i,u=n[++r],g=n[++r];gC(u,a),g(2,t[a])}}}finally{Gi(-1)}}(e,t);const g=e.components;null!==g&&function dD(e,t){for(let n=0;n<t.length;n++)OD(e,t[n])}(t,g);const m=e.viewQuery;if(null!==m&&Md(2,m,r),u){const y=e.viewCheckHooks;null!==y&&cl(t,y)}else{const y=e.viewHooks;null!==y&&ul(t,y,2),Cu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[p]&=-41,512&t[p]&&(t[p]&=-513,fu(t[w],-1))}finally{xu()}}}function rg(e,t,n,r,i){const a=xn(),u=2&r;try{Gi(-1),u&&t.length>Le&&z1(e,t,Le,!1),Qn(u?2:0,i),n(r,i)}finally{Gi(a),Qn(u?3:1,i)}}function Ed(e,t,n){if(uu(t)){const i=t.directiveEnd;for(let a=t.directiveStart;a<i;a++){const u=e.data[a];u.contentQueries&&u.contentQueries(1,n[a],a)}}}function ig(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Id(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Id(e,t,n,r,i,a,u,g,m,y){const C=Le+r,D=C+i,v=function hD(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Se);return n}(C,D),T="function"==typeof y?y():y;return v[h]={type:e,blueprint:v,template:n,queries:null,viewQuery:g,declTNode:t,data:v.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:D,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:m,consts:T,incompleteFirstPass:!1}}function og(e,t,n,r){const i=function fg(e){return e[S]||(e[S]=[])}(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&function hg(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1))}function sg(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const a=e[i];null===r?ag(n,t,i,a):r.hasOwnProperty(i)&&ag(n,t,r[i],a)}return n}function ag(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function cg(e,t,n,r,i,a){for(let y=0;y<r.length;y++)Su(gl(n,t),e,r[y].type);!function SD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let y=0;y<r.length;y++){const C=r[y];C.providersResolver&&C.providersResolver(C)}let u=!1,g=!1,m=qs(e,t,r.length,null);for(let y=0;y<r.length;y++){const C=r[y];n.mergedAttrs=Ps(n.mergedAttrs,C.hostAttrs),_D(e,n,t,m,C),vD(m,C,i),null!==C.contentQueries&&(n.flags|=4),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(n.flags|=64);const D=C.type.prototype;!u&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),u=!0),!g&&(D.ngOnChanges||D.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),g=!0),m++}!function mD(e,t,n){const i=t.directiveEnd,a=e.data,u=t.attrs,g=[];let m=null,y=null;for(let C=t.directiveStart;C<i;C++){const D=a[C],v=n?n.get(D):null,R=v?v.outputs:null;m=sg(D.inputs,C,m,v?v.inputs:null),y=sg(D.outputs,C,y,R);const P=null===m||null===u||j1(t)?null:MD(m,C,u);g.push(P)}null!==m&&(m.hasOwnProperty("class")&&(t.flags|=8),m.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=g,t.inputs=m,t.outputs=y}(e,n,a)}function ug(e,t,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,u=function pC(){return ve.lFrame.currentDirectiveIndex}();try{Gi(a);for(let g=r;g<i;g++){const m=e.data[g],y=t[g];pu(g),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&DD(m,y)}}finally{Gi(-1),pu(u)}}function DD(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Sd(e,t,n){t.componentOffset=n,(e.components||(e.components=[])).push(t.index)}function vD(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;dr(t)&&(n[""]=e)}}function _D(e,t,n,r,i){e.data[r]=i;const a=i.factory||(i.factory=Hi(i.type)),u=new Ls(a,dr(i),we);e.blueprint[r]=u,n[r]=u,function xD(e,t,n,r,i){const a=i.hostBindings;if(a){let u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);const g=~t.index;(function CD(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=g&&u.push(g),u.push(n,r,a)}}(e,t,r,qs(e,n,i.hostVars,Se),i)}function TD(e,t,n,r,i,a){const u=a[t];if(null!==u){const g=r.setInput;for(let m=0;m<u.length;){const y=u[m++],C=u[m++],D=u[m++];null!==g?r.setInput(n,D,y,C):n[C]=D}}}function MD(e,t,n){let r=null,i=0;for(;i<n.length;){const a=n[i];if(0!==a)if(5!==a){if("number"==typeof a)break;if(e.hasOwnProperty(a)){null===r&&(r=[]);const u=e[a];for(let g=0;g<u.length;g+=2)if(u[g]===t){r.push(a,u[g+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function OD(e,t){const n=jn(t,e);if(al(n)){const r=n[h];48&n[p]?Ll(r,n,r.template,n[b]):n[A]>0&&bd(n)}}function bd(e){for(let r=Vu(e);null!==r;r=Hu(r))for(let i=yn;i<r.length;i++){const a=r[i];if(al(a))if(512&a[p]){const u=a[h];Ll(u,a,u.template,a[b])}else a[A]>0&&bd(a)}const n=e[h].components;if(null!==n)for(let r=0;r<n.length;r++){const i=jn(n[r],e);al(i)&&i[A]>0&&bd(i)}}function LD(e,t){const n=jn(t,e),r=n[h];(function PD(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Cd(r,n,n[b])}function Pl(e,t){return e[X]?e[B][E]=t:e[X]=t,e[B]=t,t}function Fl(e,t,n,r=!0){const i=t[O];i.begin&&i.begin();try{Ll(e,t,e.template,n)}catch(u){throw r&&function pg(e,t){const n=e[M],r=n?n.get(Po,null):null;r&&r.handleError(t)}(t,u),u}finally{i.end&&i.end()}}function Md(e,t,n){yu(0),t(e,n)}function Nd(e,t,n,r,i){for(let a=0;a<n.length;){const u=n[a++],g=n[a++],m=t[u],y=e.data[u];null!==y.setInput?y.setInput(m,i,r,g):m[g]=i}}function ei(e,t,n){const r=function sl(e,t){return on(t[e])}(t,e);!function q0(e,t,n){e.setValue(t,n)}(e[N],r,n)}function kl(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(let u=0;u<t.length;u++){const g=t[u];"number"==typeof g?a=g:1==a?i=gi(i,g):2==a&&(r=gi(r,g+": "+t[++u]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Bl(e,t,n,r,i=!1){for(;null!==n;){const a=t[n.index];if(null!==a&&r.push(on(a)),ur(a))for(let g=yn;g<a.length;g++){const m=a[g],y=m[h].firstChild;null!==y&&Bl(m[h],m,y,r)}const u=n.type;if(8&u)Bl(e,t,n.child,r);else if(32&u){const g=ju(n,t);let m;for(;m=g();)r.push(m)}else if(16&u){const g=a1(t,n);if(Array.isArray(g))r.push(...g);else{const m=Gs(t[se]);Bl(m[h],m,g,r,!0)}}n=i?n.projectionNext:n.next}return r}class Qs{get rootNodes(){const t=this._lView,n=t[h];return Bl(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[b]}set context(t){this._lView[b]=t}get destroyed(){return 128==(128&this._lView[p])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[w];if(ur(t)){const n=t[il],r=n?n.indexOf(this):-1;r>-1&&(Wu(t,r),yl(n,r))}this._attachedToViewContainer=!1}K0(this._lView[h],this._lView)}onDestroy(t){og(this._lView[h],this._lView,null,t)}markForCheck(){!function Td(e){for(;e;){e[p]|=32;const t=Gs(e);if(Yx(e)&&!t)return e;e=t}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[p]&=-65}reattach(){this._lView[p]|=64}detectChanges(){Fl(this._lView[h],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I2(e,t){Ws(e,t,t[N],2,null,null)}(this._lView[h],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=t}}class FD extends Qs{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Fl(t[h],t,t[b],!1)}checkNoChanges(){}get context(){return null}}class mg extends Zs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=re(t);return new Ks(n,this.ngModule)}}function yg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class BD{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ui(r);const i=this.injector.get(t,dd,r);return i!==dd||n===dd?i:this.parentInjector.get(t,n,r)}}class Ks extends L1{get inputs(){return yg(this.componentDef.inputs)}get outputs(){return yg(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function GE(e){return e.map(zE).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let a=(i=i||this.ngModule)instanceof Qr?i:i?.injector;a&&null!==this.componentDef.getStandaloneInjector&&(a=this.componentDef.getStandaloneInjector(a)||a);const u=a?new BD(t,a):t,g=u.get(F1,null);if(null===g)throw new $(407,!1);const m=u.get(AE,null),y=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",D=r?function gD(e,t,n){return e.selectRootElement(t,n===Zn.ShadowDom)}(y,r,this.componentDef.encapsulation):Gu(y,C,function kD(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(C)),v=this.componentDef.onPush?288:272,T=Id(0,null,null,1,0,null,null,null,null,null),R=Ol(null,T,null,v,null,null,g,y,m,u,null);let P,k;wu(R);try{const H=this.componentDef;let Q,j=null;H.findHostDirectiveDefs?(Q=[],j=new Map,H.findHostDirectiveDefs(H,Q,j),Q.push(H)):Q=[H];const ae=function jD(e,t){const n=e[h],r=Le;return e[r]=t,Bo(n,r,2,"#host",null)}(R,D),Ve=function VD(e,t,n,r,i,a,u,g){const m=i[h];!function HD(e,t,n,r){for(const i of e)t.mergedAttrs=Ps(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(kl(t,t.mergedAttrs,!0),null!==n&&u1(r,n,t))}(r,e,t,u);const y=a.createRenderer(t,n),C=Ol(i,ig(n),null,n.onPush?32:16,i[e.index],e,a,y,g||null,null,null);return m.firstCreatePass&&Sd(m,e,r.length-1),Pl(i,C),i[e.index]=C}(ae,D,H,Q,R,g,y);k=function qh(e,t){return e.data[t]}(T,Le),D&&function GD(e,t,n,r){if(r)Du(e,n,["ng-version",IE.full]);else{const{attrs:i,classes:a}=function WE(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!fr(i))break;i=a}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Du(e,n,i),a&&a.length>0&&c1(e,n,a.join(" "))}}(y,H,D,r),void 0!==n&&function WD(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const a=n[i];r.push(null!=a?Array.from(a):null)}}(k,this.ngContentSelectors,n),P=function zD(e,t,n,r,i,a){const u=sn(),g=i[h],m=Un(u,i);cg(g,i,u,n,null,r);for(let C=0;C<n.length;C++)dn(Wi(i,g,u.directiveStart+C,u),i);ug(g,i,u),m&&dn(m,i);const y=Wi(i,g,u.directiveStart+u.componentOffset,u);if(e[b]=i[b]=y,null!==a)for(const C of a)C(y,t);return Ed(g,u,e),y}(Ve,H,Q,j,R,[$D]),Cd(T,R,null)}finally{xu()}return new UD(this.componentType,P,Lo(k,R),R,k)}}class UD extends yE{constructor(t,n,r,i,a){super(),this.location=r,this._rootLView=i,this._tNode=a,this.instance=n,this.hostView=this.changeDetectorRef=new FD(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const a=this._rootLView;Nd(a[h],a,i,t,n),function lg(e,t){const n=jn(t,e);16&n[p]||(n[p]|=32)}(a,this._tNode.index)}}get injector(){return new Io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function $D(){const e=sn();ll(z()[h],e)}function jo(e,t,n,r){return function fn(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}(e,function Do(){return ve.lFrame.bindingIndex++}(),n)?t+Ae(n)+r:Se}function Pd(e,t,n,r,i){const u=i?"class":"style";Nd(e,n,t.inputs[u],u,r)}function Vl(e,t,n,r){const i=z(),a=Ye(),u=Le+e,g=i[N],m=a.firstCreatePass?function uA(e,t,n,r,i,a){const u=t.consts,m=Bo(t,e,2,r,wi(u,i));return function vd(e,t,n,r){if(Jh()){const i=null===r?null:{"":-1},a=function AD(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let a=0;a<n.length;a++){const u=n[a];if(V1(t,u.selectors,!1))if(r||(r=[]),dr(u))if(null!==u.findHostDirectiveDefs){const g=[];i=i||new Map,u.findHostDirectiveDefs(u,g,i),r.unshift(...g,u),Sd(e,t,g.length)}else r.unshift(u),Sd(e,t,0);else i=i||new Map,u.findHostDirectiveDefs?.(u,r,i),r.push(u)}return null===r?null:[r,i]}(e,n);let u,g;null===a?u=g=null:[u,g]=a,null!==u&&cg(e,t,n,u,i,g),i&&function ID(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const a=n[t[i+1]];if(null==a)throw new $(-301,!1);r.push(t[i],a)}}}(n,r,i)}n.mergedAttrs=Ps(n.mergedAttrs,n.attrs)}(t,n,m,wi(u,a)),null!==m.attrs&&kl(m,m.attrs,!1),null!==m.mergedAttrs&&kl(m,m.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,m),m}(u,a,i,t,n,r):a.data[u],y=i[u]=Gu(g,t,function AC(){return ve.lFrame.currentNamespace}()),C=function ol(e){return 1==(1&e.flags)}(m);return Mr(m,!0),u1(g,y,m),32!=(32&m.flags)&&Dl(a,i,y,m),0===function oC(){return ve.lFrame.elementDepthCount}()&&dn(y,i),function sC(){ve.lFrame.elementDepthCount++}(),C&&(function Dd(e,t,n){Jh()&&(function ED(e,t,n,r){const i=n.directiveStart,a=n.directiveEnd;Rs(n)&&function bD(e,t,n){const r=Un(t,e),i=ig(n),a=e[O],u=Pl(e,Ol(e,i,null,n.onPush?32:16,r,t,a,a.createRenderer(r,n),null,null,null));e[t.index]=u}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||gl(n,t),dn(r,t);const u=n.initialInputs;for(let g=i;g<a;g++){const m=e.data[g],y=Wi(t,e,g,n);dn(y,t),null!==u&&TD(0,g-i,y,m,0,u),dr(m)&&(jn(n.index,t)[b]=Wi(t,e,g,n))}}(e,t,n,Un(n,t)),64==(64&n.flags)&&ug(e,t,n))}(a,i,m),Ed(a,m,i)),null!==r&&function Ad(e,t,n=Un){const r=t.localNames;if(null!==r){let i=t.index+1;for(let a=0;a<r.length;a+=2){const u=r[a+1],g=-1===u?n(t,e):e[u];e[i++]=g}}}(i,m),Vl}function Hl(){let e=sn();hu()?function gu(){ve.lFrame.isParent=!1}():(e=e.parent,Mr(e,!1));const t=e;!function aC(){ve.lFrame.elementDepthCount--}();const n=Ye();return n.firstCreatePass&&(ll(n,e),uu(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function _C(e){return 0!=(8&e.flags)}(t)&&Pd(n,t,z(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function bC(e){return 0!=(16&e.flags)}(t)&&Pd(n,t,z(),t.stylesWithoutHost,!1),Hl}function zl(e,t,n,r){return Vl(e,t,n,r),Hl(),zl}function Gl(e){return!!e&&"function"==typeof e.then}const Pg=function Lg(e){return!!e&&"function"==typeof e.subscribe};function Gd(e,t=""){const n=z(),r=Ye(),i=e+Le,a=r.firstCreatePass?Bo(r,i,1,t,null):r.data[i],u=n[i]=function zu(e,t){return e.createText(t)}(n[N],t);Dl(r,n,u,a),Mr(a,!1)}function Wd(e){return Yl("",e,""),Wd}function Yl(e,t,n){const r=z(),i=jo(r,e,t,n);return i!==Se&&ei(r,xn(),i),Yl}const qo="en-US";let Np=qo;class Qo{}class rm{}class im extends Qo{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mg(this);const r=s(t);this._bootstrapComponents=Kr(r.bootstrap),this._r3Injector=X1(t,n,[{provide:Qo,useValue:this},{provide:Zs,useValue:this.componentFactoryResolver}],Ee(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Kd extends rm{constructor(t){super(),this.moduleType=t}create(t){return new im(this.moduleType,t)}}class ov extends Qo{constructor(t,n,r){super(),this.componentFactoryResolver=new mg(this),this.instance=null;const i=new R1([...t,{provide:Qo,useValue:this},{provide:Zs,useValue:this.componentFactoryResolver}],n||Tl(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Kl(e,t,n=null){return new ov(e,t,n).injector}let sv=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=b1(0,n.type),i=r.length>0?Kl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=he({token:e,providedIn:"environment",factory:()=>new e(fe(Qr))}),e})();function om(e){e.getStandaloneInjector=t=>t.get(sv).getOrCreateStandaloneInjector(e)}function ef(e){return t=>{setTimeout(e,void 0,t)}}const En=class Rv extends ft{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,a=n||(()=>null),u=r;if(t&&"object"==typeof t){const m=t;i=m.next?.bind(m),a=m.error?.bind(m),u=m.complete?.bind(m)}this.__isAsync&&(a=ef(a),i&&(i=ef(i)),u&&(u=ef(u)));const g=super.subscribe({next:i,error:a,complete:u});return t instanceof An&&t.add(g),g}};let pr=(()=>{class e{}return e.__NG_ELEMENT_ID__=kv,e})();function kv(){return function xm(e,t){let n;const r=t[e.index];if(ur(r))n=r;else{let i;if(8&e.type)i=on(r);else{const a=t[N];i=a.createComment("");const u=Un(e,t);Yi(a,El(a,u),i,function N2(e,t){return e.nextSibling(t)}(a,u),!1)}t[e.index]=n=function dg(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null]}(r,t,i,e),Pl(t,n)}return new ym(n,e,t)}(sn(),z())}const Bv=pr,ym=class extends Bv{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Lo(this._hostTNode,this._hostLView)}get injector(){return new Io(this._hostTNode,this._hostLView)}get parentInjector(){const t=vu(this._hostTNode,this._hostLView);if(p0(t)){const n=fl(t,this._hostLView),r=dl(t);return new Io(n[h].data[r+8],n)}return new Io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=wm(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-yn}createEmbeddedView(t,n,r){let i,a;"number"==typeof r?i=r:null!=r&&(i=r.index,a=r.injector);const u=t.createEmbeddedView(n||{},a);return this.insert(u,i),u}createComponent(t,n,r,i,a){const u=t&&!function ks(e){return"function"==typeof e}(t);let g;if(u)g=n;else{const D=n||{};g=D.index,r=D.injector,i=D.projectableNodes,a=D.environmentInjector||D.ngModuleRef}const m=u?t:new Ks(re(t)),y=r||this.parentInjector;if(!a&&null==m.ngModule){const v=(u?y:this.parentInjector).get(Qr,null);v&&(a=v)}const C=m.create(y,i,void 0,a);return this.insert(C.hostView,g),C}insert(t,n){const r=t._lView,i=r[h];if(function iC(e){return ur(e[w])}(r)){const C=this.indexOf(t);if(-1!==C)this.detach(C);else{const D=r[w],v=new ym(D,D[I],D[w]);v.detach(v.indexOf(t))}}const a=this._adjustIndex(n),u=this._lContainer;!function S2(e,t,n,r){const i=yn+r,a=n.length;r>0&&(n[i-1][E]=t),r<a-yn?(t[E]=n[i],b0(n,yn+r,t)):(n.push(t),t[E]=null),t[w]=n;const u=t[kt];null!==u&&n!==u&&function _2(e,t){const n=e[Co];t[se]!==t[w][w][se]&&(e[rl]=!0),null===n?e[Co]=[t]:n.push(t)}(u,t);const g=t[ht];null!==g&&g.insertView(e),t[p]|=64}(i,r,u,a);const g=Xu(a,u),m=r[N],y=El(m,u[xo]);return null!==y&&function A2(e,t,n,r,i,a){r[f]=i,r[I]=t,Ws(e,r,n,1,i,a)}(i,u[I],m,r,y,g),t.attachToViewContainerRef(),b0(nf(u),a,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=wm(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Wu(this._lContainer,n);r&&(yl(nf(this._lContainer),n),K0(r[h],r))}detach(t){const n=this._adjustIndex(t,-1),r=Wu(this._lContainer,n);return r&&null!=yl(nf(this._lContainer),n)?new Qs(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function wm(e){return e[il]}function nf(e){return e[il]||(e[il]=[])}function tc(...e){}const nc=new ye("Application Initializer");let rc=(()=>{class e{constructor(n){this.appInits=n,this.resolve=tc,this.reject=tc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const a=this.appInits[i]();if(Gl(a))n.push(a);else if(Pg(a)){const u=new Promise((g,m)=>{a.subscribe({complete:g,error:m})});n.push(u)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(fe(nc,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ca=new ye("AppId",{providedIn:"root",factory:function Wm(){return`${pf()}${pf()}${pf()}`}});function pf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $m=new ye("Platform Initializer"),Ym=new ye("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let fS=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const ni=new ye("LocaleId",{providedIn:"root",factory:()=>Be(ni,ue.Optional|ue.SkipSelf)||function hS(){return typeof $localize<"u"&&$localize.locale||qo}()});class pS{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let Xm=(()=>{class e{compileModuleSync(n){return new Kd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),a=Kr(s(n).declarations).reduce((u,g)=>{const m=re(g);return m&&u.push(new Ks(m)),u},[]);return new pS(r,a)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const wS=(()=>Promise.resolve(0))();function mf(e){typeof Zone>"u"?wS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Nt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new En(!1),this.onMicrotaskEmpty=new En(!1),this.onStable=new En(!1),this.onError=new En(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function xS(){let e=_e.requestAnimationFrame,t=_e.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function DS(e){const t=()=>{!function ES(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(_e,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,wf(e),e.isCheckStableRunning=!0,yf(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),wf(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,a,u,g)=>{try{return Qm(e),n.invokeTask(i,a,u,g)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&t(),Km(e)}},onInvoke:(n,r,i,a,u,g,m)=>{try{return Qm(e),n.invoke(i,a,u,g,m)}finally{e.shouldCoalesceRunChangeDetection&&t(),Km(e)}},onHasTask:(n,r,i,a)=>{n.hasTask(i,a),r===i&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,wf(e),yf(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(n,r,i,a)=>(n.handleError(i,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nt.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(Nt.isInAngularZone())throw new $(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const a=this._inner,u=a.scheduleEventTask("NgZoneEvent: "+i,t,CS,tc,tc);try{return a.runTask(u,n,r)}finally{a.cancelTask(u)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const CS={};function yf(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wf(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Qm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Km(e){e._nesting--,yf(e)}class AS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new En,this.onMicrotaskEmpty=new En,this.onStable=new En,this.onError=new En}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Jm=new ye(""),ic=new ye("");let Ef,xf=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ef||(function IS(e){Ef=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nt.assertNotInAngularZone(),mf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mf(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==a),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:a,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(fe(Nt),fe(Cf),fe(ic))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),Cf=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ef?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const ri=!1;let Di=null;const ey=new ye("AllowMultipleToken"),Df=new ye("PlatformDestroyListeners"),ty=new ye("appBootstrapListener");class ny{constructor(t,n){this.name=t,this.token=n}}function iy(e,t,n=[]){const r=`Platform: ${t}`,i=new ye(r);return(a=[])=>{let u=Af();if(!u||u.injector.get(ey,!1)){const g=[...n,...a,{provide:i,useValue:!0}];e?e(g):function _S(e){if(Di&&!Di.get(ey,!1))throw new $(400,!1);Di=e;const t=e.get(sy);(function ry(e){const t=e.get($m,null);t&&t.forEach(n=>n())})(e)}(function oy(e=[],t){return Jr.create({name:t,providers:[{provide:ad,useValue:"platform"},{provide:Df,useValue:new Set([()=>Di=null])},...e]})}(g,r))}return function TS(e){const t=Af();if(!t)throw new $(401,!1);return t}()}}function Af(){return Di?.get(sy)??null}let sy=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function ly(e,t){let n;return n="noop"===e?new AS:("zone.js"===e?void 0:e)||new Nt(t),n}(r?.ngZone,function ay(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),a=[{provide:Nt,useValue:i}];return i.run(()=>{const u=Jr.create({providers:a,parent:this.injector,name:n.moduleType.name}),g=n.create(u),m=g.injector.get(Po,null);if(!m)throw new $(402,!1);return i.runOutsideAngular(()=>{const y=i.onError.subscribe({next:C=>{m.handleError(C)}});g.onDestroy(()=>{sc(this._modules,g),y.unsubscribe()})}),function cy(e,t,n){try{const r=n();return Gl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(m,i,()=>{const y=g.injector.get(rc);return y.runInitializers(),y.donePromise.then(()=>(function Rp(e){cn(e,"Expected localeId to be defined"),"string"==typeof e&&(Np=e.toLowerCase().replace(/_/g,"-"))}(g.injector.get(ni,qo)||qo),this._moduleDoBootstrap(g),g))})})}bootstrapModule(n,r=[]){const i=uy({},r);return function vS(e,t,n){const r=new Kd(n);return Promise.resolve(r)}(0,0,n).then(a=>this.bootstrapModuleFactory(a,i))}_moduleDoBootstrap(n){const r=n.injector.get(oc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new $(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Df,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(fe(Jr))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function uy(e,t){return Array.isArray(t)?t.reduce(uy,e):{...e,...t}}let oc=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new lt(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),u=new lt(g=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{Nt.assertNotInAngularZone(),mf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const y=this._zone.onUnstable.subscribe(()=>{Nt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{m.unsubscribe(),y.unsubscribe()}});this.isStable=function Es(...e){const t=fi(e),n=function Ar(e,t){return"number"==typeof Cs(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Gt(r[0]):sr(n)(Ct(r,t)):Fn}(a,u.pipe(function Ds(e={}){const{connector:t=(()=>new ft),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return a=>{let u,g,m,y=0,C=!1,D=!1;const v=()=>{g?.unsubscribe(),g=void 0},T=()=>{v(),u=m=void 0,C=D=!1},R=()=>{const P=u;T(),P?.unsubscribe()};return wt((P,k)=>{y++,!D&&!C&&v();const H=m=m??t();k.add(()=>{y--,0===y&&!D&&!C&&(g=mt(R,i))}),H.subscribe(k),!u&&y>0&&(u=new ir({next:Q=>H.next(Q),error:Q=>{D=!0,v(),g=mt(T,n,Q),H.error(Q)},complete:()=>{C=!0,v(),g=mt(T,r),H.complete()}}),Gt(P).subscribe(u))})(a)}}()))}bootstrap(n,r){const i=n instanceof L1;if(!this._injector.get(rc).done){!i&&function o(e){const t=re(e)||Mt(e)||x(e);return null!==t&&t.standalone}(n);throw new $(405,ri)}let u;u=i?n:this._injector.get(Zs).resolveComponentFactory(n),this.componentTypes.push(u.componentType);const g=function SS(e){return e.isBoundToModule}(u)?void 0:this._injector.get(Qo),y=u.create(Jr.NULL,[],r||u.selector,g),C=y.location.nativeElement,D=y.injector.get(Jm,null);return D?.registerApplication(C),y.onDestroy(()=>{this.detachView(y.hostView),sc(this.components,y),D?.unregisterApplication(C)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new $(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;sc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(ty,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>sc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(fe(Nt),fe(Qr),fe(Po))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function sc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let If=(()=>{class e{}return e.__NG_ELEMENT_ID__=NS,e})();function NS(e){return function RS(e,t,n){if(Rs(e)&&!n){const r=jn(e.index,t);return new Qs(r,r)}return 47&e.type?new Qs(t[se],t):null}(sn(),z(),16==(16&e))}const WS=iy(null,"core",[]);let $S=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(fe(oc))},e.\u0275mod=br({type:e}),e.\u0275inj=lr({}),e})(),Mf=null;function Ji(){return Mf}class ZS{}const Nn=new ye("DocumentToken");let Nf=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return function qS(){return fe(Ey)}()},providedIn:"platform"}),e})();const QS=new ye("Location Initialized");let Ey=(()=>{class e extends Nf{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ji().getBaseHref(this._doc)}onPopState(n){const r=Ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){Dy()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){Dy()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(fe(Nn))},e.\u0275prov=he({token:e,factory:function(){return function KS(){return new Ey(fe(Nn))}()},providedIn:"platform"}),e})();function Dy(){return!!window.history.pushState}function Rf(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Ay(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function ii(e){return e&&"?"!==e[0]?"?"+e:e}let eo=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return Be(vy)},providedIn:"root"}),e})();const Iy=new ye("appBaseHref");let vy=(()=>{class e extends eo{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Be(Nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Rf(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+ii(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,a){const u=this.prepareExternalUrl(i+ii(a));this._platformLocation.pushState(n,r,u)}replaceState(n,r,i,a){const u=this.prepareExternalUrl(i+ii(a));this._platformLocation.replaceState(n,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(fe(Nf),fe(Iy,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),JS=(()=>{class e extends eo{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Rf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,a){let u=this.prepareExternalUrl(i+ii(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(n,r,u)}replaceState(n,r,i,a){let u=this.prepareExternalUrl(i+ii(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(fe(Nf),fe(Iy,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),Of=(()=>{class e{constructor(n){this._subject=new En,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function n_(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(Ay(Sy(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ii(r))}normalize(n){return e.stripTrailingSlash(function t_(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,Sy(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ii(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ii(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=ii,e.joinWithSlash=Rf,e.stripTrailingSlash=Ay,e.\u0275fac=function(n){return new(n||e)(fe(eo))},e.\u0275prov=he({token:e,factory:function(){return function e_(){return new Of(fe(eo))}()},providedIn:"root"}),e})();function Sy(e){return e.replace(/\/index.html$/,"")}let yb=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=br({type:e}),e.\u0275inj=lr({}),e})();let Eb=(()=>{class e{}return e.\u0275prov=he({token:e,providedIn:"root",factory:()=>new Db(fe(Nn),window)}),e})();class Db{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function Ab(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(t)||a.querySelector(`[name="${t}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=zy(this.window.history)||zy(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function zy(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Qb extends ZS{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class qf extends Qb{static makeCurrent(){!function XS(e){Mf||(Mf=e)}(new qf)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function Kb(){return ga=ga||document.querySelector("base"),ga?ga.getAttribute("href"):null}();return null==n?null:function Jb(e){Ec=Ec||document.createElement("a"),Ec.setAttribute("href",e);const t=Ec.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ga=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function U_(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,a]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(a)}return null}(document.cookie,t)}}let Ec,ga=null;const Xy=new ye("TRANSITION_ID"),tT=[{provide:nc,useFactory:function eT(e,t,n){return()=>{n.get(rc).donePromise.then(()=>{const r=Ji(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Xy,Nn,Jr],multi:!0}];let rT=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const Dc=new ye("EventManagerPlugins");let Ac=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(n))return this._eventNameToPlugin.set(n,u),u}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(fe(Dc),fe(Nt))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();class Zy{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=Ji().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let qy=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const i=this.usageCount;let a=i.get(n)??0;return a+=r,a>0?i.set(n,a):i.delete(n),a}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),pa=(()=>{class e extends qy{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(a=>a.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const i=this.doc.createElement("style");i.textContent=r,n.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(fe(Nn))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const Qf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kf=/%COMP%/g,Jy=new ye("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ew(e,t){return t.flat(100).map(n=>n.replace(Kf,e))}function tw(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Jf=(()=>{class e{constructor(n,r,i,a){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new eh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof iw?i.applyToHost(n):i instanceof th&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const u=this.eventManager,g=this.sharedStylesHost,m=this.removeStylesOnCompDestory;switch(r.encapsulation){case Zn.Emulated:a=new iw(u,g,r,this.appId,m);break;case Zn.ShadowDom:return new uT(u,g,n,r);default:a=new th(u,g,r,m)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(fe(Ac),fe(pa),fe(ca),fe(Jy))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();class eh{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Qf[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(rw(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(rw(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const a=Qf[i];a?t.setAttributeNS(a,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Qf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Tn.DashCase|Tn.Important)?t.style.setProperty(n,r,i&Tn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Tn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,tw(r)):this.eventManager.addEventListener(t,n,tw(r))}}function rw(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class uT extends eh{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ew(i.id,i.styles);for(const u of a){const g=document.createElement("style");g.textContent=u,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class th extends eh{constructor(t,n,r,i,a=r.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=ew(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class iw extends th{constructor(t,n,r,i,a){const u=i+"-"+r.id;super(t,n,r,a,u),this.contentAttr=function aT(e){return"_ngcontent-%COMP%".replace(Kf,e)}(u),this.hostAttr=function lT(e){return"_nghost-%COMP%".replace(Kf,e)}(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let dT=(()=>{class e extends Zy{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(fe(Nn))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const ow=["alt","control","meta","shift"],fT={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hT={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let gT=(()=>{class e extends Zy{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const a=e.parseEventName(r),u=e.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ji().onAndCancel(n,a.domEventName,u))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=e._normalizeKey(r.pop());let u="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),u="code."),ow.forEach(y=>{const C=r.indexOf(y);C>-1&&(r.splice(C,1),u+=y+".")}),u+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=u,m}static matchEventFullKeyCode(n,r){let i=fT[n.key]||n.key,a="";return r.indexOf("code.")>-1&&(i=n.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ow.forEach(u=>{u!==i&&(0,hT[u])(n)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(n,r,i){return a=>{e.matchEventFullKeyCode(a,n)&&i.runGuarded(()=>r(a))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(fe(Nn))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();const aw=[{provide:Ym,useValue:"browser"},{provide:$m,useValue:function pT(){qf.makeCurrent()},multi:!0},{provide:Nn,useFactory:function yT(){return function U2(e){Ku=e}(document),document},deps:[]}],wT=iy(WS,"browser",aw),lw=new ye(""),cw=[{provide:ic,useClass:class nT{addToWindow(t){_e.getAngularTestability=(r,i=!0)=>{const a=t.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},_e.getAllAngularTestabilities=()=>t.getAllTestabilities(),_e.getAllAngularRootElements=()=>t.getAllRootElements(),_e.frameworkStabilizers||(_e.frameworkStabilizers=[]),_e.frameworkStabilizers.push(r=>{const i=_e.getAllAngularTestabilities();let a=i.length,u=!1;const g=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(function(m){m.whenStable(g)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Ji().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Jm,useClass:xf,deps:[Nt,Cf,ic]},{provide:xf,useClass:xf,deps:[Nt,Cf,ic]}],uw=[{provide:ad,useValue:"root"},{provide:Po,useFactory:function mT(){return new Po},deps:[]},{provide:Dc,useClass:dT,multi:!0,deps:[Nn,Nt,Ym]},{provide:Dc,useClass:gT,multi:!0,deps:[Nn]},{provide:Jf,useClass:Jf,deps:[Ac,pa,ca,Jy]},{provide:F1,useExisting:Jf},{provide:qy,useExisting:pa},{provide:pa,useClass:pa,deps:[Nn]},{provide:Ac,useClass:Ac,deps:[Dc,Nt]},{provide:class Ib{},useClass:rT,deps:[]},[]];let xT=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:ca,useValue:n.appId},{provide:Xy,useExisting:ca},tT]}}}return e.\u0275fac=function(n){return new(n||e)(fe(lw,12))},e.\u0275mod=br({type:e}),e.\u0275inj=lr({providers:[...uw,...cw],imports:[yb,$S]}),e})(),dw=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(fe(Nn))},e.\u0275prov=he({token:e,factory:function(n){let r=null;return r=n?new n:function ET(){return new dw(fe(Nn))}(),r},providedIn:"root"}),e})();function pe(...e){return Ct(e,fi(e))}typeof window<"u"&&window;class xr extends ft{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const Ic=us(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:_T}=Array,{getPrototypeOf:bT,prototype:TT,keys:MT}=Object;const{isArray:OT}=Array;function gw(...e){const t=fi(e),n=function Dr(e){return Je(Cs(e))?e.pop():void 0}(e),{args:r,keys:i}=function NT(e){if(1===e.length){const t=e[0];if(_T(t))return{args:t,keys:null};if(function RT(e){return e&&"object"==typeof e&&bT(e)===TT}(t)){const n=MT(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Ct([],t);const a=new lt(function kT(e,t,n=ut){return r=>{pw(t,()=>{const{length:i}=e,a=new Array(i);let u=i,g=i;for(let m=0;m<i;m++)pw(t,()=>{const y=Ct(e[m],t);let C=!1;y.subscribe(Fe(r,D=>{a[m]=D,C||(C=!0,g--),g||r.next(n(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,t,i?u=>function FT(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,u):ut));return n?a.pipe(function PT(e){return Me(t=>function LT(e,t){return OT(t)?e(...t):e(t)}(e,t))}(n)):a}function pw(e,t,n){e?bt(n,e,t):t()}function ih(...e){return function BT(){return sr(1)}()(Ct(e,fi(e)))}function mw(e){return new lt(t=>{Gt(e()).subscribe(t)})}function ma(e,t){const n=Je(e)?e:()=>e,r=i=>i.error(n());return new lt(t?i=>t.schedule(r,0,i):r)}function oh(){return wt((e,t)=>{let n=null;e._refCount++;const r=Fe(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,a=n;n=null,i&&(!a||i===a)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class yw extends lt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,le(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new An;const n=this.getSubject();t.add(this.source.subscribe(Fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=An.EMPTY)}return t}refCount(){return oh()(this)}}function Fr(e,t){return wt((n,r)=>{let i=null,a=0,u=!1;const g=()=>u&&!i&&r.complete();n.subscribe(Fe(r,m=>{i?.unsubscribe();let y=0;const C=a++;Gt(e(m,C)).subscribe(i=Fe(r,D=>r.next(t?t(m,D,C,y++):D),()=>{i=null,g()}))},()=>{u=!0,g()}))})}function ya(e){return e<=0?()=>Fn:wt((t,n)=>{let r=0;t.subscribe(Fe(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Ii(e,t){return wt((n,r)=>{let i=0;n.subscribe(Fe(r,a=>e.call(t,a,i++)&&r.next(a)))})}function vc(e){return wt((t,n)=>{let r=!1;t.subscribe(Fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function ww(e=jT){return wt((t,n)=>{let r=!1;t.subscribe(Fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function jT(){return new Ic}function vi(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ii((i,a)=>e(i,a,r)):ut,ya(1),n?vc(t):ww(()=>new Ic))}function to(e,t){return Je(t)?Wt(e,t,1):Wt(e,1)}function hn(e,t,n){const r=Je(e)||t||n?{next:e,error:t,complete:n}:e;return r?wt((i,a)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let g=!0;i.subscribe(Fe(a,m=>{var y;null===(y=r.next)||void 0===y||y.call(r,m),a.next(m)},()=>{var m;g=!1,null===(m=r.complete)||void 0===m||m.call(r),a.complete()},m=>{var y;g=!1,null===(y=r.error)||void 0===y||y.call(r,m),a.error(m)},()=>{var m,y;g&&(null===(m=r.unsubscribe)||void 0===m||m.call(r)),null===(y=r.finalize)||void 0===y||y.call(r)}))}):ut}function Si(e){return wt((t,n)=>{let a,r=null,i=!1;r=t.subscribe(Fe(n,void 0,void 0,u=>{a=Gt(e(u,Si(e)(t))),r?(r.unsubscribe(),r=null,a.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(n))})}function xw(e,t){return wt(function VT(e,t,n,r,i){return(a,u)=>{let g=n,m=t,y=0;a.subscribe(Fe(u,C=>{const D=y++;m=g?e(m,C,D):(g=!0,C),r&&u.next(m)},i&&(()=>{g&&u.next(m),u.complete()})))}}(e,t,arguments.length>=2,!0))}function sh(e){return e<=0?()=>Fn:wt((t,n)=>{let r=[];t.subscribe(Fe(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Cw(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Ii((i,a)=>e(i,a,r)):ut,sh(1),n?vc(t):ww(()=>new Ic))}function ah(e){return wt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const be="primary",wa=Symbol("RouteTitle");class GT{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function es(e){return new GT(e)}function WT(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],g=e[a];if(u.startsWith(":"))i[u.substring(1)]=g;else if(u!==g.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function kr(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let a=0;a<n.length;a++)if(i=n[a],!Ew(e[i],t[i]))return!1;return!0}function Ew(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,a)=>r[a]===i)}return e===t}function Dw(e){return Array.prototype.concat.apply([],e)}function Aw(e){return e.length>0?e[e.length-1]:null}function an(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function _i(e){return Pg(e)?e:Gl(e)?Ct(Promise.resolve(e)):pe(e)}const Sc=!1,YT={exact:function Sw(e,t,n){if(!no(e.segments,t.segments)||!_c(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!Sw(e.children[r],t.children[r],n))return!1;return!0},subset:_w},Iw={exact:function XT(e,t){return kr(e,t)},subset:function ZT(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Ew(e[n],t[n]))},ignored:()=>!0};function vw(e,t,n){return YT[n.paths](e.root,t.root,n.matrixParams)&&Iw[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function _w(e,t,n){return bw(e,t,t.segments,n)}function bw(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!no(i,n)||t.hasChildren()||!_c(i,n,r))}if(e.segments.length===n.length){if(!no(e.segments,n)||!_c(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!_w(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),a=n.slice(e.segments.length);return!!(no(e.segments,i)&&_c(e.segments,i,r)&&e.children[be])&&bw(e.children[be],t,a,r)}}function _c(e,t,n){return t.every((r,i)=>Iw[n](e[i].parameters,r.parameters))}class bi{constructor(t=new Pe([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=es(this.queryParams)),this._queryParamMap}toString(){return KT.serialize(this)}}class Pe{constructor(t,n){this.segments=t,this.children=n,this.parent=null,an(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bc(this)}}class xa{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=es(this.parameters)),this._parameterMap}toString(){return Nw(this)}}function no(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let Ca=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return new lh},providedIn:"root"}),e})();class lh{parse(t){const n=new aM(t);return new bi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ea(t.root,!0)}`,r=function tM(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Tc(n)}=${Tc(i)}`).join("&"):`${Tc(n)}=${Tc(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function JT(e){return encodeURI(e)}(t.fragment)}`:""}`}}const KT=new lh;function bc(e){return e.segments.map(t=>Nw(t)).join("/")}function Ea(e,t){if(!e.hasChildren())return bc(e);if(t){const n=e.children[be]?Ea(e.children[be],!1):"",r=[];return an(e.children,(i,a)=>{a!==be&&r.push(`${a}:${Ea(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function QT(e,t){let n=[];return an(e.children,(r,i)=>{i===be&&(n=n.concat(t(r,i)))}),an(e.children,(r,i)=>{i!==be&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===be?[Ea(e.children[be],!1)]:[`${i}:${Ea(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[be]?`${bc(e)}/${n[0]}`:`${bc(e)}/(${n.join("//")})`}}function Tw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tc(e){return Tw(e).replace(/%3B/gi,";")}function ch(e){return Tw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mc(e){return decodeURIComponent(e)}function Mw(e){return Mc(e.replace(/\+/g,"%20"))}function Nw(e){return`${ch(e.path)}${function eM(e){return Object.keys(e).map(t=>`;${ch(t)}=${ch(e[t])}`).join("")}(e.parameters)}`}const nM=/^[^\/()?;=#]+/;function Nc(e){const t=e.match(nM);return t?t[0]:""}const rM=/^[^=?&#]+/,oM=/^[^&#]+/;class aM{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[be]=new Pe(t,n)),r}parseSegment(){const t=Nc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new $(4009,Sc);return this.capture(t),new xa(Mc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Nc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Nc(this.remaining);i&&(r=i,this.capture(r))}t[Mc(n)]=Mc(r)}parseQueryParam(t){const n=function iM(e){const t=e.match(rM);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const u=function sM(e){const t=e.match(oM);return t?t[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Mw(n),a=Mw(r);if(t.hasOwnProperty(i)){let u=t[i];Array.isArray(u)||(u=[u],t[i]=u),u.push(a)}else t[i]=a}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Nc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new $(4010,Sc);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=be);const u=this.parseChildren();n[a]=1===Object.keys(u).length?u[be]:new Pe([],u),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new $(4011,Sc)}}function uh(e){return e.segments.length>0?new Pe([],{[be]:e}):e}function Rc(e){const t={};for(const r of Object.keys(e.children)){const a=Rc(e.children[r]);(a.segments.length>0||a.hasChildren())&&(t[r]=a)}return function lM(e){if(1===e.numberOfChildren&&e.children[be]){const t=e.children[be];return new Pe(e.segments.concat(t.segments),t.children)}return e}(new Pe(e.segments,t))}function ro(e){return e instanceof bi}const dh=!1;function cM(e,t,n,r,i){if(0===n.length)return ts(t.root,t.root,t.root,r,i);const a=function Fw(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Pw(!0,0,e);let t=0,n=!1;const r=e.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const g={};return an(a.outlets,(m,y)=>{g[y]="string"==typeof m?m.split("/"):m}),[...i,{outlets:g}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((g,m)=>{0==m&&"."===g||(0==m&&""===g?n=!0:".."===g?t++:""!=g&&i.push(g))}),i):[...i,a]},[]);return new Pw(n,t,r)}(n);return a.toRoot()?ts(t.root,t.root,new Pe([],{}),r,i):function u(m){const y=function dM(e,t,n,r){if(e.isAbsolute)return new ns(t.root,!0,0);if(-1===r)return new ns(n,n===t.root,0);return function kw(e,t,n){let r=e,i=t,a=n;for(;a>i;){if(a-=i,r=r.parent,!r)throw new $(4005,dh&&"Invalid number of '../'");i=r.segments.length}return new ns(r,!1,i-a)}(n,r+(Da(e.commands[0])?0:1),e.numberOfDoubleDots)}(a,t,e.snapshot?._urlSegment,m),C=y.processChildren?rs(y.segmentGroup,y.index,a.commands):fh(y.segmentGroup,y.index,a.commands);return ts(t.root,y.segmentGroup,C,r,i)}(e.snapshot?._lastPathIndex)}function Da(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Aa(e){return"object"==typeof e&&null!=e&&e.outlets}function ts(e,t,n,r,i){let u,a={};r&&an(r,(m,y)=>{a[y]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),u=e===t?n:Lw(e,t,n);const g=uh(Rc(u));return new bi(g,a,i)}function Lw(e,t,n){const r={};return an(e.children,(i,a)=>{r[a]=i===t?n:Lw(i,t,n)}),new Pe(e.segments,r)}class Pw{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Da(r[0]))throw new $(4003,dh&&"Root segment cannot have matrix parameters");const i=r.find(Aa);if(i&&i!==Aw(r))throw new $(4004,dh&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ns{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function fh(e,t,n){if(e||(e=new Pe([],{})),0===e.segments.length&&e.hasChildren())return rs(e,t,n);const r=function hM(e,t,n){let r=0,i=t;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return a;const u=e.segments[i],g=n[r];if(Aa(g))break;const m=`${g}`,y=r<n.length-1?n[r+1]:null;if(i>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!Uw(m,y,u))return a;r+=2}else{if(!Uw(m,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const a=new Pe(e.segments.slice(0,r.pathIndex),{});return a.children[be]=new Pe(e.segments.slice(r.pathIndex),e.children),rs(a,0,i)}return r.match&&0===i.length?new Pe(e.segments,{}):r.match&&!e.hasChildren()?hh(e,t,n):r.match?rs(e,0,i):hh(e,t,n)}function rs(e,t,n){if(0===n.length)return new Pe(e.segments,{});{const r=function fM(e){return Aa(e[0])?e[0].outlets:{[be]:e}}(n),i={};return!r[be]&&e.children[be]&&1===e.numberOfChildren&&0===e.children[be].segments.length?rs(e.children[be],t,n):(an(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=fh(e.children[u],t,a))}),an(e.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Pe(e.segments,i))}}function hh(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const a=n[i];if(Aa(a)){const m=gM(a.outlets);return new Pe(r,m)}if(0===i&&Da(n[0])){r.push(new xa(e.segments[t].path,Bw(n[0]))),i++;continue}const u=Aa(a)?a.outlets[be]:`${a}`,g=i<n.length-1?n[i+1]:null;u&&g&&Da(g)?(r.push(new xa(u,Bw(g))),i+=2):(r.push(new xa(u,{})),i++)}return new Pe(r,{})}function gM(e){const t={};return an(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=hh(new Pe([],{}),0,n))}),t}function Bw(e){const t={};return an(e,(n,r)=>t[r]=`${n}`),t}function Uw(e,t,n){return e==n.path&&kr(t,n.parameters)}const Ia="imperative";class Br{constructor(t,n){this.id=t,this.url=n}}class gh extends Br{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class io extends Br{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oc extends Br{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Lc extends Br{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class ph extends Br{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pM extends Br{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mM extends Br{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yM extends Br{constructor(t,n,r,i,a){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wM extends Br{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xM extends Br{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CM{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EM{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class DM{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AM{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IM{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vM{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jw{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let bM=(()=>{class e{createUrlTree(n,r,i,a,u,g){return cM(n||r.root,i,a,u,g)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})(),MM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(t){return bM.\u0275fac(t)},providedIn:"root"}),e})();class Vw{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=mh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=mh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=yh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return yh(t,this._root).map(n=>n.value)}}function mh(e,t){if(e===t.value)return t;for(const n of t.children){const r=mh(e,n);if(r)return r}return null}function yh(e,t){if(e===t.value)return[t];for(const n of t.children){const r=yh(e,n);if(r.length)return r.unshift(t),r}return[]}class si{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function is(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class Hw extends Vw{constructor(t,n){super(t),this.snapshot=n,wh(this,t)}toString(){return this.snapshot.toString()}}function zw(e,t){const n=function NM(e,t){const u=new Pc([],{},{},"",{},be,t,null,e.root,-1,{});return new Ww("",new si(u,[]))}(e,t),r=new xr([new xa("",{})]),i=new xr({}),a=new xr({}),u=new xr({}),g=new xr(""),m=new os(r,i,u,g,a,be,t,n.root);return m.snapshot=n.root,new Hw(new si(m,[]),n)}class os{constructor(t,n,r,i,a,u,g,m){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=g,this.title=this.data?.pipe(Me(y=>y[wa]))??pe(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Me(t=>es(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Me(t=>es(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gw(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function RM(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Pc{get title(){return this.data?.[wa]}constructor(t,n,r,i,a,u,g,m,y,C,D){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=g,this.routeConfig=m,this._urlSegment=y,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=es(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=es(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ww extends Vw{constructor(t,n){super(n),this.url=t,wh(this,n)}toString(){return $w(this._root)}}function wh(e,t){t.value._routerState=e,t.children.forEach(n=>wh(e,n))}function $w(e){const t=e.children.length>0?` { ${e.children.map($w).join(", ")} } `:"";return`${e.value}${t}`}function xh(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,kr(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),kr(t.params,n.params)||e.params.next(n.params),function $T(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!kr(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),kr(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Ch(e,t){const n=kr(e.params,t.params)&&function qT(e,t){return no(e,t)&&e.every((n,r)=>kr(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||Ch(e.parent,t.parent))}function va(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function LM(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return va(e,r,i);return va(e,r)})}(e,t,n);return new si(r,i)}{if(e.shouldAttach(t.value)){const a=e.retrieve(t.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=t.value,u.children=t.children.map(g=>va(e,g)),u}}const r=function PM(e){return new os(new xr(e.url),new xr(e.params),new xr(e.queryParams),new xr(e.fragment),new xr(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(a=>va(e,a));return new si(r,i)}}const Eh="ngNavigationCancelingError";function Yw(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=ro(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=Xw(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function Xw(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Eh]=!0,r.cancellationCode=t,n&&(r.url=n),r}function Zw(e){return qw(e)&&ro(e.url)}function qw(e){return e&&e[Eh]}class FM{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Sa,this.attachRef=null}}let Sa=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new FM,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Fc=!1;let Qw=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=be,this.activateEvents=new En,this.deactivateEvents=new En,this.attachEvents=new En,this.detachEvents=new En,this.parentContexts=Be(Sa),this.location=Be(pr),this.changeDetector=Be(If),this.environmentInjector=Be(Qr)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,Fc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,Fc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,Fc);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,Fc);this._activatedRoute=n;const i=this.location,u=n.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,m=new kM(n,g,i.injector);if(r&&function BM(e){return!!e.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,m)}else this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=Yt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zi]}),e})();class kM{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===os?this.route:t===Sa?this.childContexts:this.parent.get(t,n)}}let Dh=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],standalone:!0,features:[om],decls:1,vars:0,template:function(n,r){1&n&&zl(0,"router-outlet")},dependencies:[Qw],encapsulation:2}),e})();function Kw(e,t){return e.providers&&!e._injector&&(e._injector=Kl(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Ih(e){const t=e.children&&e.children.map(Ih),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==be&&(n.component=Dh),n}function nr(e){return e.outlet||be}function Jw(e,t){const n=e.filter(r=>nr(r)===t);return n.push(...e.filter(r=>nr(r)!==t)),n}function _a(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class zM{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),xh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=is(n);t.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),an(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(t,n,r){const i=t.value,a=n?n.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(t,n,u.children)}else this.deactivateChildRoutes(t,n,r);else a&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,a=is(t);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:u,route:t,contexts:g})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,a=is(t);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=is(n);t.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new vM(a.value.snapshot))}),t.children.length&&this.forwardEvent(new AM(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,a=n?n.value:null;if(xh(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,u.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(g.contexts),u.attachRef=g.componentRef,u.route=g.route.value,u.outlet&&u.outlet.attach(g.componentRef,g.route.value),xh(g.route.value),this.activateChildRoutes(t,null,u.children)}else{const g=_a(i.snapshot),m=g?.get(Zs)??null;u.attachRef=null,u.route=i,u.resolver=m,u.injector=g,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(t,null,u.children)}}else this.activateChildRoutes(t,null,r)}}class ex{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class kc{constructor(t,n){this.component=t,this.route=n}}function GM(e,t,n){const r=e._root;return ba(r,t?t._root:null,n,[r.value])}function ss(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function su(e){return null!==vr(e)}(e)?t.get(e):e:r}function ba(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=is(t);return e.children.forEach(u=>{(function $M(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,u=t?t.value:null,g=n?n.getContext(e.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function YM(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!no(e.url,t.url);case"pathParamsOrQueryParamsChange":return!no(e.url,t.url)||!kr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ch(e,t)||!kr(e.queryParams,t.queryParams);default:return!Ch(e,t)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new ex(r)):(a.data=u.data,a._resolvedData=u._resolvedData),ba(e,t,a.component?g?g.children:null:n,r,i),m&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new kc(g.outlet.component,u))}else u&&Ta(t,g,i),i.canActivateChecks.push(new ex(r)),ba(e,null,a.component?g?g.children:null:n,r,i)})(u,a[u.value.outlet],n,r.concat([u.value]),i),delete a[u.value.outlet]}),an(a,(u,g)=>Ta(u,n.getContext(g),i)),i}function Ta(e,t,n){const r=is(e),i=e.value;an(r,(a,u)=>{Ta(a,i.component?t?t.children.getContext(u):null:t,n)}),n.canDeactivateChecks.push(new kc(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Ma(e){return"function"==typeof e}function vh(e){return e instanceof Ic||"EmptyError"===e?.name}const Bc=Symbol("INITIAL_VALUE");function as(){return Fr(e=>gw(e.map(t=>t.pipe(ya(1),function UT(...e){const t=fi(e);return wt((n,r)=>{(t?ih(e,n,t):ih(e,n)).subscribe(r)})}(Bc)))).pipe(Me(t=>{for(const n of t)if(!0!==n){if(n===Bc)return Bc;if(!1===n||n instanceof bi)return n}return!0}),Ii(t=>t!==Bc),ya(1)))}function tx(e){return function Te(...e){return ci(e)}(hn(t=>{if(ro(t))throw Yw(0,t)}),Me(t=>!0===t))}const Sh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nx(e,t,n,r,i){const a=_h(e,t,n);return a.matched?function u3(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?pe(i.map(u=>{const g=ss(u,e);return _i(function JM(e){return e&&Ma(e.canMatch)}(g)?g.canMatch(t,n):e.runInContext(()=>g(t,n)))})).pipe(as(),tx()):pe(!0)}(r=Kw(t,r),t,n).pipe(Me(u=>!0===u?a:{...Sh})):pe(a)}function _h(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Sh}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||WT)(n,e,t);if(!i)return{...Sh};const a={};an(i.posParams,(g,m)=>{a[m]=g.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Uc(e,t,n,r){if(n.length>0&&function h3(e,t,n){return n.some(r=>jc(e,t,r)&&nr(r)!==be)}(e,n,r)){const a=new Pe(t,function f3(e,t,n,r){const i={};i[be]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const a of n)if(""===a.path&&nr(a)!==be){const u=new Pe([],{});u._sourceSegment=e,u._segmentIndexShift=t.length,i[nr(a)]=u}return i}(e,t,r,new Pe(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function g3(e,t,n){return n.some(r=>jc(e,t,r))}(e,n,r)){const a=new Pe(e.segments,function d3(e,t,n,r,i){const a={};for(const u of r)if(jc(e,n,u)&&!i[nr(u)]){const g=new Pe([],{});g._sourceSegment=e,g._segmentIndexShift=t.length,a[nr(u)]=g}return{...i,...a}}(e,t,n,r,e.children));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}const i=new Pe(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function jc(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function rx(e,t,n,r){return!!(nr(e)===r||r!==be&&jc(t,n,e))&&("**"===e.path||_h(t,e,n).matched)}function ix(e,t,n){return 0===t.length&&!e.children[n]}const Vc=!1;class Hc{constructor(t){this.segmentGroup=t||null}}class ox{constructor(t){this.urlTree=t}}function Na(e){return ma(new Hc(e))}function sx(e){return ma(new ox(e))}class w3{constructor(t,n,r,i,a){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const t=Uc(this.urlTree.root,[],[],this.config).segmentGroup,n=new Pe(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,be).pipe(Me(a=>this.createUrlTree(Rc(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Si(a=>{if(a instanceof ox)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Hc?this.noMatchError(a):a}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,be).pipe(Me(i=>this.createUrlTree(Rc(i),t.queryParams,t.fragment))).pipe(Si(i=>{throw i instanceof Hc?this.noMatchError(i):i}))}noMatchError(t){return new $(4002,Vc)}createUrlTree(t,n,r){const i=uh(t);return new bi(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(Me(a=>new Pe([],a))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return Ct(i).pipe(to(a=>{const u=r.children[a],g=Jw(n,a);return this.expandSegmentGroup(t,g,u,a).pipe(Me(m=>({segment:m,outlet:a})))}),xw((a,u)=>(a[u.outlet]=u.segment,a),{}),Cw())}expandSegment(t,n,r,i,a,u){return Ct(r).pipe(to(g=>this.expandSegmentAgainstRoute(t,n,r,g,i,a,u).pipe(Si(y=>{if(y instanceof Hc)return pe(null);throw y}))),vi(g=>!!g),Si((g,m)=>{if(vh(g))return ix(n,i,a)?pe(new Pe([],{})):Na(n);throw g}))}expandSegmentAgainstRoute(t,n,r,i,a,u,g){return rx(i,n,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,a,u):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u):Na(n):Na(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sx(a):this.lineralizeSegments(r,a).pipe(Wt(u=>{const g=new Pe(u,{});return this.expandSegment(t,g,n,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,a,u){const{matched:g,consumedSegments:m,remainingSegments:y,positionalParamSegments:C}=_h(n,i,a);if(!g)return Na(n);const D=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?sx(D):this.lineralizeSegments(i,D).pipe(Wt(v=>this.expandSegment(t,n,r,v.concat(y),u,!1)))}matchSegmentAgainstRoute(t,n,r,i,a){return"**"===r.path?(t=Kw(r,t),r.loadChildren?(r._loadedRoutes?pe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(Me(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Pe(i,{})))):pe(new Pe(i,{}))):nx(n,r,i,t).pipe(Fr(({matched:u,consumedSegments:g,remainingSegments:m})=>u?this.getChildConfig(t=r._injector??t,r,i).pipe(Wt(C=>{const D=C.injector??t,v=C.routes,{segmentGroup:T,slicedSegments:R}=Uc(n,g,m,v),P=new Pe(T.segments,T.children);if(0===R.length&&P.hasChildren())return this.expandChildren(D,v,P).pipe(Me(j=>new Pe(g,j)));if(0===v.length&&0===R.length)return pe(new Pe(g,{}));const k=nr(r)===a;return this.expandSegment(D,P,v,R,k?be:a,!0).pipe(Me(Q=>new Pe(g.concat(Q.segments),Q.children)))})):Na(n)))}getChildConfig(t,n,r){return n.children?pe({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):function c3(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?pe(!0):pe(i.map(u=>{const g=ss(u,e);return _i(function ZM(e){return e&&Ma(e.canLoad)}(g)?g.canLoad(t,n):e.runInContext(()=>g(t,n)))})).pipe(as(),tx())}(t,n,r).pipe(Wt(i=>i?this.configLoader.loadChildren(t,n).pipe(hn(a=>{n._loadedRoutes=a.routes,n._loadedInjector=a.injector})):function m3(e){return ma(Xw(Vc,3))}())):pe({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return pe(r);if(i.numberOfChildren>1||!i.children[be])return t.redirectTo,ma(new $(4e3,Vc));i=i.children[be]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const a=this.createSegmentGroup(t,n.root,r,i);return new bi(a,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return an(t,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[a]=n[g]}else r[a]=i}),r}createSegmentGroup(t,n,r,i){const a=this.createSegments(t,n.segments,r,i);let u={};return an(n.children,(g,m)=>{u[m]=this.createSegmentGroup(t,g,r,i)}),new Pe(a,u)}createSegments(t,n,r,i){return n.map(a=>a.path.startsWith(":")?this.findPosParam(t,a,i):this.findOrReturn(a,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new $(4001,Vc);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class C3{}class A3{constructor(t,n,r,i,a,u,g){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.urlSerializer=g}recognize(){const t=Uc(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,be).pipe(Me(n=>{if(null===n)return null;const r=new Pc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},be,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new si(r,n),a=new Ww(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(t){const n=t.value,r=Gw(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return Ct(Object.keys(r.children)).pipe(to(i=>{const a=r.children[i],u=Jw(n,i);return this.processSegmentGroup(t,u,a,i)}),xw((i,a)=>i&&a?(i.push(...a),i):null),function HT(e,t=!1){return wt((n,r)=>{let i=0;n.subscribe(Fe(r,a=>{const u=e(a,i++);(u||t)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),vc(null),Cw(),Me(i=>{if(null===i)return null;const a=lx(i);return function I3(e){e.sort((t,n)=>t.value.outlet===be?-1:n.value.outlet===be?1:t.value.outlet.localeCompare(n.value.outlet))}(a),a}))}processSegment(t,n,r,i,a){return Ct(n).pipe(to(u=>this.processSegmentAgainstRoute(u._injector??t,u,r,i,a)),vi(u=>!!u),Si(u=>{if(vh(u))return ix(r,i,a)?pe([]):pe(null);throw u}))}processSegmentAgainstRoute(t,n,r,i,a){if(n.redirectTo||!rx(n,r,i,a))return pe(null);let u;if("**"===n.path){const g=i.length>0?Aw(i).parameters:{},m=ux(r)+i.length;u=pe({snapshot:new Pc(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dx(n),nr(n),n.component??n._loadedComponent??null,n,cx(r),m,fx(n)),consumedSegments:[],remainingSegments:[]})}else u=nx(r,n,i,t).pipe(Me(({matched:g,consumedSegments:m,remainingSegments:y,parameters:C})=>{if(!g)return null;const D=ux(r)+m.length;return{snapshot:new Pc(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dx(n),nr(n),n.component??n._loadedComponent??null,n,cx(r),D,fx(n)),consumedSegments:m,remainingSegments:y}}));return u.pipe(Fr(g=>{if(null===g)return pe(null);const{snapshot:m,consumedSegments:y,remainingSegments:C}=g;t=n._injector??t;const D=n._loadedInjector??t,v=function v3(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:T,slicedSegments:R}=Uc(r,y,C,v.filter(k=>void 0===k.redirectTo));if(0===R.length&&T.hasChildren())return this.processChildren(D,v,T).pipe(Me(k=>null===k?null:[new si(m,k)]));if(0===v.length&&0===R.length)return pe([new si(m,[])]);const P=nr(n)===a;return this.processSegment(D,v,T,R,P?be:a).pipe(Me(k=>null===k?null:[new si(m,k)]))}))}}function S3(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function lx(e){const t=[],n=new Set;for(const r of e){if(!S3(r)){t.push(r);continue}const i=t.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=lx(r.children);t.push(new si(r.value,i))}return t.filter(r=>!n.has(r))}function cx(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function ux(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function dx(e){return e.data||{}}function fx(e){return e.resolve||{}}function hx(e){return"string"==typeof e.title||null===e.title}function bh(e){return Fr(t=>{const n=e(t);return n?Ct(n).pipe(Me(()=>t)):pe(t)})}const ls=new ye("ROUTES");let Th=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Be(Xm)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return pe(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=_i(n.loadComponent()).pipe(Me(px),hn(a=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=a}),ah(()=>{this.componentLoaders.delete(n)})),i=new yw(r,()=>new ft).pipe(oh());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Me(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,y,C=!1;Array.isArray(g)?y=g:(m=g.create(n).injector,y=Dw(m.get(ls,[],ue.Self|ue.Optional)));return{routes:y.map(Ih),injector:m}}),ah(()=>{this.childrenLoaders.delete(r)})),u=new yw(a,()=>new ft).pipe(oh());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(n){return _i(n()).pipe(Me(px),Wt(r=>r instanceof rm||Array.isArray(r)?pe(r):Ct(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function px(e){return function L3(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Gc=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ft,this.configLoader=Be(Th),this.environmentInjector=Be(Qr),this.urlSerializer=Be(Ca),this.rootContexts=Be(Sa),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new EM(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new CM(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new xr({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ia,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ii(r=>0!==r.id),Me(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),Fr(r=>{let i=!1,a=!1;return pe(r).pipe(hn(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fr(u=>{const g=n.browserUrlTree.toString(),m=!n.navigated||u.extractedUrl.toString()!==g||g!==n.currentUrlTree.toString();if(!m&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const C="";return this.events.next(new Lc(u.id,n.serializeUrl(r.rawUrl),C,0)),n.rawUrlTree=u.rawUrl,u.resolve(null),Fn}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return mx(u.source)&&(n.browserUrlTree=u.extractedUrl),pe(u).pipe(Fr(C=>{const D=this.transitions?.getValue();return this.events.next(new gh(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),D!==this.transitions?.getValue()?Fn:Promise.resolve(C)}),function x3(e,t,n,r){return Fr(i=>function y3(e,t,n,r,i){return new w3(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(Me(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),hn(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function b3(e,t,n,r,i){return Wt(a=>function D3(e,t,n,r,i,a,u="emptyOnly"){return new A3(e,t,n,r,i,u,a).recognize().pipe(Fr(g=>null===g?function E3(e){return new lt(t=>t.error(e))}(new C3):pe(g)))}(e,t,n,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe(Me(u=>({...a,targetSnapshot:u}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),hn(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!C.extras.skipLocationChange){const v=n.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);n.setBrowserUrl(v,C)}n.browserUrlTree=C.urlAfterRedirects}const D=new pM(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(D)}));if(m&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:C,extractedUrl:D,source:v,restoredState:T,extras:R}=u,P=new gh(C,this.urlSerializer.serialize(D),v,T);this.events.next(P);const k=zw(D,this.rootComponentType).snapshot;return pe(r={...u,targetSnapshot:k,urlAfterRedirects:D,extras:{...R,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new Lc(u.id,n.serializeUrl(r.extractedUrl),C,1)),n.rawUrlTree=u.rawUrl,u.resolve(null),Fn}}),hn(u=>{const g=new mM(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(g)}),Me(u=>r={...u,guards:GM(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function t3(e,t){return Wt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=n;return 0===u.length&&0===a.length?pe({...n,guardsResult:!0}):function n3(e,t,n,r){return Ct(e).pipe(Wt(i=>function l3(e,t,n,r,i){const a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return a&&0!==a.length?pe(a.map(g=>{const m=_a(t)??i,y=ss(g,m);return _i(function KM(e){return e&&Ma(e.canDeactivate)}(y)?y.canDeactivate(e,t,n,r):m.runInContext(()=>y(e,t,n,r))).pipe(vi())})).pipe(as()):pe(!0)}(i.component,i.route,n,t,r)),vi(i=>!0!==i,!0))}(u,r,i,e).pipe(Wt(g=>g&&function XM(e){return"boolean"==typeof e}(g)?function r3(e,t,n,r){return Ct(t).pipe(to(i=>ih(function o3(e,t){return null!==e&&t&&t(new DM(e)),pe(!0)}(i.route.parent,r),function i3(e,t){return null!==e&&t&&t(new IM(e)),pe(!0)}(i.route,r),function a3(e,t,n){const r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(u=>function WM(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(u)).filter(u=>null!==u).map(u=>mw(()=>pe(u.guards.map(m=>{const y=_a(u.node)??n,C=ss(m,y);return _i(function QM(e){return e&&Ma(e.canActivateChild)}(C)?C.canActivateChild(r,e):y.runInContext(()=>C(r,e))).pipe(vi())})).pipe(as())));return pe(a).pipe(as())}(e,i.path,n),function s3(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return pe(!0);const i=r.map(a=>mw(()=>{const u=_a(t)??n,g=ss(a,u);return _i(function qM(e){return e&&Ma(e.canActivate)}(g)?g.canActivate(t,e):u.runInContext(()=>g(t,e))).pipe(vi())}));return pe(i).pipe(as())}(e,i.route,n))),vi(i=>!0!==i,!0))}(r,a,e,t):pe(g)),Me(g=>({...n,guardsResult:g})))})}(this.environmentInjector,u=>this.events.next(u)),hn(u=>{if(r.guardsResult=u.guardsResult,ro(u.guardsResult))throw Yw(0,u.guardsResult);const g=new yM(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(g)}),Ii(u=>!!u.guardsResult||(n.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),bh(u=>{if(u.guards.canActivateChecks.length)return pe(u).pipe(hn(g=>{const m=new wM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}),Fr(g=>{let m=!1;return pe(g).pipe(function T3(e,t){return Wt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return pe(n);let a=0;return Ct(i).pipe(to(u=>function M3(e,t,n,r){const i=e.routeConfig,a=e._resolve;return void 0!==i?.title&&!hx(i)&&(a[wa]=i.title),function N3(e,t,n,r){const i=function R3(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return pe({});const a={};return Ct(i).pipe(Wt(u=>function O3(e,t,n,r){const i=_a(t)??r,a=ss(e,i);return _i(a.resolve?a.resolve(t,n):i.runInContext(()=>a(t,n)))}(e[u],t,n,r).pipe(vi(),hn(g=>{a[u]=g}))),sh(1),function zT(e){return Me(()=>e)}(a),Si(u=>vh(u)?Fn:ma(u)))}(a,e,t,r).pipe(Me(u=>(e._resolvedData=u,e.data=Gw(e,n).resolve,i&&hx(i)&&(e.data[wa]=i.title),null)))}(u.route,r,e,t)),hn(()=>a++),sh(1),Wt(u=>a===i.length?pe(n):Fn))})}(n.paramsInheritanceStrategy,this.environmentInjector),hn({next:()=>m=!0,complete:()=>{m||(n.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),hn(g=>{const m=new xM(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}))}),bh(u=>{const g=m=>{const y=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(m.routeConfig).pipe(hn(C=>{m.component=C}),Me(()=>{})));for(const C of m.children)y.push(...g(C));return y};return gw(g(u.targetSnapshot.root)).pipe(vc(),ya(1))}),bh(()=>this.afterPreactivation()),Me(u=>{const g=function OM(e,t,n){const r=va(e,t._root,n?n._root:void 0);return new Hw(r,t)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return r={...u,targetRouterState:g}}),hn(u=>{n.currentUrlTree=u.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),n.routerState=u.targetRouterState,"deferred"===n.urlUpdateStrategy&&(u.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,u),n.browserUrlTree=u.urlAfterRedirects)}),((e,t,n)=>Me(r=>(new zM(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u)),hn({next:u=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new io(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{i=!0}}),ah(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Si(u=>{if(a=!0,qw(u)){Zw(u)||(n.navigated=!0,n.restoreHistory(r,!0));const g=new Oc(r.id,this.urlSerializer.serialize(r.extractedUrl),u.message,u.cancellationCode);if(this.events.next(g),Zw(u)){const m=n.urlHandlingStrategy.merge(u.url,n.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||mx(r.source)};n.scheduleNavigation(m,Ia,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const g=new ph(r.id,this.urlSerializer.serialize(r.extractedUrl),u,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(n.errorHandler(u))}catch(m){r.reject(m)}}return Fn}))}))}cancelNavigationTransition(n,r,i){const a=new Oc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(a),n.resolve(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function mx(e){return e!==Ia}let yx=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===be);return r}getResolvedTitleForRoute(n){return n.data[wa]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return Be(P3)},providedIn:"root"}),e})(),P3=(()=>{class e extends yx{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(fe(dw))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),F3=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return Be(B3)},providedIn:"root"}),e})();class k3{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let B3=(()=>{class e extends k3{}return e.\u0275fac=function(){let t;return function(r){return(t||(t=function v0(e){return Xn(()=>{const t=e.prototype.constructor,n=t[_n]||_u(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const a=i[_n]||_u(i);if(a&&a!==n)return a;i=Object.getPrototypeOf(i)}return a=>new a})}(e)))(r||e)}}(),e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Wc=new ye("",{providedIn:"root",factory:()=>({})});let j3=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:function(){return Be(V3)},providedIn:"root"}),e})(),V3=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function H3(e){throw e}function z3(e,t,n){return t.parse("/")}const G3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},W3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zn=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Be(fS),this.isNgZoneEnabled=!1,this.options=Be(Wc,{optional:!0})||{},this.errorHandler=this.options.errorHandler||H3,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||z3,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Be(j3),this.routeReuseStrategy=Be(F3),this.urlCreationStrategy=Be(MM),this.titleStrategy=Be(yx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Dw(Be(ls,{optional:!0})??[]),this.navigationTransitions=Be(Gc),this.urlSerializer=Be(Ca),this.location=Be(Of),this.isNgZoneEnabled=Be(Nt)instanceof Nt&&Nt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new bi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zw(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ia,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const a={replaceUrl:!0},u=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const g=this.parseUrl(n);this.scheduleNavigation(g,r,u,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Ih),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:g,preserveFragment:m}=r,y=m?this.currentUrlTree.fragment:u;let C=null;switch(g){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,C,y??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=ro(n)?n:this.parseUrl(n),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Ia,null,r)}navigate(n,r={skipLocationChange:!1}){return function $3(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new $(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...G3}:!1===r?{...W3}:r,ro(n))return vw(this.currentUrlTree,n,i);const a=this.parseUrl(n);return vw(this.currentUrlTree,a,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const a=n[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(n,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let g,m,y,C;return u?(g=u.resolve,m=u.reject,y=u.promise):y=new Promise((D,v)=>{g=D,m=v}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:a,resolve:g,reject:m,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(D=>Promise.reject(D))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class wx{}let Z3=(()=>{class e{constructor(n,r,i,a,u){this.router=n,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Ii(n=>n instanceof io),to(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=Kl(a.providers,n,`Route: ${a.path}`));const u=a._injector??n,g=a._loadedInjector??u;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(u,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(g,a.children??a._loadedRoutes))}return Ct(i).pipe(sr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):pe(null);const a=i.pipe(Wt(u=>null===u?pe(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??n,u.routes))));return r.loadComponent&&!r._loadedComponent?Ct([a,this.loader.loadComponent(r)]).pipe(sr()):a})}}return e.\u0275fac=function(n){return new(n||e)(fe(zn),fe(Xm),fe(Qr),fe(wx),fe(Th))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Rh=new ye("");let xx=(()=>{class e{constructor(n,r,i,a,u={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof gh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof io&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof jw&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jw(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(n){!function tg(){throw new Error("invalid")}()},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e})();var Gn=(()=>((Gn=Gn||{})[Gn.COMPLETE=0]="COMPLETE",Gn[Gn.FAILED=1]="FAILED",Gn[Gn.REDIRECTING=2]="REDIRECTING",Gn))();const cs=!1;function Ti(e,t){return{\u0275kind:e,\u0275providers:t}}const Oh=new ye("",{providedIn:"root",factory:()=>!1});function Ex(){const e=Be(Jr);return t=>{const n=e.get(oc);if(t!==n.components[0])return;const r=e.get(zn),i=e.get(Dx);1===e.get(Lh)&&r.initialNavigation(),e.get(Ax,null,ue.Optional)?.setUpPreloading(),e.get(Rh,null,ue.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Dx=new ye(cs?"bootstrap done indicator":"",{factory:()=>new ft}),Lh=new ye(cs?"initial navigation":"",{providedIn:"root",factory:()=>1});function eN(){let e=[];return e=cs?[{provide:_l,multi:!0,useFactory:()=>{const t=Be(zn);return()=>t.events.subscribe(n=>{console.group?.(`Router Event: ${n.constructor.name}`),console.log(function SM(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(n)),console.log(n),console.groupEnd?.()})}}]:[],Ti(1,e)}const Ax=new ye(cs?"router preloader":"");function tN(e){return Ti(0,[{provide:Ax,useExisting:Z3},{provide:wx,useExisting:e}])}const Ra=!1,Ix=new ye(Ra?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),nN=[Of,{provide:Ca,useClass:lh},zn,Sa,{provide:os,useFactory:function Cx(e){return e.routerState.root},deps:[zn]},Th,Ra?{provide:Oh,useValue:!0}:[]];function rN(){return new ny("Router",zn)}let vx=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[nN,Ra&&r?.enableTracing?eN().\u0275providers:[],{provide:ls,multi:!0,useValue:n},{provide:Ix,useFactory:aN,deps:[[zn,new Us,new js]]},{provide:Wc,useValue:r||{}},r?.useHash?{provide:eo,useClass:JS}:{provide:eo,useClass:vy},{provide:Rh,useFactory:()=>{const e=Be(Eb),t=Be(Nt),n=Be(Wc),r=Be(Gc),i=Be(Ca);return n.scrollOffset&&e.setOffset(n.scrollOffset),new xx(i,r,e,t,n)}},r?.preloadingStrategy?tN(r.preloadingStrategy).\u0275providers:[],{provide:ny,multi:!0,useFactory:rN},r?.initialNavigation?lN(r):[],[{provide:Sx,useFactory:Ex},{provide:ty,multi:!0,useExisting:Sx}]]}}static forChild(n){return{ngModule:e,providers:[{provide:ls,multi:!0,useValue:n}]}}}return e.\u0275fac=function(n){return new(n||e)(fe(Ix,8))},e.\u0275mod=br({type:e}),e.\u0275inj=lr({imports:[Dh]}),e})();function aN(e){if(Ra&&e)throw new $(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function lN(e){return["disabled"===e.initialNavigation?Ti(3,[{provide:nc,multi:!0,useFactory:()=>{const t=Be(zn);return()=>{t.setUpLocationChangeListener()}}},{provide:Lh,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Ti(2,[{provide:Lh,useValue:0},{provide:nc,multi:!0,deps:[Jr],useFactory:t=>{const n=t.get(QS,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(zn),a=t.get(Dx);(function q3(e,t){e.events.pipe(Ii(n=>n instanceof io||n instanceof Oc||n instanceof ph||n instanceof Lc),Me(n=>n instanceof io||n instanceof Lc?Gn.COMPLETE:n instanceof Oc&&(0===n.code||1===n.code)?Gn.REDIRECTING:Gn.FAILED),Ii(n=>n!==Gn.REDIRECTING),ya(1)).subscribe(()=>{t()})})(i,()=>{r(!0)}),t.get(Gc).afterPreactivation=()=>(r(!0),a.closed?pe(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const Sx=new ye(Ra?"Router Initializer":""),uN=[];let dN=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=br({type:e}),e.\u0275inj=lr({imports:[vx.forRoot(uN),vx]}),e})();var ne=(()=>{return(e=ne||(ne={}))[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",ne;var e})(),_x=new Map([[ne.QR_CODE,"QR_CODE"],[ne.AZTEC,"AZTEC"],[ne.CODABAR,"CODABAR"],[ne.CODE_39,"CODE_39"],[ne.CODE_93,"CODE_93"],[ne.CODE_128,"CODE_128"],[ne.DATA_MATRIX,"DATA_MATRIX"],[ne.MAXICODE,"MAXICODE"],[ne.ITF,"ITF"],[ne.EAN_13,"EAN_13"],[ne.EAN_8,"EAN_8"],[ne.PDF_417,"PDF_417"],[ne.RSS_14,"RSS_14"],[ne.RSS_EXPANDED,"RSS_EXPANDED"],[ne.UPC_A,"UPC_A"],[ne.UPC_E,"UPC_E"],[ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function fN(e){return Object.values(ne).includes(e)}var ai=(()=>{return(e=ai||(ai={}))[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",ai;var e})(),Cr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[ai.SCAN_TYPE_CAMERA,ai.SCAN_TYPE_FILE],e}(),bx=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!_x.has(t))throw t+" not in html5QrcodeSupportedFormatsTextMap";return new e(t,_x.get(t))},e}(),Tx=function(){function e(){}return e.createFromText=function(t){return{decodedText:t,result:{text:t}}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),$c=(()=>{return(e=$c||($c={}))[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",$c;var e})(),Mx=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:$c.UNKWOWN_ERROR}},e}(),Nx=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||!0===n)&&console.error(t)},e.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ur(e){return typeof e>"u"||null===e}var e,Oa=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = "+t},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = "+t},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e}(),st=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: "+t},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Rx=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Ox=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if("object"!=typeof t)return n.logError("videoConstraints should be of type object, the object passed is of type "+typeof t+".",!0),!1;for(var a=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),g=0,m=Object.keys(t);g<m.length;g++){var y=m[g];if(a.has(y))return n.logError(y+" is not supported videoConstaints.",!0),!1}return!0},e}(),yt=G(140),Lx=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,yt.BarcodeFormat.QR_CODE],[ne.AZTEC,yt.BarcodeFormat.AZTEC],[ne.CODABAR,yt.BarcodeFormat.CODABAR],[ne.CODE_39,yt.BarcodeFormat.CODE_39],[ne.CODE_93,yt.BarcodeFormat.CODE_93],[ne.CODE_128,yt.BarcodeFormat.CODE_128],[ne.DATA_MATRIX,yt.BarcodeFormat.DATA_MATRIX],[ne.MAXICODE,yt.BarcodeFormat.MAXICODE],[ne.ITF,yt.BarcodeFormat.ITF],[ne.EAN_13,yt.BarcodeFormat.EAN_13],[ne.EAN_8,yt.BarcodeFormat.EAN_8],[ne.PDF_417,yt.BarcodeFormat.PDF_417],[ne.RSS_14,yt.BarcodeFormat.RSS_14],[ne.RSS_EXPANDED,yt.BarcodeFormat.RSS_EXPANDED],[ne.UPC_A,yt.BarcodeFormat.UPC_A],[ne.UPC_E,yt.BarcodeFormat.UPC_E],[ne.UPC_EAN_EXTENSION,yt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!yt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),a=new Map;a.set(yt.DecodeHintType.POSSIBLE_FORMATS,i),a.set(yt.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(a){i(a)}})},e.prototype.decode=function(t){var n=new yt.MultiFormatReader(this.verbose,this.hints),r=new yt.HTMLCanvasElementLuminanceSource(t),i=new yt.BinaryBitmap(new yt.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:bx.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError(a+" is not supported byZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Px=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,"qr_code"],[ne.AZTEC,"aztec"],[ne.CODABAR,"codabar"],[ne.CODE_39,"code_39"],[ne.CODE_93,"code_93"],[ne.CODE_128,"code_128"],[ne.DATA_MATRIX,"data_matrix"],[ne.ITF,"itf"],[ne.EAN_13,"ean_13"],[ne.EAN_8,"ean_8"],[ne.PDF_417,"pdf417"],[ne.UPC_A,"upc_a"],[ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&typeof new BarcodeDetector({formats:["qr_code"]})<"u"},e.prototype.decodeAsync=function(t){return function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var n,r;return function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&y[0]?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[2&y[0],a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(6===y[0]&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],i=0}finally{r=a=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}}(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(!(n=i.sent())||0===n.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(n)).rawValue,format:bx.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,a=t;i<a.length;i++){var u=a[i],g=u.boundingBox.width*u.boundingBox.height;g>r&&(r=g,n=u)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn(a+" is not supported byBarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Fx=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})},kx=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&y[0]?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[2&y[0],a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(6===y[0]&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],i=0}finally{r=a=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}},mN=function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Px.isSupported()?(this.primaryDecoder=new Px(t,r,i),this.secondaryDecoder=new Lx(t,r,i)):this.primaryDecoder=new Lx(t,r,i)}return e.prototype.decodeAsync=function(t){return Fx(this,void 0,void 0,function(){var n;return kx(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Fx(this,void 0,void 0,function(){var n,r;return kx(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++)t+=r[n];console.log(t/this.executionResults.length+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},e}(),Ph=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Yc=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})},Xc=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&y[0]?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[2&y[0],a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(6===y[0]&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],i=0}finally{r=a=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}},Bx=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(t){var n={};return n[this.name]=t,this.track.applyConstraints({advanced:[n]})},e.prototype.value=function(){var t=this.track.getSettings();return this.name in t?t[this.name]:null},e}(),yN=function(e){function t(n,r){return e.call(this,n,r)||this}return Ph(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};return r[this.name]=n,this.track.applyConstraints({advanced:[r]})},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities()[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error(this.name+" capability not supported")},t}(Bx),wN=function(e){function t(n){return e.call(this,"zoom",n)||this}return Ph(t,e),t}(yN),xN=function(e){function t(n){return e.call(this,"torch",n)||this}return Ph(t,e),t}(Bx),CN=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new wN(this.track)},e.prototype.torchFeature=function(){return new xN(this.track)},e}(),EN=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width=t+"px",n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){t.callbacks.onRenderSurfaceReady(t.surface.clientWidth,t.surface.clientHeight),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Yc(this,void 0,void 0,function(){var a,u;return Xc(this,function(g){switch(g.label){case 0:return a=new e(t,n,i),r.aspectRatio?(u={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:g.sent(),g.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Yc(this,void 0,void 0,function(){return Xc(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var a=t.mediaStream.getVideoTracks().length,u=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++u>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new CN(this.getFirstTrackOrFail())},e}(),DN=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return Yc(this,void 0,void 0,function(){return Xc(this,function(i){return[2,EN.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return Yc(this,void 0,void 0,function(){return Xc(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[4,navigator.mediaDevices.getUserMedia({audio:!1,video:t})];case 1:return[2,new e(i.sent())]}})})},e}(),Ux=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})},jx=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&y[0]?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[2&y[0],a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(6===y[0]&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],i=0}finally{r=a=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}},AN=function(){function e(){}return e.failIfNotSupported=function(){return Ux(this,void 0,void 0,function(){return jx(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Ux(this,void 0,void 0,function(){return jx(this,function(n){return[2,DN.create(t)]})})},e}(),SN=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Oa.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Oa.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},e.getCamerasFromMediaDevices=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t,n,r,i,a,u,g;return function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&y[0]?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[2&y[0],a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(6===y[0]&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],i=0}finally{r=a=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}}(this,function(m){switch(m.label){case 0:return t=function(y){for(var D=0,v=y.getVideoTracks();D<v.length;D++){var T=v[D];T.enabled=!1,T.stop(),y.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),i=[],a=0,u=r;a<u.length;a++)"videoinput"===(g=u[a]).kind&&i.push({id:g.deviceId,label:g.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){MediaStreamTrack.getSources(function(a){for(var u=[],g=0,m=a;g<m.length;g++){var y=m[g];"video"===y.kind&&u.push({id:y.id,label:y.label})}t(u)})})},e}(),At=(()=>(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(At||(At={})),At))(),_N=function(){function e(){this.state=At.NOT_STARTED,this.onGoingTransactionNewState=At.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===At.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=At.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===At.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=At.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==At.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case At.UNKNOWN:throw"Transition from unknown is not allowed";case At.NOT_STARTED:this.failIfNewStateIs(t,[At.PAUSED])}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++)if(t===i[r])throw"Cannot transition from "+this.state+" to "+t},e}(),bN=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===At.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==At.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===At.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===At.PAUSED},e}(),TN=function(){function e(){}return e.create=function(){return new bN(new _N)},e}(),MN=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return MN(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Cr),NN=function(){function e(t,n){this.logger=n,this.fps=Wn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Wn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ox.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ur(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Fh=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id="+t+" not found";var i;this.elementId=t,this.verbose=!1,"boolean"==typeof n?this.verbose=!0===n:n&&(this.verbose=!0===(i=n).verbose),this.logger=new Nx(this.verbose),this.qrcode=new mN(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.shouldScan=!0,this.stateManagerProxy=TN.create()}return e.prototype.start=function(t,n,r,i){var u,a=this;if(!t)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";u=i||(this.verbose?this.logger.log:function(){});var g=NN.create(n,this.logger);this.clearElement();var m=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=m,C=document.getElementById(this.elementId);C.style.position="relative",this.shouldScan=!0,this.element=C;var v=this,T=this.stateManagerProxy.startTransition(At.SCANNING);return new Promise(function(R,P){var k=y?g.videoConstraints:v.createVideoConstraints(t);if(!k)return T.cancel(),void P("videoConstraints should be defined");var H={};(!y||g.aspectRatio)&&(H.aspectRatio=g.aspectRatio);var Q={onRenderSurfaceReady:function(j,ae){v.setupUi(j,ae,g),v.isScanning=!0,v.foreverScan(g,r,u)}};AN.failIfNotSupported().then(function(j){j.create(k).then(function(ae){return ae.render(a.element,H,Q).then(function(Ve){v.renderedCamera=Ve,T.execute(),R(null)}).catch(function(Ve){T.cancel(),P(Ve)})}).catch(function(ae){T.cancel(),P(Oa.errorGettingUserMedia(ae))})}).catch(function(j){T.cancel(),P(Oa.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(At.PAUSED),this.showPausedState(),(Ur(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(At.SCANNING),t.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){n()}):n()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(At.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),function(){if(t.element){var a=document.getElementById(Wn.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}}(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!(t&&t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ur(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var u=new Image;u.onload=function(){var g=u.width,m=u.height,y=document.getElementById(r.elementId),C=y.clientWidth?y.clientWidth:Wn.DEFAULT_WIDTH,D=Math.max(y.clientHeight?y.clientHeight:m,Wn.FILE_SCAN_MIN_HEIGHT),v=r.computeCanvasDrawConfig(g,m,C,D);if(n){var T=r.createCanvasElement(C,D,"qr-canvas-visible");T.style.display="inline-block",y.appendChild(T);var R=T.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=C,R.canvas.height=D,R.drawImage(u,0,0,g,m,v.x,v.y,v.width,v.height)}var P=Wn.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(u.width,v.width),H=Math.max(u.height,v.height),Q=k+2*P,j=H+2*P,ae=r.createCanvasElement(Q,j);y.appendChild(ae);var Ve=ae.getContext("2d");if(!Ve)throw"Unable to get 2d context from canvas";Ve.canvas.width=Q,Ve.canvas.height=j,Ve.drawImage(u,0,0,g,m,P,P,k,H);try{r.qrcode.decodeRobustlyAsync(ae).then(function(gt){i(Tx.createFromQrcodeResult(gt))}).catch(a)}catch(gt){a("QR code parse error, error = "+gt)}},u.onerror=a,u.onabort=a,u.onstalled=a,u.onsuspend=a,u.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return SN.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(!t)throw"videoConstaints is required argument.";if(!Ox.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){if(!t||"boolean"==typeof t||!t.formatsToSupport)return[ne.QR_CODE,ne.AZTEC,ne.CODABAR,ne.CODE_39,ne.CODE_93,ne.CODE_128,ne.DATA_MATRIX,ne.MAXICODE,ne.ITF,ne.EAN_13,ne.EAN_8,ne.PDF_417,ne.RSS_14,ne.RSS_EXPANDED,ne.UPC_A,ne.UPC_E,ne.UPC_EAN_EXTENSION];if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=t.formatsToSupport;i<a.length;i++){var u=a[i];fN(u)?r.push(u):this.logger.warn("Invalid format: "+u+" passed in config, ignoring.")}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ur(t))return!0;if(!Ur(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(Ur(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return!!Ur(n.useBarCodeDetectorIfSupported)||!1!==n.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(t,n,r){var a=r.qrbox;this.validateQrboxConfig(a);var y,u=this.toQrdimensions(t,n,a),g=function(y){if(y<Wn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is "+Wn.MIN_QR_BOX_SIZE+"px."};g(u.width),g(u.height),u.width=((y=u.width)>t&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y)},e.prototype.validateQrboxConfig=function(t){if("number"!=typeof t&&"function"!=typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=Ur(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(t,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=r.isShadedBoxEnabled()&&a.height<=n,g={x:0,y:0,width:t,height:n},m=u?this.getShadedRegionBounds(t,n,a):g,y=this.createCanvasElement(m.width,m.height),D=y.getContext("2d",{willReadFrequently:!0});D.canvas.width=m.width,D.canvas.height=m.height,this.element.append(y),u&&this.possiblyInsertShadingElement(this.element,t,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=D,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText="Scanner paused",n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="yellow",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,Tx.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=Oa.codeParseError(i);return n(a,Mx.createFrom(a)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),u=a.videoWidth/a.clientWidth,g=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";this.context.drawImage(a,this.qrRegion.x*u,this.qrRegion.y*g,this.qrRegion.width*u,this.qrRegion.height*g,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(T){T||!0===t.disableFlip?v():(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){v()}))}).catch(function(T){i.logger.logError("Error happend while scanning context",T),v()})}},e.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",u=function(R){if(R in i)return!0;throw"config has invalid 'facingMode' value = '"+R+"'"},g=Object.keys(t);if(1!==g.length)throw"'cameraIdOrConfig' object should have exactly 1 key, if passed as an object, found "+g.length+" keys";var m=Object.keys(t)[0];if(m!==n&&m!==r)throw"Only '"+n+"' and '"+r+"'  are supported for 'cameraIdOrConfig'";if(m!==n){var D=t.deviceId;if("string"==typeof D)return{deviceId:D};if("object"==typeof D){if(a in D)return{deviceId:{exact:D[""+a]}};throw"'deviceId' should be string or object with exact as key."}throw"Invalid type of 'deviceId' = "+typeof D}var y=t.facingMode;if("string"==typeof y){if(u(y))return{facingMode:y}}else{if("object"!=typeof y)throw"Invalid type of 'facingMode' = "+typeof y;if(!(a in y))throw"'facingMode' should be string or object with exact as key.";if(u(y[""+a]))return{facingMode:{exact:y[""+a]}}}}throw"Invalid type of 'cameraIdOrConfig' = "+typeof t},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i)return{x:(r-t)/2,y:(i-n)/2,width:t,height:n};var g=t,m=n;return t>r&&(n*=r/t,t=r),n>i&&(t*=i/n,n=i),this.logger.log("Image downsampled from "+g+"X"+m+" to "+t+"X"+n+"."),this.computeCanvasDrawConfig(t,n,r,i)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Wn.BORDER_SHADER_MATCH_COLOR:Wn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,a=n,u=document.createElement("canvas");return u.style.width=i+"px",u.style.height=a+"px",u.style.display="none",u.id=Ur(r)?"qr-canvas":r,u},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var u=(n-i.width)/2,g=(r-i.height)/2;if(a.style.borderLeft=u+"px solid rgba(0, 0, 0, 0.48)",a.style.borderRight=u+"px solid rgba(0, 0, 0, 0.48)",a.style.borderTop=g+"px solid rgba(0, 0, 0, 0.48)",a.style.borderBottom=g+"px solid rgba(0, 0, 0, 0.48)",a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id=""+Wn.SHADED_REGION_ELEMENT_ID,n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{this.insertShaderBorders(a,40,5,-5,null,0,!0),this.insertShaderBorders(a,40,5,-5,null,0,!1),this.insertShaderBorders(a,40,5,null,-5,0,!0),this.insertShaderBorders(a,40,5,null,-5,0,!1),this.insertShaderBorders(a,5,45,-5,null,-5,!0),this.insertShaderBorders(a,5,45,null,-5,-5,!0),this.insertShaderBorders(a,5,45,-5,null,-5,!1),this.insertShaderBorders(a,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,n,r,i,a,u,g){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Wn.BORDER_SHADER_DEFAULT_COLOR,m.style.width=n+"px",m.style.height=r+"px",null!==i&&(m.style.top=i+"px"),null!==a&&(m.style.bottom=a+"px"),g?m.style.left=u+"px":m.style.right=u+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),t.appendChild(m)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),kh="data:image/svg+xml;base64,",RN=kh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ON=kh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Vx=kh+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Hx=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),PN=function(){function e(){this.data=Hx.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Hx.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),FN=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Rx.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var a=document.createElement("a");a.innerText=Rx.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),kN=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Vx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Vx,this.infoIcon.style.opacity="0.6")},e}(),BN=function(){function e(){var t=this;this.infoDiv=new FN,this.infoIcon=new kN(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),zx=function(){function e(){}return e.hasPermissions=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t,n,r,i;return function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&y[0]?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[2&y[0],a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(6===y[0]&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],i=0}finally{r=a=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}}(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=a.sent(),n=0,r=t;n<r.length;n++)if("videoinput"===(i=r[n]).kind&&i.label)return[2,!0];return[2,!1]}})})},e}(),Mi=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++)if(e.isCameraScanType(n[t]))return!0;return!1},e.isCameraScanType=function(t){return t===ai.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===ai.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return Cr.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Cr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max "+n+" values expected for supportedScanTypes";for(var r=0,i=t;r<i.length;r++){var a=i[r];if(!Cr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type "+a}return t},e}(),$n=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),li=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add($n.ALL_ELEMENT_CLASS),"button"===t&&r.setAttribute("type","button"),r},e}(),Gx=function(e,t,n,r){return new(n||(n=Promise))(function(a,u){function g(C){try{y(r.next(C))}catch(D){u(D)}}function m(C){try{y(r.throw(C))}catch(D){u(D)}}function y(C){C.done?a(C.value):function i(a){return a instanceof n?a:new n(function(u){u(a)})}(C.value).then(g,m)}y((r=r.apply(e,t||[])).next())})},Wx=function(e,t){var r,i,a,u,n={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function g(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=2&y[0]?i.return:y[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,y[1])).done)return a;switch(i=0,a&&(y=[2&y[0],a.value]),y[0]){case 0:case 1:a=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,i=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(a=(a=n.trys).length>0&&a[a.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!a||y[1]>a[0]&&y[1]<a[3])){n.label=y[1];break}if(6===y[0]&&n.label<a[1]){n.label=a[1],a=y;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(y);break}a[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],i=0}finally{r=a=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}},$x=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Gx(this,void 0,void 0,function(){var t,n;return Wx(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?st.torchOffButton():st.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?st.torchOnFailedMessage():st.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),VN=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=li.createElement("button",$n.TORCH_BUTTON_ID),this.torchController=new $x(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=st.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(a){return Gx(r,void 0,void 0,function(){return Wx(this,function(u){switch(u.label){case 0:return[4,i.torchController.flipState()];case 1:return u.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove($n.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add($n.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove($n.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add($n.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new $x(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=st.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var a=new e(n,i);return a.render(t,r),a},e}(),HN=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=li.createElement("button",$n.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=li.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(g){if(null!=g&&null!=g.target){var m=g.target;if(!m.files||0!==m.files.length){var C=m.files[0];a.setImageNameToButton(C.name),r(C)}}});var u=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(u),this.fileBasedScanRegion.addEventListener("dragenter",function(g){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var m=g.dataTransfer;if(m){var y=m.files;if(!y||0===y.length)return;for(var C=!1,D=0;D<y.length;++D){var v=y.item(D);if(v&&v.type.match(/image.*/)){C=!0,a.setImageNameToButton(v.name),r(v),u.innerText=st.dragAndDropMessage();break}}C||(u.innerText=st.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=st.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){if(t.length>20){var r=t.substring(0,8),i=t.length,a=t.substring(i-8,i);t=r+"...."+a}var u=st.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=u},e.prototype.setInitialValueToButton=function(){var t=st.fileSelectionChooseImage()+" - "+st.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),zN=function(){function e(t){this.selectElement=li.createElement("select",$n.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw new Error("No cameras found");if(1===r)n.style.display="none";else{var i=st.selectCamera();n.innerText=i+" ("+this.cameras.length+")  "}for(var a=1,u=0,g=this.cameras;u<g.length;u++){var m=g[u],y=m.id,C=null==m.label?y:m.label;(!C||""===C)&&(C=[st.anonymousCameraPrefix(),a++].join(" "));var D=document.createElement("option");D.value=y,D.innerText=C,this.options.push(D),this.selectElement.appendChild(D)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++)if(r[n].value===t)return!0;return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error(t+" is not present in the camera list.");this.selectElement.value=t},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),GN=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=li.createElement("input",$n.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=st.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+r,this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=st.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+t,this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,i){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}(),On=(()=>(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(On||(On={})),On))(),YN=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=!0===r,!document.getElementById(t))throw"HTML Element with id="+t+" not found";this.scanTypeSelector=new Mi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Nx(this.verbose),this.persistedDataManager=new PN,!0!==n.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,u){if(t)t(a,u);else{if(r.lastMatchFound===a)return;r.lastMatchFound=a,r.setHeaderMessage(st.lastMatch(a),On.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,u){n&&n(a,u)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id="+this.elementId+" not found";i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new Fh(this.getScanRegionId(),function $N(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(t){(Ur(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){t.html5Qrcode?t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(a){t.html5Qrcode?(t.html5Qrcode.clear(),n(),r()):r()}).catch(function(a){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",a),i(a)}):(t.html5Qrcode.clear(),n(),r()):r()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Cr.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Cr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Cr.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Cr.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Cr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Cr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Cr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),Mi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),a=this.getDashboardId();i.id=a,i.style.width="100%",t.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n),(new BN).renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(st.cameraPermissionRequesting());var a=function(){r||i.createPermissionButton(t,n)};Fh.getCameras().then(function(u){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),u&&u.length>0?(t.removeChild(n),i.renderCameraSelection(u)):(i.setHeaderMessage(st.noCameraFound(),On.STATUS_WARNING),a())}).catch(function(u){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:a(),i.setHeaderMessage(u,On.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,i=li.createElement("button",this.getCameraPermissionButtonId());i.innerText=st.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(t,n,i)}),n.appendChild(i)},e.prototype.createPermissionsUi=function(t,n){var r=this;Mi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?zx.hasPermissions().then(function(i){i?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)}):this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");n.appendChild(r);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=Mi.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(r)},e.prototype.renderFileScanUi=function(t){var n=Mi.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=HN.create(t,n,function(a){if(!r.html5Qrcode)throw"html5Qrcode not defined";Mi.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(st.loadingImage()),r.html5Qrcode.scanFileV2(a,!0).then(function(u){r.resetHeaderMessage(),r.qrCodeSuccessCallback(u.decodedText,u)}).catch(function(u){r.setHeaderMessage(u,On.STATUS_WARNING),r.qrCodeErrorCallback(u,Mx.createFrom(u))}))})},e.prototype.renderCameraSelection=function(t){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var a=GN.create(i,!1),g=zN.create(i,t),m=document.createElement("span"),y=li.createElement("button",$n.CAMERA_START_BUTTON_ID);y.innerText=st.scanButtonStartScanningText(),m.appendChild(y);var D,C=li.createElement("button",$n.CAMERA_STOP_BUTTON_ID);C.innerText=st.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,m.appendChild(C),i.appendChild(m);var T=function(P){P||(y.style.display="none"),y.innerText=st.scanButtonStartScanningText(),y.style.opacity="1",y.disabled=!1,P&&(y.style.display="inline-block")};if(y.addEventListener("click",function(P){y.innerText=st.scanButtonScanningStarting(),g.disable(),y.disabled=!0,y.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var k=g.getValue();r.persistedDataManager.setLastUsedCameraId(k),r.html5Qrcode.start(k,function WN(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(H){C.disabled=!1,C.style.display="inline-block",T(!1);var Q=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===n.config.showTorchButtonIfSupported&&function(P){P.torchFeature().isSupported()?(D?D.updateTorchCapability(P.torchFeature()):D=VN.create(m,P.torchFeature(),{display:"none",marginLeft:"5px"},function(k){r.setHeaderMessage(k,On.STATUS_WARNING)}),D.show()):D&&D.hide()}(Q),!0===n.config.showZoomSliderIfSupported&&function(P){var k=P.zoomFeature();if(k.isSupported()){a.setOnCameraZoomValueChangeCallback(function(Q){k.apply(Q)});var H=1;n.config.defaultZoomValueIfSupported&&(H=n.config.defaultZoomValueIfSupported),H=function hN(e,t,n){return e>n?n:e<t?t:e}(H,k.min(),k.max()),a.setValues(k.min(),k.max(),H,k.step()),a.show()}}(Q)}).catch(function(H){r.showHideScanTypeSwapLink(!0),g.enable(),T(!0),r.setHeaderMessage(H,On.STATUS_WARNING)})}),g.hasSingleItem()&&y.click(),C.addEventListener("click",function(P){if(!r.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,r.html5Qrcode.stop().then(function(k){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),g.enable(),y.disabled=!1,C.style.display="none",y.style.display="inline-block",D&&(D.reset(),D.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(k){C.disabled=!1,r.setHeaderMessage(k,On.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var R=r.persistedDataManager.getLastUsedCameraId();g.hasValue(R)?(g.setValue(R),y.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=st.textIfCameraScanSelected(),r=st.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var u=li.createElement("span",this.getDashboardSectionSwapLinkId());u.style.textDecoration="underline",u.style.cursor="pointer",u.innerText=Mi.isCameraScanType(this.currentScanType)?n:r,u.addEventListener("click",function(){t.sectionSwapAllowed?(t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,Mi.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),u.innerText=r,t.currentScanType=ai.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),u.innerText=n,t.currentScanType=ai.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0):t.verbose&&t.logger.logError("Section swap called when not allowed")}),a.appendChild(u),i.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;this.persistedDataManager.hasCameraPermissions()&&zx.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=On.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case On.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case On.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return n.innerHTML="<br>",void n.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=RN,this.cameraScanImage.alt=st.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return n.innerHTML="<br>",void n.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ON,this.fileScanImage.alt=st.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return this.elementId+"__dashboard_section"},e.prototype.getDashboardSectionCameraScanRegionId=function(){return this.elementId+"__dashboard_section_csr"},e.prototype.getDashboardSectionSwapLinkId=function(){return $n.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return this.elementId+"__scan_region"},e.prototype.getDashboardId=function(){return this.elementId+"__dashboard"},e.prototype.getHeaderMessageContainerId=function(){return this.elementId+"__header_message"},e.prototype.getCameraPermissionButtonId=function(){return $n.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();let XN=(()=>{class e{constructor(){this.title="qrscanner",this.errorMessage=""}ngOnInit(){this.initQREasyMode(),this.initQRProMode()}initQREasyMode(){new YN("reader",{fps:10,qrbox:{width:250,height:250}},!1).render((a,u)=>{console.log(`Code matched = ${a}`,u),this.qrText=u.result.text},a=>{this.errorMessage=a})}initQRProMode(){Fh.getCameras().then(n=>{}).catch(n=>{this.errorMessage=n})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=bn({type:e,selectors:[["app-root"]],decls:4,vars:2,consts:[["id","reader","width","600px"]],template:function(n,r){1&n&&(zl(0,"div",0),Gd(1),Vl(2,"h3"),Gd(3),Hl()),2&n&&(gd(1),Yl("\nQR Text ",r.qrText," "),gd(2),Wd(r.errorMessage))}}),e})(),ZN=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=br({type:e,bootstrap:[XN]}),e.\u0275inj=lr({imports:[xT,dN]}),e})();wT().bootstrapModule(ZN).catch(e=>console.error(e))},140:function(La,Pa){!function(G){"use strict";function Je(x){return null==x}var us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,o){x.__proto__=o}||function(x,o){for(var s in o)o.hasOwnProperty(s)&&(x[s]=o[s])};var Fa=function(x){function o(s){var l=this.constructor,c=x.call(this,s)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),function fs(x,o){var s=Object.setPrototypeOf;s?s(x,o):x.__proto__=o}(c,l.prototype),function An(x,o){void 0===o&&(o=x.constructor);var s=Error.captureStackTrace;s&&s(x,o)}(c),c}return function ds(x,o){function s(){this.constructor=x}us(x,o),x.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s)}(o,x),o}(Error);let Qt=(()=>{class x extends Fa{constructor(s){super(s),this.message=s}getKind(){return this.constructor.kind}}return x.kind="Exception",x})(),gn=(()=>{class x extends Qt{}return x.kind="ArgumentException",x})(),te=(()=>{class x extends Qt{}return x.kind="IllegalArgumentException",x})();class rr{constructor(o){if(this.binarizer=o,null===o)throw new te("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,s){return this.binarizer.getBlackRow(o,s)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,s,l,c){const d=this.binarizer.getLuminanceSource().crop(o,s,l,c);return new rr(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new rr(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new rr(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let St=(()=>{class x extends Qt{static getChecksumInstance(){return new x}}return x.kind="ChecksumException",x})();class hs{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class rt{static arraycopy(o,s,l,c,d){for(;d--;)l[c++]=o[s++]}static currentTimeMillis(){return Date.now()}}let gs=(()=>{class x extends Qt{}return x.kind="IndexOutOfBoundsException",x})(),ka=(()=>{class x extends gs{constructor(s,l){super(l),this.index=s,this.message=l}}return x.kind="ArrayIndexOutOfBoundsException",x})();class It{static fill(o,s){for(let l=0,c=o.length;l<c;l++)o[l]=s}static fillWithin(o,s,l,c){It.rangeCheck(o.length,s,l);for(let d=s;d<l;d++)o[d]=c}static rangeCheck(o,s,l){if(s>l)throw new te("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new ka(s);if(l>o)throw new ka(l)}static asList(...o){return o}static create(o,s,l){return Array.from({length:o}).map(d=>Array.from({length:s}).fill(l))}static createInt32Array(o,s,l){return Array.from({length:o}).map(d=>Int32Array.from({length:s}).fill(l))}static equals(o,s){if(!(o&&s&&o.length&&s.length&&o.length===s.length))return!1;for(let l=0,c=o.length;l<c;l++)if(o[l]!==s[l])return!1;return!0}static hashCode(o){if(null===o)return 0;let s=1;for(const l of o)s=31*s+l;return s}static fillUint8Array(o,s){for(let l=0;l!==o.length;l++)o[l]=s}static copyOf(o,s){return o.slice(0,s)}static copyOfUint8Array(o,s){if(o.length<=s){const l=new Uint8Array(s);return l.set(o),l}return o.slice(0,s)}static copyOfRange(o,s,l){const c=l-s,d=new Int32Array(c);return rt.arraycopy(o,s,d,0,c),d}static binarySearch(o,s,l){void 0===l&&(l=It.numberComparator);let c=0,d=o.length-1;for(;c<=d;){const f=d+c>>1,h=l(s,o[f]);if(h>0)c=f+1;else{if(!(h<0))return f;d=f-1}}return-c-1}static numberComparator(o,s){return o-s}}class De{static numberOfTrailingZeros(o){let s;if(0===o)return 32;let l=31;return s=o<<16,0!==s&&(l-=16,o=s),s=o<<8,0!==s&&(l-=8,o=s),s=o<<4,0!==s&&(l-=4,o=s),s=o<<2,0!==s&&(l-=2,o=s),l-(o<<1>>>31)}static numberOfLeadingZeros(o){if(0===o)return 32;let s=1;return o>>>16||(s+=16,o<<=16),o>>>24||(s+=8,o<<=8),o>>>28||(s+=4,o<<=4),o>>>30||(s+=2,o<<=2),s-=o>>>31,s}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=(o=(858993459&(o-=o>>>1&1431655765))+(o>>>2&858993459))+(o>>>4)&252645135,63&(o+=o>>>8)+(o>>>16)}static truncDivision(o,s){return Math.trunc(o/s)}static parseInt(o,s){return parseInt(o,s)}}De.MIN_VALUE_32_BITS=-2147483648,De.MAX_VALUE=Number.MAX_SAFE_INTEGER;class it{constructor(o,s){void 0===o?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,this.bits=null==s?it.makeArray(o):s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>32*this.bits.length){const s=it.makeArray(o);rt.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(o){return 0!=(this.bits[Math.floor(o/32)]&1<<(31&o))}set(o){this.bits[Math.floor(o/32)]|=1<<(31&o)}flip(o){this.bits[Math.floor(o/32)]^=1<<(31&o)}getNextSet(o){const s=this.size;if(o>=s)return s;const l=this.bits;let c=Math.floor(o/32),d=l[c];d&=~((1<<(31&o))-1);const f=l.length;for(;0===d;){if(++c===f)return s;d=l[c]}const h=32*c+De.numberOfTrailingZeros(d);return h>s?s:h}getNextUnset(o){const s=this.size;if(o>=s)return s;const l=this.bits;let c=Math.floor(o/32),d=~l[c];d&=~((1<<(31&o))-1);const f=l.length;for(;0===d;){if(++c===f)return s;d=~l[c]}const h=32*c+De.numberOfTrailingZeros(d);return h>s?s:h}setBulk(o,s){this.bits[Math.floor(o/32)]=s}setRange(o,s){if(s<o||o<0||s>this.size)throw new te;if(s===o)return;s--;const l=Math.floor(o/32),c=Math.floor(s/32),d=this.bits;for(let f=l;f<=c;f++)d[f]|=(2<<(f<c?31:31&s))-(1<<(f>l?0:31&o))}clear(){const o=this.bits.length,s=this.bits;for(let l=0;l<o;l++)s[l]=0}isRange(o,s,l){if(s<o||o<0||s>this.size)throw new te;if(s===o)return!0;s--;const c=Math.floor(o/32),d=Math.floor(s/32),f=this.bits;for(let h=c;h<=d;h++){const E=(2<<(h<d?31:31&s))-(1<<(h>c?0:31&o))&4294967295;if((f[h]&E)!==(l?E:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(o,s){if(s<0||s>32)throw new te("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit(1==(o>>l-1&1))}appendBitArray(o){const s=o.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(o.get(l))}xor(o){if(this.size!==o.size)throw new te("Sizes don't match");const s=this.bits;for(let l=0,c=s.length;l<c;l++)s[l]^=o.bits[l]}toBytes(o,s,l,c){for(let d=0;d<c;d++){let f=0;for(let h=0;h<8;h++)this.get(o)&&(f|=1<<7-h),o++;s[l+d]=f}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,c=this.bits;for(let d=0;d<l;d++){let f=c[d];f=f>>1&1431655765|(1431655765&f)<<1,f=f>>2&858993459|(858993459&f)<<2,f=f>>4&252645135|(252645135&f)<<4,f=f>>8&16711935|(16711935&f)<<8,f=f>>16&65535|(65535&f)<<16,o[s-d]=f}if(this.size!==32*l){const d=32*l-this.size;let f=o[0]>>>d;for(let h=1;h<l;h++){const p=o[h];f|=p<<32-d,o[h-1]=f,f=p>>>d}o[l-1]=f}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){return o instanceof it&&this.size===o.size&&It.equals(this.bits,o.bits)}hashCode(){return 31*this.size+It.hashCode(this.bits)}toString(){let o="";for(let s=0,l=this.size;s<l;s++)7&s||(o+=" "),o+=this.get(s)?"X":".";return o}clone(){return new it(this.size,this.bits.slice())}}var oo=(()=>{return(x=oo||(oo={}))[x.OTHER=0]="OTHER",x[x.PURE_BARCODE=1]="PURE_BARCODE",x[x.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",x[x.TRY_HARDER=3]="TRY_HARDER",x[x.CHARACTER_SET=4]="CHARACTER_SET",x[x.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",x[x.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",x[x.ASSUME_GS1=7]="ASSUME_GS1",x[x.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",x[x.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",x[x.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",oo;var x})(),at=oo;let q=(()=>{class x extends Qt{static getFormatInstance(){return new x}}return x.kind="FormatException",x})();var ze=(()=>{return(x=ze||(ze={}))[x.Cp437=0]="Cp437",x[x.ISO8859_1=1]="ISO8859_1",x[x.ISO8859_2=2]="ISO8859_2",x[x.ISO8859_3=3]="ISO8859_3",x[x.ISO8859_4=4]="ISO8859_4",x[x.ISO8859_5=5]="ISO8859_5",x[x.ISO8859_6=6]="ISO8859_6",x[x.ISO8859_7=7]="ISO8859_7",x[x.ISO8859_8=8]="ISO8859_8",x[x.ISO8859_9=9]="ISO8859_9",x[x.ISO8859_10=10]="ISO8859_10",x[x.ISO8859_11=11]="ISO8859_11",x[x.ISO8859_13=12]="ISO8859_13",x[x.ISO8859_14=13]="ISO8859_14",x[x.ISO8859_15=14]="ISO8859_15",x[x.ISO8859_16=15]="ISO8859_16",x[x.SJIS=16]="SJIS",x[x.Cp1250=17]="Cp1250",x[x.Cp1251=18]="Cp1251",x[x.Cp1252=19]="Cp1252",x[x.Cp1256=20]="Cp1256",x[x.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",x[x.UTF8=22]="UTF8",x[x.ASCII=23]="ASCII",x[x.Big5=24]="Big5",x[x.GB18030=25]="GB18030",x[x.EUC_KR=26]="EUC_KR",ze;var x})();class Y{constructor(o,s,l,...c){this.valueIdentifier=o,this.name=l,this.values="number"==typeof s?Int32Array.from([s]):s,this.otherEncodingNames=c,Y.VALUE_IDENTIFIER_TO_ECI.set(o,this),Y.NAME_TO_ECI.set(l,this);const d=this.values;for(let f=0,h=d.length;f!==h;f++)Y.VALUES_TO_ECI.set(d[f],this);for(const f of c)Y.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new q("incorect value");const s=Y.VALUES_TO_ECI.get(o);if(void 0===s)throw new q("incorect value");return s}static getCharacterSetECIByName(o){const s=Y.NAME_TO_ECI.get(o);if(void 0===s)throw new q("incorect value");return s}equals(o){if(!(o instanceof Y))return!1;const s=o;return this.getName()===s.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(ze.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(ze.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(ze.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(ze.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(ze.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(ze.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(ze.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(ze.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(ze.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(ze.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(ze.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(ze.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(ze.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(ze.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(ze.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(ze.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(ze.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(ze.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(ze.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(ze.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(ze.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(ze.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(ze.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(ze.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(ze.Big5,28,"Big5"),Y.GB18030=new Y(ze.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(ze.EUC_KR,30,"EUC_KR","EUC-KR");let ir=(()=>{class x extends Qt{}return x.kind="UnsupportedOperationException",x})();class Ht{static decode(o,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(o,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(o,l):new TextDecoder(l).decode(o)}static shouldDecodeOnFallback(o){return!Ht.isBrowser()&&"ISO-8859-1"===o}static encode(o,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(o,l):typeof TextEncoder>"u"?this.encodeFallback(o):(new TextEncoder).encode(o)}static isBrowser(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)}static encodingName(o){return"string"==typeof o?o:o.getName()}static encodingCharacterSet(o){return o instanceof Y?o:Y.getCharacterSetECIByName(o)}static decodeFallback(o,s){const l=this.encodingCharacterSet(s);if(Ht.isDecodeFallbackSupported(l)){let c="";for(let d=0,f=o.length;d<f;d++){let h=o[d].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(l.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new ir(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(Y.UTF8)||o.equals(Y.ISO8859_1)||o.equals(Y.ASCII)}static encodeFallback(o){const l=btoa(unescape(encodeURIComponent(o))).split(""),c=[];for(let d=0;d<l.length;d++)c.push(l[d].charCodeAt(0));return new Uint8Array(c)}}class Ce{static castAsNonUtf8Char(o,s=null){const l=s?s.getName():this.ISO88591;return Ht.decode(new Uint8Array([o]),l)}static guessEncoding(o,s){if(null!=s&&void 0!==s.get(at.CHARACTER_SET))return s.get(at.CHARACTER_SET).toString();const l=o.length;let c=!0,d=!0,f=!0,h=0,p=0,w=0,E=0,A=0,I=0,S=0,b=0,M=0,O=0,N=0;const W=o.length>3&&239===o[0]&&187===o[1]&&191===o[2];for(let X=0;X<l&&(c||d||f);X++){const B=255&o[X];f&&(h>0?128&B?h--:f=!1:128&B&&(64&B?(h++,32&B?(h++,16&B?(h++,8&B?f=!1:E++):w++):p++):f=!1)),c&&(B>127&&B<160?c=!1:B>159&&(B<192||215===B||247===B)&&N++),d&&(A>0?B<64||127===B||B>252?d=!1:A--:128===B||160===B||B>239?d=!1:B>160&&B<224?(I++,b=0,S++,S>M&&(M=S)):B>127?(A++,S=0,b++,b>O&&(O=b)):(S=0,b=0))}return f&&h>0&&(f=!1),d&&A>0&&(d=!1),f&&(W||p+w+E>0)?Ce.UTF8:d&&(Ce.ASSUME_SHIFT_JIS||M>=3||O>=3)?Ce.SHIFT_JIS:c&&d?2===M&&2===I||10*N>=l?Ce.SHIFT_JIS:Ce.ISO88591:c?Ce.ISO88591:d?Ce.SHIFT_JIS:f?Ce.UTF8:Ce.PLATFORM_DEFAULT_ENCODING}static format(o,...s){let l=-1;return o.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(f,h,p,w,E,A){if("%%"===f)return"%";if(void 0===s[++l])return;f=w?parseInt(w.substr(1)):void 0;let S,I=E?parseInt(E.substr(1)):void 0;switch(A){case"s":S=s[l];break;case"c":S=s[l][0];break;case"f":S=parseFloat(s[l]).toFixed(f);break;case"p":S=parseFloat(s[l]).toPrecision(f);break;case"e":S=parseFloat(s[l]).toExponential(f);break;case"x":S=parseInt(s[l]).toString(I||16);break;case"d":S=parseFloat(parseInt(s[l],I||10).toPrecision(f)).toFixed(0)}S="object"==typeof S?JSON.stringify(S):(+S).toString(I);let b=parseInt(p),M=p&&p[0]+""=="0"?"0":" ";for(;S.length<b;)S=void 0!==h?S+M:M+S;return S})}static getBytes(o,s){return Ht.encode(o,s)}static getCharCode(o,s=0){return o.charCodeAt(s)}static getCharAt(o){return String.fromCharCode(o)}}Ce.SHIFT_JIS=Y.SJIS.getName(),Ce.GB2312="GB2312",Ce.ISO88591=Y.ISO8859_1.getName(),Ce.EUC_JP="EUC_JP",Ce.UTF8=Y.UTF8.getName(),Ce.PLATFORM_DEFAULT_ENCODING=Ce.UTF8,Ce.ASSUME_SHIFT_JIS=!1;class et{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return this.value+="string"==typeof o?o.toString():this.encoding?Ce.castAsNonUtf8Char(o,this.encoding):String.fromCharCode(o),this}appendChars(o,s,l){for(let c=s;s<s+l;c++)this.append(o[c]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,s){this.value=this.value.substr(0,o)+s+this.value.substr(o+1)}substring(o,s){return this.value.substring(o,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,s){this.value=this.value.substr(0,o)+s+this.value.substr(o+s.length)}}class Lt{constructor(o,s,l,c){if(this.width=o,this.height=s,this.rowSize=l,this.bits=c,null==s&&(s=o),this.height=s,o<1||s<1)throw new te("Both dimensions must be greater than 0");null==l&&(l=Math.floor((o+31)/32)),this.rowSize=l,null==c&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const s=o.length,l=o[0].length,c=new Lt(l,s);for(let d=0;d<s;d++){const f=o[d];for(let h=0;h<l;h++)f[h]&&c.set(h,d)}return c}static parseFromString(o,s,l){if(null===o)throw new te("stringRepresentation cannot be null");const c=new Array(o.length);let d=0,f=0,h=-1,p=0,w=0;for(;w<o.length;)if("\n"===o.charAt(w)||"\r"===o.charAt(w)){if(d>f){if(-1===h)h=d-f;else if(d-f!==h)throw new te("row lengths do not match");f=d,p++}w++}else if(o.substring(w,w+s.length)===s)w+=s.length,c[d]=!0,d++;else{if(o.substring(w,w+l.length)!==l)throw new te("illegal character encountered: "+o.substring(w));w+=l.length,c[d]=!1,d++}if(d>f){if(-1===h)h=d-f;else if(d-f!==h)throw new te("row lengths do not match");p++}const E=new Lt(h,p);for(let A=0;A<d;A++)c[A]&&E.set(Math.floor(A%h),Math.floor(A/h));return E}get(o,s){const l=s*this.rowSize+Math.floor(o/32);return 0!=(this.bits[l]>>>(31&o)&1)}set(o,s){const l=s*this.rowSize+Math.floor(o/32);this.bits[l]|=1<<(31&o)&4294967295}unset(o,s){const l=s*this.rowSize+Math.floor(o/32);this.bits[l]&=~(1<<(31&o)&4294967295)}flip(o,s){const l=s*this.rowSize+Math.floor(o/32);this.bits[l]^=1<<(31&o)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new te("input matrix dimensions do not match");const s=new it(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let d=0,f=this.height;d<f;d++){const h=d*l,p=o.getRow(d,s).getBitArray();for(let w=0;w<l;w++)c[h+w]^=p[w]}}clear(){const o=this.bits,s=o.length;for(let l=0;l<s;l++)o[l]=0}setRegion(o,s,l,c){if(s<0||o<0)throw new te("Left and top must be nonnegative");if(c<1||l<1)throw new te("Height and width must be at least 1");const d=o+l,f=s+c;if(f>this.height||d>this.width)throw new te("The region must fit inside the matrix");const h=this.rowSize,p=this.bits;for(let w=s;w<f;w++){const E=w*h;for(let A=o;A<d;A++)p[E+Math.floor(A/32)]|=1<<(31&A)&4294967295}}getRow(o,s){null==s||s.getSize()<this.width?s=new it(this.width):s.clear();const l=this.rowSize,c=this.bits,d=o*l;for(let f=0;f<l;f++)s.setBulk(32*f,c[d+f]);return s}setRow(o,s){rt.arraycopy(s.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),s=this.getHeight();let l=new it(o),c=new it(o);for(let d=0,f=Math.floor((s+1)/2);d<f;d++)l=this.getRow(d,l),c=this.getRow(s-1-d,c),l.reverse(),c.reverse(),this.setRow(d,c),this.setRow(s-1-d,l)}getEnclosingRectangle(){const s=this.height,l=this.rowSize,c=this.bits;let d=this.width,f=s,h=-1,p=-1;for(let w=0;w<s;w++)for(let E=0;E<l;E++){const A=c[w*l+E];if(0!==A){if(w<f&&(f=w),w>p&&(p=w),32*E<d){let I=0;for(;!(A<<31-I&4294967295);)I++;32*E+I<d&&(d=32*E+I)}if(32*E+31>h){let I=31;for(;!(A>>>I);)I--;32*E+I>h&&(h=32*E+I)}}}return h<d||p<f?null:Int32Array.from([d,f,h-d+1,p-f+1])}getTopLeftOnBit(){const o=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&0===s[l];)l++;if(l===s.length)return null;const c=l/o;let d=l%o*32;const f=s[l];let h=0;for(;!(f<<31-h&4294967295);)h++;return d+=h,Int32Array.from([d,c])}getBottomRightOnBit(){const o=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&0===s[l];)l--;if(l<0)return null;const c=Math.floor(l/o);let d=32*Math.floor(l%o);const f=s[l];let h=31;for(;!(f>>>h);)h--;return d+=h,Int32Array.from([d,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){return o instanceof Lt&&this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&It.equals(this.bits,o.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+It.hashCode(this.bits),o}toString(o="X ",s="  ",l="\n"){return this.buildToString(o,s,l)}buildToString(o,s,l){let c=new et;for(let d=0,f=this.height;d<f;d++){for(let h=0,p=this.width;h<p;h++)c.append(this.get(h,d)?o:s);c.append(l)}return c.toString()}clone(){return new Lt(this.width,this.height,this.rowSize,this.bits.slice())}}let U=(()=>{class x extends Qt{static getNotFoundInstance(){return new x}}return x.kind="NotFoundException",x})();class ut extends hs{constructor(o){super(o),this.luminances=ut.EMPTY,this.buckets=new Int32Array(ut.LUMINANCE_BUCKETS)}getBlackRow(o,s){const l=this.getLuminanceSource(),c=l.getWidth();null==s||s.getSize()<c?s=new it(c):s.clear(),this.initArrays(c);const d=l.getRow(o,this.luminances),f=this.buckets;for(let p=0;p<c;p++)f[(255&d[p])>>ut.LUMINANCE_SHIFT]++;const h=ut.estimateBlackPoint(f);if(c<3)for(let p=0;p<c;p++)(255&d[p])<h&&s.set(p);else{let p=255&d[0],w=255&d[1];for(let E=1;E<c-1;E++){const A=255&d[E+1];(4*w-p-A)/2<h&&s.set(E),p=w,w=A}}return s}getBlackMatrix(){const o=this.getLuminanceSource(),s=o.getWidth(),l=o.getHeight(),c=new Lt(s,l);this.initArrays(s);const d=this.buckets;for(let p=1;p<5;p++){const w=Math.floor(l*p/5),E=o.getRow(w,this.luminances),A=Math.floor(4*s/5);for(let I=Math.floor(s/5);I<A;I++)d[(255&E[I])>>ut.LUMINANCE_SHIFT]++}const f=ut.estimateBlackPoint(d),h=o.getMatrix();for(let p=0;p<l;p++){const w=p*s;for(let E=0;E<s;E++)(255&h[w+E])<f&&c.set(E,p)}return c}createBinarizer(o){return new ut(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const s=this.buckets;for(let l=0;l<ut.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(o){const s=o.length;let l=0,c=0,d=0;for(let E=0;E<s;E++)o[E]>d&&(c=E,d=o[E]),o[E]>l&&(l=o[E]);let f=0,h=0;for(let E=0;E<s;E++){const A=E-c,I=o[E]*A*A;I>h&&(f=E,h=I)}if(c>f){const E=c;c=f,f=E}if(f-c<=s/16)throw new U;let p=f-1,w=-1;for(let E=f-1;E>c;E--){const A=E-c,I=A*A*(f-E)*(l-o[E]);I>w&&(p=E,w=I)}return p<<ut.LUMINANCE_SHIFT}}ut.LUMINANCE_BITS=5,ut.LUMINANCE_SHIFT=8-ut.LUMINANCE_BITS,ut.LUMINANCE_BUCKETS=1<<ut.LUMINANCE_BITS,ut.EMPTY=Uint8ClampedArray.from([0]);class Te extends ut{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const o=this.getLuminanceSource(),s=o.getWidth(),l=o.getHeight();if(s>=Te.MINIMUM_DIMENSION&&l>=Te.MINIMUM_DIMENSION){const c=o.getMatrix();let d=s>>Te.BLOCK_SIZE_POWER;s&Te.BLOCK_SIZE_MASK&&d++;let f=l>>Te.BLOCK_SIZE_POWER;l&Te.BLOCK_SIZE_MASK&&f++;const h=Te.calculateBlackPoints(c,d,f,s,l),p=new Lt(s,l);Te.calculateThresholdForBlock(c,d,f,s,l,h,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new Te(o)}static calculateThresholdForBlock(o,s,l,c,d,f,h){const p=d-Te.BLOCK_SIZE,w=c-Te.BLOCK_SIZE;for(let E=0;E<l;E++){let A=E<<Te.BLOCK_SIZE_POWER;A>p&&(A=p);const I=Te.cap(E,2,l-3);for(let S=0;S<s;S++){let b=S<<Te.BLOCK_SIZE_POWER;b>w&&(b=w);const M=Te.cap(S,2,s-3);let O=0;for(let W=-2;W<=2;W++){const X=f[I+W];O+=X[M-2]+X[M-1]+X[M]+X[M+1]+X[M+2]}Te.thresholdBlock(o,b,A,O/25,c,h)}}}static cap(o,s,l){return o<s?s:o>l?l:o}static thresholdBlock(o,s,l,c,d,f){for(let h=0,p=l*d+s;h<Te.BLOCK_SIZE;h++,p+=d)for(let w=0;w<Te.BLOCK_SIZE;w++)(255&o[p+w])<=c&&f.set(s+w,l+h)}static calculateBlackPoints(o,s,l,c,d){const f=d-Te.BLOCK_SIZE,h=c-Te.BLOCK_SIZE,p=new Array(l);for(let w=0;w<l;w++){p[w]=new Int32Array(s);let E=w<<Te.BLOCK_SIZE_POWER;E>f&&(E=f);for(let A=0;A<s;A++){let I=A<<Te.BLOCK_SIZE_POWER;I>h&&(I=h);let S=0,b=255,M=0;for(let N=0,W=E*c+I;N<Te.BLOCK_SIZE;N++,W+=c){for(let X=0;X<Te.BLOCK_SIZE;X++){const B=255&o[W+X];S+=B,B<b&&(b=B),B>M&&(M=B)}if(M-b>Te.MIN_DYNAMIC_RANGE)for(N++,W+=c;N<Te.BLOCK_SIZE;N++,W+=c)for(let X=0;X<Te.BLOCK_SIZE;X++)S+=255&o[W+X]}let O=S>>2*Te.BLOCK_SIZE_POWER;if(M-b<=Te.MIN_DYNAMIC_RANGE&&(O=b/2,w>0&&A>0)){const N=(p[w-1][A]+2*p[w][A-1]+p[w-1][A-1])/4;b<N&&(O=N)}p[w][A]=O}}return p}}Te.BLOCK_SIZE_POWER=3,Te.BLOCK_SIZE=1<<Te.BLOCK_SIZE_POWER,Te.BLOCK_SIZE_MASK=Te.BLOCK_SIZE-1,Te.MINIMUM_DIMENSION=5*Te.BLOCK_SIZE,Te.MIN_DYNAMIC_RANGE=24;class ci{constructor(o,s){this.width=o,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,s,l,c){throw new ir("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ir("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ir("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let s=new et;for(let l=0;l<this.height;l++){const c=this.getRow(l,o);for(let d=0;d<this.width;d++){const f=255&c[d];let h;h=f<64?"#":f<128?"+":f<192?".":" ",s.append(h)}s.append("\n")}return s.toString()}}class lt extends ci{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,s){const l=this.delegate.getRow(o,s),c=this.getWidth();for(let d=0;d<c;d++)l[d]=255-(255&l[d]);return l}getMatrix(){const o=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let c=0;c<s;c++)l[c]=255-(255&o[c]);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(o,s,l,c){return new lt(this.delegate.crop(o,s,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new lt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new lt(this.delegate.rotateCounterClockwise45())}}class or extends ci{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=or.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const s=o.getContext("2d").getImageData(0,0,o.width,o.height);return or.toGrayscaleBuffer(s.data,o.width,o.height)}static toGrayscaleBuffer(o,s,l){const c=new Uint8ClampedArray(s*l);for(let d=0,f=0,h=o.length;d<h;d+=4,f++){let p;p=0===o[d+3]?255:306*o[d]+601*o[d+1]+117*o[d+2]+512>>10,c[f]=p}return c}getRow(o,s){if(o<0||o>=this.getHeight())throw new te("Requested row is outside the image: "+o);const l=this.getWidth(),c=o*l;return null===s?s=this.buffer.slice(c,c+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(c,c+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,s,l,c){return super.crop(o,s,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const s=this.getTempCanvasElement(),l=s.getContext("2d"),c=o*or.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*d+Math.abs(Math.sin(c))*f),p=Math.ceil(Math.abs(Math.sin(c))*d+Math.abs(Math.cos(c))*f);return s.width=h,s.height=p,l.translate(h/2,p/2),l.rotate(c),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=or.makeBufferFromCanvasImageData(s),this}invert(){return new lt(this)}}or.DEGREE_TO_RADIANS=Math.PI/180;class Ba{constructor(o,s,l){this.deviceId=o,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var tn=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(x,o,s,l){return new(s||(s=Promise))(function(d,f){function h(E){try{w(l.next(E))}catch(A){f(A)}}function p(E){try{w(l.throw(E))}catch(A){f(A)}}function w(E){E.done?d(E.value):function c(d){return d instanceof s?d:new s(function(f){f(d)})}(E.value).then(h,p)}w((l=l.apply(x,o||[])).next())})};class jr{constructor(o,s=500,l){this.reader=o,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return tn(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of o){const c="video"===l.kind?"videoinput":l.kind;"videoinput"===c&&s.push({deviceId:l.deviceId||l.id,label:l.label||`Video device ${s.length+1}`,kind:c,groupId:l.groupId})}return s})}getVideoInputDevices(){return tn(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Ba(s.deviceId,s.label))})}findDeviceById(o){return tn(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===o):null})}decodeFromInputVideoDevice(o,s){return tn(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,s)})}decodeOnceFromVideoDevice(o,s){return tn(this,void 0,void 0,function*(){let l;this.reset(),l=o?{deviceId:{exact:o}}:{facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(o,s){return tn(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(o,s){return tn(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(o,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(o,s,l){return tn(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,s,l)})}decodeFromVideoDevice(o,s,l){return tn(this,void 0,void 0,function*(){let c;c=o?{deviceId:{exact:o}}:{facingMode:"environment"};const d={video:c};return yield this.decodeFromConstraints(d,s,l)})}decodeFromConstraints(o,s,l){return tn(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(c,s,l)})}decodeFromStream(o,s,l){return tn(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(o,s);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,s){return tn(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,o),this.videoElement=l,this.stream=o,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(o){return new Promise((s,l)=>this.playVideoOnLoad(o,()=>s()))}playVideoOnLoad(o,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",s),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return tn(this,void 0,void 0,function*(){if(this.isVideoPlaying(o))console.warn("Trying to play video that is already playing.");else try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,s){const l=document.getElementById(o);if(!l)throw new gn(`element with id '${o}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new gn(`element with id '${o}' must be an ${s} element`);return l}decodeFromImage(o,s){if(!o&&!s)throw new gn("either imageElement with a src set or an url must be provided");return s&&!o?this.decodeFromImageUrl(s):this.decodeFromImageElement(o)}decodeFromVideo(o,s){if(!o&&!s)throw new gn("Either an element with a src set or an URL must be provided");return s&&!o?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,s,l){if(void 0===o&&void 0===s)throw new gn("Either an element with a src set or an URL must be provided");return s&&!o?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(o,l)}decodeFromImageElement(o){if(!o)throw new gn("An image element must be provided.");this.reset();const s=this.prepareImageElement(o);let l;return this.imageElement=s,l=this.isImageLoaded(s)?this.decodeOnce(s,!1,!0):this._decodeOnLoadImage(s),l}decodeFromVideoElement(o){const s=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(o,s){const l=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(o){if(!o)throw new gn("A video element must be provided.");this.reset();const s=this.prepareVideoElement(o);return this.videoElement=s,s}decodeFromImageUrl(o){if(!o)throw new gn("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=o,l}decodeFromVideoUrl(o){if(!o)throw new gn("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=o,l}decodeFromVideoUrlContinuously(o,s){if(!o)throw new gn("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,s);return l.src=o,c}_decodeOnLoadImage(o){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(s,l),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return tn(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,s){return tn(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,s)})}isImageLoaded(o){return!(!o.complete||0===o.naturalWidth)}prepareImageElement(o){let s;return typeof o>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),"string"==typeof o&&(s=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(s=o),s}prepareVideoElement(o){let s;return!o&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),"string"==typeof o&&(s=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(s=o),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(o,s=!0,l=!0){this._stopAsyncDecode=!1;const c=(d,f)=>{if(this._stopAsyncDecode)return f(new U("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{d(this.decode(o))}catch(h){if(s&&h instanceof U||(h instanceof St||h instanceof q)&&l)return setTimeout(c,this._timeBetweenDecodingAttempts,d,f);f(h)}};return new Promise((d,f)=>c(d,f))}decodeContinuously(o,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const c=this.decode(o);s(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){s(null,c),(c instanceof St||c instanceof q||c instanceof U)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(o){const s=this.createBinaryBitmap(o);return this.decodeBitmap(s)}_isHTMLVideoElement(o){return 0!==o.videoWidth}drawFrameOnCanvas(o,s,l){s||(s={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(o,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(o,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(o,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const l=this.getCaptureCanvas(o),c=new or(l),d=new Te(c);return new rr(d)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const s=this.createCaptureCanvas(o);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,c;return typeof o<"u"&&(o instanceof HTMLVideoElement?(l=o.videoWidth,c=o.videoHeight):o instanceof HTMLImageElement&&(l=o.naturalWidth||o.width,c=o.naturalHeight||o.height)),s.style.width=l+"px",s.style.height=c+"px",s.width=l,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,s){try{o.srcObject=s}catch{o.src=URL.createObjectURL(s)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class ft{constructor(o,s,l=(null==s?0:8*s.length),c,d,f=rt.currentTimeMillis()){this.text=o,this.rawBytes=s,this.numBits=l,this.resultPoints=c,this.format=d,this.timestamp=f,this.text=o,this.rawBytes=s,this.numBits=null==l?null==s?0:8*s.length:l,this.resultPoints=c,this.format=d,this.resultMetadata=null,this.timestamp=null==f?rt.currentTimeMillis():f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,s){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(o,s)}putAllMetadata(o){null!==o&&(this.resultMetadata=null===this.resultMetadata?o:new Map(o))}addResultPoints(o){const s=this.resultPoints;if(null===s)this.resultPoints=o;else if(null!==o&&o.length>0){const l=new Array(s.length+o.length);rt.arraycopy(s,0,l,0,s.length),rt.arraycopy(o,0,l,s.length,o.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ni=(()=>{return(x=Ni||(Ni={}))[x.AZTEC=0]="AZTEC",x[x.CODABAR=1]="CODABAR",x[x.CODE_39=2]="CODE_39",x[x.CODE_93=3]="CODE_93",x[x.CODE_128=4]="CODE_128",x[x.DATA_MATRIX=5]="DATA_MATRIX",x[x.EAN_8=6]="EAN_8",x[x.EAN_13=7]="EAN_13",x[x.ITF=8]="ITF",x[x.MAXICODE=9]="MAXICODE",x[x.PDF_417=10]="PDF_417",x[x.QR_CODE=11]="QR_CODE",x[x.RSS_14=12]="RSS_14",x[x.RSS_EXPANDED=13]="RSS_EXPANDED",x[x.UPC_A=14]="UPC_A",x[x.UPC_E=15]="UPC_E",x[x.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",Ni;var x})(),le=Ni,wt=(()=>{return(x=wt||(wt={}))[x.OTHER=0]="OTHER",x[x.ORIENTATION=1]="ORIENTATION",x[x.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",x[x.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",x[x.ISSUE_NUMBER=4]="ISSUE_NUMBER",x[x.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",x[x.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",x[x.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",x[x.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",x[x.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",x[x.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",wt;var x})(),Fe=wt;class Ri{constructor(o,s,l,c,d=-1,f=-1){this.rawBytes=o,this.text=s,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=null==o?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Me{exp(o){return this.expTable[o]}log(o){if(0===o)throw new te;return this.logTable[o]}static addOrSubtract(o,s){return o^s}}class Kt{constructor(o,s){if(0===s.length)throw new te;this.field=o;const l=s.length;if(l>1&&0===s[0]){let c=1;for(;c<l&&0===s[c];)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),rt.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(0===o)return this.getCoefficient(0);const s=this.coefficients;let l;if(1===o){l=0;for(let f=0,h=s.length;f!==h;f++)l=Me.addOrSubtract(l,s[f]);return l}l=s[0];const c=s.length,d=this.field;for(let f=1;f<c;f++)l=Me.addOrSubtract(d.multiply(o,l),s[f]);return l}addOrSubtract(o){if(!this.field.equals(o.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let s=this.coefficients,l=o.coefficients;if(s.length>l.length){const f=s;s=l,l=f}let c=new Int32Array(l.length);const d=l.length-s.length;rt.arraycopy(l,0,c,0,d);for(let f=d;f<l.length;f++)c[f]=Me.addOrSubtract(s[f-d],l[f]);return new Kt(this.field,c)}multiply(o){if(!this.field.equals(o.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,c=o.coefficients,d=c.length,f=new Int32Array(l+d-1),h=this.field;for(let p=0;p<l;p++){const w=s[p];for(let E=0;E<d;E++)f[p+E]=Me.addOrSubtract(f[p+E],h.multiply(w,c[E]))}return new Kt(h,f)}multiplyScalar(o){if(0===o)return this.field.getZero();if(1===o)return this;const s=this.coefficients.length,l=this.field,c=new Int32Array(s),d=this.coefficients;for(let f=0;f<s;f++)c[f]=l.multiply(d[f],o);return new Kt(l,c)}multiplyByMonomial(o,s){if(o<0)throw new te;if(0===s)return this.field.getZero();const l=this.coefficients,c=l.length,d=new Int32Array(c+o),f=this.field;for(let h=0;h<c;h++)d[h]=f.multiply(l[h],s);return new Kt(f,d)}divide(o){if(!this.field.equals(o.field))throw new te("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new te("Divide by 0");const s=this.field;let l=s.getZero(),c=this;const d=o.getCoefficient(o.getDegree()),f=s.inverse(d);for(;c.getDegree()>=o.getDegree()&&!c.isZero();){const h=c.getDegree()-o.getDegree(),p=s.multiply(c.getCoefficient(c.getDegree()),f),w=o.multiplyByMonomial(h,p),E=s.buildMonomial(h,p);l=l.addOrSubtract(E),c=c.addOrSubtract(w)}return[l,c]}toString(){let o="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(0!==l){if(l<0?(o+=" - ",l=-l):o.length>0&&(o+=" + "),0===s||1!==l){const c=this.field.log(l);0===c?o+="1":1===c?o+="a":(o+="a^",o+=c)}0!==s&&(1===s?o+="x":(o+="x^",o+=s))}}return o}}let Ua=(()=>{class x extends Qt{}return x.kind="ArithmeticException",x})();class Ge extends Me{constructor(o,s,l){super(),this.primitive=o,this.size=s,this.generatorBase=l;const c=new Int32Array(s);let d=1;for(let h=0;h<s;h++)c[h]=d,d*=2,d>=s&&(d^=o,d&=s-1);this.expTable=c;const f=new Int32Array(s);for(let h=0;h<s-1;h++)f[c[h]]=h;this.logTable=f,this.zero=new Kt(this,Int32Array.from([0])),this.one=new Kt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,s){if(o<0)throw new te;if(0===s)return this.zero;const l=new Int32Array(o+1);return l[0]=s,new Kt(this,l)}inverse(o){if(0===o)throw new Ua;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,s){return 0===o||0===s?0:this.expTable[(this.logTable[o]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+De.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Ge.AZTEC_DATA_12=new Ge(4201,4096,1),Ge.AZTEC_DATA_10=new Ge(1033,1024,1),Ge.AZTEC_DATA_6=new Ge(67,64,1),Ge.AZTEC_PARAM=new Ge(19,16,1),Ge.QR_CODE_FIELD_256=new Ge(285,256,0),Ge.DATA_MATRIX_FIELD_256=new Ge(301,256,1),Ge.AZTEC_DATA_8=Ge.DATA_MATRIX_FIELD_256,Ge.MAXICODE_FIELD_64=Ge.AZTEC_DATA_6;let so=(()=>{class x extends Qt{}return x.kind="ReedSolomonException",x})(),Er=(()=>{class x extends Qt{}return x.kind="IllegalStateException",x})();class ao{constructor(o){this.field=o}decode(o,s){const l=this.field,c=new Kt(l,o),d=new Int32Array(s);let f=!0;for(let S=0;S<s;S++){const b=c.evaluateAt(l.exp(S+l.getGeneratorBase()));d[d.length-1-S]=b,0!==b&&(f=!1)}if(f)return;const h=new Kt(l,d),p=this.runEuclideanAlgorithm(l.buildMonomial(s,1),h,s),E=p[1],A=this.findErrorLocations(p[0]),I=this.findErrorMagnitudes(E,A);for(let S=0;S<A.length;S++){const b=o.length-1-l.log(A[S]);if(b<0)throw new so("Bad error location");o[b]=Ge.addOrSubtract(o[b],I[S])}}runEuclideanAlgorithm(o,s,l){if(o.getDegree()<s.getDegree()){const S=o;o=s,s=S}const c=this.field;let d=o,f=s,h=c.getZero(),p=c.getOne();for(;f.getDegree()>=(l/2|0);){let S=d,b=h;if(d=f,h=p,d.isZero())throw new so("r_{i-1} was zero");f=S;let M=c.getZero();const O=d.getCoefficient(d.getDegree()),N=c.inverse(O);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){const W=f.getDegree()-d.getDegree(),X=c.multiply(f.getCoefficient(f.getDegree()),N);M=M.addOrSubtract(c.buildMonomial(W,X)),f=f.addOrSubtract(d.multiplyByMonomial(W,X))}if(p=M.multiply(h).addOrSubtract(b),f.getDegree()>=d.getDegree())throw new Er("Division algorithm failed to reduce polynomial?")}const w=p.getCoefficient(0);if(0===w)throw new so("sigmaTilde(0) was zero");const E=c.inverse(w);return[p.multiplyScalar(E),f.multiplyScalar(E)]}findErrorLocations(o){const s=o.getDegree();if(1===s)return Int32Array.from([o.getCoefficient(1)]);const l=new Int32Array(s);let c=0;const d=this.field;for(let f=1;f<d.getSize()&&c<s;f++)0===o.evaluateAt(f)&&(l[c]=d.inverse(f),c++);if(c!==s)throw new so("Error locator degree does not match number of roots");return l}findErrorMagnitudes(o,s){const l=s.length,c=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){const h=d.inverse(s[f]);let p=1;for(let w=0;w<l;w++)if(f!==w){const E=d.multiply(s[w],h);p=d.multiply(p,1&E?-2&E:1|E)}c[f]=d.multiply(o.evaluateAt(h),d.inverse(p)),0!==d.getGeneratorBase()&&(c[f]=d.multiply(c[f],h))}return c}}var zt=(()=>{return(x=zt||(zt={}))[x.UPPER=0]="UPPER",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.DIGIT=3]="DIGIT",x[x.PUNCT=4]="PUNCT",x[x.BINARY=5]="BINARY",zt;var x})();let ja=(()=>{class x{decode(s){this.ddata=s;let l=s.getBits(),c=this.extractBits(l),d=this.correctBits(c),f=x.convertBoolArrayToByteArray(d),h=x.getEncodedData(d),p=new Ri(f,h,null,null);return p.setNumBits(d.length),p}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let l=s.length,c=zt.UPPER,d=zt.UPPER,f="",h=0;for(;h<l;)if(d===zt.BINARY){if(l-h<5)break;let p=x.readCode(s,h,5);if(h+=5,0===p){if(l-h<11)break;p=x.readCode(s,h,11)+31,h+=11}for(let w=0;w<p;w++){if(l-h<8){h=l;break}const E=x.readCode(s,h,8);f+=Ce.castAsNonUtf8Char(E),h+=8}d=c}else{let p=d===zt.DIGIT?4:5;if(l-h<p)break;let w=x.readCode(s,h,p);h+=p;let E=x.getCharacter(d,w);E.startsWith("CTRL_")?(c=d,d=x.getTable(E.charAt(5)),"L"===E.charAt(6)&&(c=d)):(f+=E,d=c)}return f}static getTable(s){switch(s){case"L":return zt.LOWER;case"P":return zt.PUNCT;case"M":return zt.MIXED;case"D":return zt.DIGIT;case"B":return zt.BINARY;default:return zt.UPPER}}static getCharacter(s,l){switch(s){case zt.UPPER:return x.UPPER_TABLE[l];case zt.LOWER:return x.LOWER_TABLE[l];case zt.MIXED:return x.MIXED_TABLE[l];case zt.PUNCT:return x.PUNCT_TABLE[l];case zt.DIGIT:return x.DIGIT_TABLE[l];default:throw new Er("Bad table")}}correctBits(s){let l,c;this.ddata.getNbLayers()<=2?(c=6,l=Ge.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,l=Ge.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,l=Ge.AZTEC_DATA_10):(c=12,l=Ge.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=s.length/c;if(f<d)throw new q;let h=s.length%c,p=new Int32Array(f);for(let S=0;S<f;S++,h+=c)p[S]=x.readCode(s,h,c);try{new ao(l).decode(p,f-d)}catch(S){throw new q(S)}let w=(1<<c)-1,E=0;for(let S=0;S<d;S++){let b=p[S];if(0===b||b===w)throw new q;(1===b||b===w-1)&&E++}let A=new Array(d*c-E),I=0;for(let S=0;S<d;S++){let b=p[S];if(1===b||b===w-1)A.fill(b>1,I,I+c-1),I+=c-1;else for(let M=c-1;M>=0;--M)A[I++]=0!=(b&1<<M)}return A}extractBits(s){let l=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(l?11:14)+4*c,f=new Int32Array(d),h=new Array(this.totalBitsInLayer(c,l));if(l)for(let p=0;p<f.length;p++)f[p]=p;else{let p=d+1+2*De.truncDivision(De.truncDivision(d,2)-1,15),w=d/2,E=De.truncDivision(p,2);for(let A=0;A<w;A++){let I=A+De.truncDivision(A,15);f[w-A-1]=E-I-1,f[w+A]=E+I+1}}for(let p=0,w=0;p<c;p++){let E=4*(c-p)+(l?9:12),A=2*p,I=d-1-A;for(let S=0;S<E;S++){let b=2*S;for(let M=0;M<2;M++)h[w+b+M]=s.get(f[A+M],f[A+S]),h[w+2*E+b+M]=s.get(f[A+S],f[I-M]),h[w+4*E+b+M]=s.get(f[I-M],f[I-S]),h[w+6*E+b+M]=s.get(f[I-S],f[A+M])}w+=8*E}return h}static readCode(s,l,c){let d=0;for(let f=l;f<l+c;f++)d<<=1,s[f]&&(d|=1);return d}static readByte(s,l){let c=s.length-l;return c>=8?x.readCode(s,l,8):x.readCode(s,l,c)<<8-c}static convertBoolArrayToByteArray(s){let l=new Uint8Array((s.length+7)/8);for(let c=0;c<l.length;c++)l[c]=x.readByte(s,8*c);return l}totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}return x.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],x.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],x.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],x.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],x.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],x})();class We{constructor(){}static round(o){return NaN===o?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,s,l,c){const d=o-l,f=s-c;return Math.sqrt(d*d+f*f)}static sum(o){let s=0;for(let l=0,c=o.length;l!==c;l++)s+=o[l];return s}}class ps{static floatToIntBits(o){return o}}ps.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ie{constructor(o,s){this.x=o,this.y=s}getX(){return this.x}getY(){return this.y}equals(o){return o instanceof ie&&this.x===o.x&&this.y===o.y}hashCode(){return 31*ps.floatToIntBits(this.x)+ps.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const s=this.distance(o[0],o[1]),l=this.distance(o[1],o[2]),c=this.distance(o[0],o[2]);let d,f,h;if(l>=s&&l>=c?(f=o[0],d=o[1],h=o[2]):c>=l&&c>=s?(f=o[1],d=o[0],h=o[2]):(f=o[2],d=o[0],h=o[1]),this.crossProductZ(d,f,h)<0){const p=d;d=h,h=p}o[0]=d,o[1]=f,o[2]=h}static distance(o,s){return We.distance(o.x,o.y,s.x,s.y)}static crossProductZ(o,s,l){const c=s.x,d=s.y;return(l.x-c)*(o.y-d)-(l.y-d)*(o.x-c)}}class lo{constructor(o,s){this.bits=o,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Zc extends lo{constructor(o,s,l,c,d){super(o,s),this.compact=l,this.nbDatablocks=c,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let Oi=(()=>{class x{constructor(s,l,c,d){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),null==l&&(l=x.INIT_SIZE),null==c&&(c=s.getWidth()/2|0),null==d&&(d=s.getHeight()/2|0);const f=l/2|0;if(this.leftInit=c-f,this.rightInit=c+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let s=this.leftInit,l=this.rightInit,c=this.upInit,d=this.downInit,f=!1,h=!0,p=!1,w=!1,E=!1,A=!1,I=!1;const S=this.width,b=this.height;for(;h;){h=!1;let M=!0;for(;(M||!w)&&l<S;)M=this.containsBlackPoint(c,d,l,!1),M?(l++,h=!0,w=!0):w||l++;if(l>=S){f=!0;break}let O=!0;for(;(O||!E)&&d<b;)O=this.containsBlackPoint(s,l,d,!0),O?(d++,h=!0,E=!0):E||d++;if(d>=b){f=!0;break}let N=!0;for(;(N||!A)&&s>=0;)N=this.containsBlackPoint(c,d,s,!1),N?(s--,h=!0,A=!0):A||s--;if(s<0){f=!0;break}let W=!0;for(;(W||!I)&&c>=0;)W=this.containsBlackPoint(s,l,c,!0),W?(c--,h=!0,I=!0):I||c--;if(c<0){f=!0;break}h&&(p=!0)}if(!f&&p){const M=l-s;let O=null;for(let B=1;null===O&&B<M;B++)O=this.getBlackPointOnSegment(s,d-B,s+B,d);if(null==O)throw new U;let N=null;for(let B=1;null===N&&B<M;B++)N=this.getBlackPointOnSegment(s,c+B,s+B,c);if(null==N)throw new U;let W=null;for(let B=1;null===W&&B<M;B++)W=this.getBlackPointOnSegment(l,c+B,l-B,c);if(null==W)throw new U;let X=null;for(let B=1;null===X&&B<M;B++)X=this.getBlackPointOnSegment(l,d-B,l-B,d);if(null==X)throw new U;return this.centerEdges(X,O,W,N)}throw new U}getBlackPointOnSegment(s,l,c,d){const f=We.round(We.distance(s,l,c,d)),h=(c-s)/f,p=(d-l)/f,w=this.image;for(let E=0;E<f;E++){const A=We.round(s+E*h),I=We.round(l+E*p);if(w.get(A,I))return new ie(A,I)}return null}centerEdges(s,l,c,d){const f=s.getX(),h=s.getY(),p=l.getX(),w=l.getY(),E=c.getX(),A=c.getY(),I=d.getX(),S=d.getY(),b=x.CORR;return f<this.width/2?[new ie(I-b,S+b),new ie(p+b,w+b),new ie(E-b,A-b),new ie(f+b,h-b)]:[new ie(I+b,S+b),new ie(p+b,w-b),new ie(E-b,A+b),new ie(f-b,h-b)]}containsBlackPoint(s,l,c,d){const f=this.image;if(d){for(let h=s;h<=l;h++)if(f.get(h,c))return!0}else for(let h=s;h<=l;h++)if(f.get(c,h))return!0;return!1}}return x.INIT_SIZE=10,x.CORR=1,x})();class Va{static checkAndNudgePoints(o,s){const l=o.getWidth(),c=o.getHeight();let d=!0;for(let f=0;f<s.length&&d;f+=2){const h=Math.floor(s[f]),p=Math.floor(s[f+1]);if(h<-1||h>l||p<-1||p>c)throw new U;d=!1,-1===h?(s[f]=0,d=!0):h===l&&(s[f]=l-1,d=!0),-1===p?(s[f+1]=0,d=!0):p===c&&(s[f+1]=c-1,d=!0)}d=!0;for(let f=s.length-2;f>=0&&d;f-=2){const h=Math.floor(s[f]),p=Math.floor(s[f+1]);if(h<-1||h>l||p<-1||p>c)throw new U;d=!1,-1===h?(s[f]=0,d=!0):h===l&&(s[f]=l-1,d=!0),-1===p?(s[f+1]=0,d=!0):p===c&&(s[f+1]=c-1,d=!0)}}}class In{constructor(o,s,l,c,d,f,h,p,w){this.a11=o,this.a21=s,this.a31=l,this.a12=c,this.a22=d,this.a32=f,this.a13=h,this.a23=p,this.a33=w}static quadrilateralToQuadrilateral(o,s,l,c,d,f,h,p,w,E,A,I,S,b,M,O){const N=In.quadrilateralToSquare(o,s,l,c,d,f,h,p);return In.squareToQuadrilateral(w,E,A,I,S,b,M,O).times(N)}transformPoints(o){const s=o.length,l=this.a11,c=this.a12,d=this.a13,f=this.a21,h=this.a22,p=this.a23,w=this.a31,E=this.a32,A=this.a33;for(let I=0;I<s;I+=2){const S=o[I],b=o[I+1],M=d*S+p*b+A;o[I]=(l*S+f*b+w)/M,o[I+1]=(c*S+h*b+E)/M}}transformPointsWithValues(o,s){const l=this.a11,c=this.a12,d=this.a13,f=this.a21,h=this.a22,p=this.a23,w=this.a31,E=this.a32,A=this.a33,I=o.length;for(let S=0;S<I;S++){const b=o[S],M=s[S],O=d*b+p*M+A;o[S]=(l*b+f*M+w)/O,s[S]=(c*b+h*M+E)/O}}static squareToQuadrilateral(o,s,l,c,d,f,h,p){const w=o-l+d-h,E=s-c+f-p;if(0===w&&0===E)return new In(l-o,d-l,o,c-s,f-c,s,0,0,1);{const A=l-d,I=h-d,S=c-f,b=p-f,M=A*b-I*S,O=(w*b-I*E)/M,N=(A*E-w*S)/M;return new In(l-o+O*l,h-o+N*h,o,c-s+O*c,p-s+N*p,s,O,N,1)}}static quadrilateralToSquare(o,s,l,c,d,f,h,p){return In.squareToQuadrilateral(o,s,l,c,d,f,h,p).buildAdjoint()}buildAdjoint(){return new In(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new In(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Ha extends Va{sampleGrid(o,s,l,c,d,f,h,p,w,E,A,I,S,b,M,O,N,W,X){const B=In.quadrilateralToQuadrilateral(c,d,f,h,p,w,E,A,I,S,b,M,O,N,W,X);return this.sampleGridWithTransform(o,s,l,B)}sampleGridWithTransform(o,s,l,c){if(s<=0||l<=0)throw new U;const d=new Lt(s,l),f=new Float32Array(2*s);for(let h=0;h<l;h++){const p=f.length,w=h+.5;for(let E=0;E<p;E+=2)f[E]=E/2+.5,f[E+1]=w;c.transformPoints(f),Va.checkAndNudgePoints(o,f);try{for(let E=0;E<p;E+=2)o.get(Math.floor(f[E]),Math.floor(f[E+1]))&&d.set(E/2,h)}catch{throw new U}}return d}}class Vr{static setGridSampler(o){Vr.gridSampler=o}static getInstance(){return Vr.gridSampler}}Vr.gridSampler=new Ha;class ln{constructor(o,s){this.x=o,this.y=s}toResultPoint(){return new ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qc{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(o){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Zc(c,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!(this.isValidPoint(o[0])&&this.isValidPoint(o[1])&&this.isValidPoint(o[2])&&this.isValidPoint(o[3])))throw new U;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(o[0],o[1],s),this.sampleLine(o[1],o[2],s),this.sampleLine(o[2],o[3],s),this.sampleLine(o[3],o[0],s)]);this.shift=this.getRotation(l,s);let c=0;for(let f=0;f<4;f++){let h=l[(this.shift+f)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let d=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=1+(d>>6),this.nbDataBlocks=1+(63&d)):(this.nbLayers=1+(d>>11),this.nbDataBlocks=1+(2047&d))}getRotation(o,s){let l=0;o.forEach((c,d,f)=>{l=(c>>s-2<<1)+(1&c)+(l<<3)}),l=((1&l)<<11)+(l>>1);for(let c=0;c<4;c++)if(De.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new U}getCorrectedParameterData(o,s){let l,c;s?(l=7,c=2):(l=10,c=4);let d=l-c,f=new Int32Array(l);for(let p=l-1;p>=0;--p)f[p]=15&o,o>>=4;try{new ao(Ge.AZTEC_PARAM).decode(f,d)}catch{throw new U}let h=0;for(let p=0;p<c;p++)h=(h<<4)+f[p];return h}getBullsEyeCorners(o){let s=o,l=o,c=o,d=o,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(s,f,1,-1),I=this.getFirstDifferent(l,f,1,1),S=this.getFirstDifferent(c,f,-1,1),b=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(b,A)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(A,I,S,b))break}s=A,l=I,c=S,d=b,f=!f}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new U;this.compact=5===this.nbCenterLayers;let h=new ie(s.getX()+.5,s.getY()-.5),p=new ie(l.getX()+.5,l.getY()+.5),w=new ie(c.getX()-.5,c.getY()+.5),E=new ie(d.getX()-.5,d.getY()-.5);return this.expandSquare([h,p,w,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,s,l,c;try{let h=new Oi(this.image).detect();o=h[0],s=h[1],l=h[2],c=h[3]}catch{let p=this.image.getWidth()/2,w=this.image.getHeight()/2;o=this.getFirstDifferent(new ln(p+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ln(p+7,w+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ln(p-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new ln(p-7,w-7),!1,-1,-1).toResultPoint()}let d=We.round((o.getX()+c.getX()+s.getX()+l.getX())/4),f=We.round((o.getY()+c.getY()+s.getY()+l.getY())/4);try{let h=new Oi(this.image,15,d,f).detect();o=h[0],s=h[1],l=h[2],c=h[3]}catch{o=this.getFirstDifferent(new ln(d+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ln(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ln(d-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new ln(d-7,f-7),!1,-1,-1).toResultPoint()}return d=We.round((o.getX()+c.getX()+s.getX()+l.getX())/4),f=We.round((o.getY()+c.getY()+s.getY()+l.getY())/4),new ln(d,f)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,s,l,c,d){let f=Vr.getInstance(),h=this.getDimension(),p=h/2-this.nbCenterLayers,w=h/2+this.nbCenterLayers;return f.sampleGrid(o,h,h,p,p,w,p,w,w,p,w,s.getX(),s.getY(),l.getX(),l.getY(),c.getX(),c.getY(),d.getX(),d.getY())}sampleLine(o,s,l){let c=0,d=this.distanceResultPoint(o,s),f=d/l,h=o.getX(),p=o.getY(),w=f*(s.getX()-o.getX())/d,E=f*(s.getY()-o.getY())/d;for(let A=0;A<l;A++)this.image.get(We.round(h+A*w),We.round(p+A*E))&&(c|=1<<l-A-1);return c}isWhiteOrBlackRectangle(o,s,l,c){o=new ln(o.getX()-3,o.getY()+3),s=new ln(s.getX()-3,s.getY()-3),l=new ln(l.getX()+3,l.getY()-3),c=new ln(c.getX()+3,c.getY()+3);let f=this.getColor(c,o);if(0===f)return!1;let h=this.getColor(o,s);return h===f&&(h=this.getColor(s,l),h===f)&&(h=this.getColor(l,c),h===f)}getColor(o,s){let l=this.distancePoint(o,s),c=(s.getX()-o.getX())/l,d=(s.getY()-o.getY())/l,f=0,h=o.getX(),p=o.getY(),w=this.image.get(o.getX(),o.getY()),E=Math.ceil(l);for(let I=0;I<E;I++)h+=c,p+=d,this.image.get(We.round(h),We.round(p))!==w&&f++;let A=f/l;return A>.1&&A<.9?0:A<=.1===w?1:-1}getFirstDifferent(o,s,l,c){let d=o.getX()+l,f=o.getY()+c;for(;this.isValid(d,f)&&this.image.get(d,f)===s;)d+=l,f+=c;for(d-=l,f-=c;this.isValid(d,f)&&this.image.get(d,f)===s;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===s;)f+=c;return f-=c,new ln(d,f)}expandSquare(o,s,l){let c=l/(2*s),d=o[0].getX()-o[2].getX(),f=o[0].getY()-o[2].getY(),h=(o[0].getX()+o[2].getX())/2,p=(o[0].getY()+o[2].getY())/2,w=new ie(h+c*d,p+c*f),E=new ie(h-c*d,p-c*f);return d=o[1].getX()-o[3].getX(),f=o[1].getY()-o[3].getY(),h=(o[1].getX()+o[3].getX())/2,p=(o[1].getY()+o[3].getY())/2,[w,new ie(h+c*d,p+c*f),E,new ie(h-c*d,p-c*f)]}isValid(o,s){return o>=0&&o<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(o){let s=We.round(o.getX()),l=We.round(o.getY());return this.isValid(s,l)}distancePoint(o,s){return We.distance(o.getX(),o.getY(),s.getX(),s.getY())}distanceResultPoint(o,s){return We.distance(o.getX(),o.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(De.truncDivision(this.nbLayers-4,8)+1)+15}}class Yn{decode(o,s=null){let l=null,c=new qc(o.getBlackMatrix()),d=null,f=null;try{let E=c.detectMirror(!1);d=E.getPoints(),this.reportFoundResultPoints(s,d),f=(new ja).decode(E)}catch(E){l=E}if(null==f)try{let E=c.detectMirror(!0);d=E.getPoints(),this.reportFoundResultPoints(s,d),f=(new ja).decode(E)}catch(E){throw l??E}let h=new ft(f.getText(),f.getRawBytes(),f.getNumBits(),d,le.AZTEC,rt.currentTimeMillis()),p=f.getByteSegments();null!=p&&h.putMetadata(Fe.BYTE_SEGMENTS,p);let w=f.getECLevel();return null!=w&&h.putMetadata(Fe.ERROR_CORRECTION_LEVEL,w),h}reportFoundResultPoints(o,s){if(null!=o){let l=o.get(at.NEED_RESULT_POINT_CALLBACK);null!=l&&s.forEach((c,d,f)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class _t{decode(o,s){try{return this.doDecode(o,s)}catch{if(s&&!0===s.get(at.TRY_HARDER)&&o.isRotateSupported()){const d=o.rotateCounterClockwise(),f=this.doDecode(d,s),h=f.getResultMetadata();let p=270;null!==h&&!0===h.get(Fe.ORIENTATION)&&(p+=h.get(Fe.ORIENTATION)%360),f.putMetadata(Fe.ORIENTATION,p);const w=f.getResultPoints();if(null!==w){const E=d.getHeight();for(let A=0;A<w.length;A++)w[A]=new ie(E-w[A].getY()-1,w[A].getX())}return f}throw new U}}reset(){}doDecode(o,s){const l=o.getWidth(),c=o.getHeight();let d=new it(l);const f=s&&!0===s.get(at.TRY_HARDER),h=Math.max(1,c>>(f?8:5));let p;p=f?c:15;const w=Math.trunc(c/2);for(let E=0;E<p;E++){const A=Math.trunc((E+1)/2),S=w+h*(0==(1&E)?A:-A);if(S<0||S>=c)break;try{d=o.getBlackRow(S,d)}catch{continue}for(let b=0;b<2;b++){if(1===b&&(d.reverse(),s&&!0===s.get(at.NEED_RESULT_POINT_CALLBACK))){const M=new Map;s.forEach((O,N)=>M.set(N,O)),M.delete(at.NEED_RESULT_POINT_CALLBACK),s=M}try{const M=this.decodeRow(S,d,s);if(1===b){M.putMetadata(Fe.ORIENTATION,180);const O=M.getResultPoints();null!==O&&(O[0]=new ie(l-O[0].getX()-1,O[0].getY()),O[1]=new ie(l-O[1].getX()-1,O[1].getY()))}return M}catch{}}}throw new U}static recordPattern(o,s,l){const c=l.length;for(let w=0;w<c;w++)l[w]=0;const d=o.getSize();if(s>=d)throw new U;let f=!o.get(s),h=0,p=s;for(;p<d;){if(o.get(p)!==f)l[h]++;else{if(++h===c)break;l[h]=1,f=!f}p++}if(h!==c&&(h!==c-1||p!==d))throw new U}static recordPatternInReverse(o,s,l){let c=l.length,d=o.get(s);for(;s>0&&c>=0;)o.get(--s)!==d&&(c--,d=!d);if(c>=0)throw new U;_t.recordPattern(o,s+1,l)}static patternMatchVariance(o,s,l){const c=o.length;let d=0,f=0;for(let w=0;w<c;w++)d+=o[w],f+=s[w];if(d<f)return Number.POSITIVE_INFINITY;const h=d/f;l*=h;let p=0;for(let w=0;w<c;w++){const E=o[w],A=s[w]*h,I=E>A?E-A:A-E;if(I>l)return Number.POSITIVE_INFINITY;p+=I}return p/d}}class Z extends _t{static findStartPattern(o){const s=o.getSize(),l=o.getNextSet(0);let c=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,h=!1;for(let w=l;w<s;w++)if(o.get(w)!==h)d[c]++;else{if(5===c){let E=Z.MAX_AVG_VARIANCE,A=-1;for(let I=Z.CODE_START_A;I<=Z.CODE_START_C;I++){const S=_t.patternMatchVariance(d,Z.CODE_PATTERNS[I],Z.MAX_INDIVIDUAL_VARIANCE);S<E&&(E=S,A=I)}if(A>=0&&o.isRange(Math.max(0,f-(w-f)/2),f,!1))return Int32Array.from([f,w,A]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[c-1]=0,d[c]=0,c--}else c++;d[c]=1,h=!h}throw new U}static decodeCode(o,s,l){_t.recordPattern(o,l,s);let c=Z.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<Z.CODE_PATTERNS.length;f++){const p=this.patternMatchVariance(s,Z.CODE_PATTERNS[f],Z.MAX_INDIVIDUAL_VARIANCE);p<c&&(c=p,d=f)}if(d>=0)return d;throw new U}decodeRow(o,s,l){const c=l&&!0===l.get(at.ASSUME_GS1),d=Z.findStartPattern(s),f=d[2];let h=0;const p=new Uint8Array(20);let w;switch(p[h++]=f,f){case Z.CODE_START_A:w=Z.CODE_CODE_A;break;case Z.CODE_START_B:w=Z.CODE_CODE_B;break;case Z.CODE_START_C:w=Z.CODE_CODE_C;break;default:throw new q}let E=!1,A=!1,I="",S=d[0],b=d[1];const M=Int32Array.from([0,0,0,0,0,0]);let O=0,N=0,W=f,X=0,B=!0,Ie=!1,se=!1;for(;!E;){const Tr=A;switch(A=!1,O=N,N=Z.decodeCode(s,M,b),p[h++]=N,N!==Z.CODE_STOP&&(B=!0),N!==Z.CODE_STOP&&(X++,W+=X*N),S=b,b+=M.reduce((rl,xo)=>rl+xo,0),N){case Z.CODE_START_A:case Z.CODE_START_B:case Z.CODE_START_C:throw new q}switch(w){case Z.CODE_CODE_A:if(N<64)I+=String.fromCharCode(se===Ie?" ".charCodeAt(0)+N:" ".charCodeAt(0)+N+128),se=!1;else if(N<96)I+=String.fromCharCode(se===Ie?N-64:N+64),se=!1;else switch(N!==Z.CODE_STOP&&(B=!1),N){case Z.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_A:!Ie&&se?(Ie=!0,se=!1):Ie&&se?(Ie=!1,se=!1):se=!0;break;case Z.CODE_SHIFT:A=!0,w=Z.CODE_CODE_B;break;case Z.CODE_CODE_B:w=Z.CODE_CODE_B;break;case Z.CODE_CODE_C:w=Z.CODE_CODE_C;break;case Z.CODE_STOP:E=!0}break;case Z.CODE_CODE_B:if(N<96)I+=String.fromCharCode(se===Ie?" ".charCodeAt(0)+N:" ".charCodeAt(0)+N+128),se=!1;else switch(N!==Z.CODE_STOP&&(B=!1),N){case Z.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Z.CODE_FNC_2:case Z.CODE_FNC_3:break;case Z.CODE_FNC_4_B:!Ie&&se?(Ie=!0,se=!1):Ie&&se?(Ie=!1,se=!1):se=!0;break;case Z.CODE_SHIFT:A=!0,w=Z.CODE_CODE_A;break;case Z.CODE_CODE_A:w=Z.CODE_CODE_A;break;case Z.CODE_CODE_C:w=Z.CODE_CODE_C;break;case Z.CODE_STOP:E=!0}break;case Z.CODE_CODE_C:if(N<100)N<10&&(I+="0"),I+=N;else switch(N!==Z.CODE_STOP&&(B=!1),N){case Z.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Z.CODE_CODE_A:w=Z.CODE_CODE_A;break;case Z.CODE_CODE_B:w=Z.CODE_CODE_B;break;case Z.CODE_STOP:E=!0}}Tr&&(w=w===Z.CODE_CODE_A?Z.CODE_CODE_B:Z.CODE_CODE_A)}const kt=b-S;if(b=s.getNextUnset(b),!s.isRange(b,Math.min(s.getSize(),b+(b-S)/2),!1))throw new U;if(W-=X*O,W%103!==O)throw new St;const en=I.length;if(0===en)throw new U;en>0&&B&&(I=I.substring(0,w===Z.CODE_CODE_C?en-2:en-1));const ht=(d[1]+d[0])/2,Ke=S+kt/2,Bt=p.length,Le=new Uint8Array(Bt);for(let Tr=0;Tr<Bt;Tr++)Le[Tr]=p[Tr];const Vi=[new ie(ht,o),new ie(Ke,o)];return new ft(I,Le,0,Vi,le.CODE_128,(new Date).getTime())}}Z.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Z.MAX_AVG_VARIANCE=.25,Z.MAX_INDIVIDUAL_VARIANCE=.7,Z.CODE_SHIFT=98,Z.CODE_CODE_C=99,Z.CODE_CODE_B=100,Z.CODE_CODE_A=101,Z.CODE_FNC_1=102,Z.CODE_FNC_2=97,Z.CODE_FNC_3=96,Z.CODE_FNC_4_A=101,Z.CODE_FNC_4_B=100,Z.CODE_START_A=103,Z.CODE_START_B=104,Z.CODE_START_C=105,Z.CODE_STOP=106;let za=(()=>{class x extends _t{constructor(s=!1,l=!1){super(),this.usingCheckDigit=s,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,l,c){let d=this.counters;d.fill(0),this.decodeRowResult="";let w,E,f=x.findAsteriskPattern(l,d),h=l.getNextSet(f[1]),p=l.getSize();do{x.recordPattern(l,h,d);let O=x.toNarrowWidePattern(d);if(O<0)throw new U;w=x.patternToChar(O),this.decodeRowResult+=w,E=h;for(let N of d)h+=N;h=l.getNextSet(h)}while("*"!==w);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S,A=0;for(let O of d)A+=O;if(h!==p&&2*(h-E-A)<A)throw new U;if(this.usingCheckDigit){let O=this.decodeRowResult.length-1,N=0;for(let W=0;W<O;W++)N+=x.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(W));if(this.decodeRowResult.charAt(O)!==x.ALPHABET_STRING.charAt(N%43))throw new St;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(0===this.decodeRowResult.length)throw new U;S=this.extendedMode?x.decodeExtended(this.decodeRowResult):this.decodeRowResult;let M=E+A/2;return new ft(S,null,0,[new ie((f[1]+f[0])/2,s),new ie(M,s)],le.CODE_39,(new Date).getTime())}static findAsteriskPattern(s,l){let c=s.getSize(),d=s.getNextSet(0),f=0,h=d,p=!1,w=l.length;for(let E=d;E<c;E++)if(s.get(E)!==p)l[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(l)===x.ASTERISK_ENCODING&&s.isRange(Math.max(0,h-Math.floor((E-h)/2)),h,!1))return[h,E];h+=l[0]+l[1],l.copyWithin(0,2,2+f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,p=!p}throw new U}static toNarrowWidePattern(s){let d,l=s.length,c=0;do{let f=2147483647;for(let w of s)w<f&&w>c&&(f=w);c=f,d=0;let h=0,p=0;for(let w=0;w<l;w++){let E=s[w];E>c&&(p|=1<<l-1-w,d++,h+=E)}if(3===d){for(let w=0;w<l&&d>0;w++){let E=s[w];if(E>c&&(d--,2*E>=h))return-1}return p}}while(d>3);return-1}static patternToChar(s){for(let l=0;l<x.CHARACTER_ENCODINGS.length;l++)if(x.CHARACTER_ENCODINGS[l]===s)return x.ALPHABET_STRING.charAt(l);if(s===x.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(s){let l=s.length,c="";for(let d=0;d<l;d++){let f=s.charAt(d);if("+"===f||"$"===f||"%"===f||"/"===f){let h=s.charAt(d+1),p="\0";switch(f){case"+":if(!(h>="A"&&h<="Z"))throw new q;p=String.fromCharCode(h.charCodeAt(0)+32);break;case"$":if(!(h>="A"&&h<="Z"))throw new q;p=String.fromCharCode(h.charCodeAt(0)-64);break;case"%":if(h>="A"&&h<="E")p=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")p=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")p=String.fromCharCode(h.charCodeAt(0)+43);else if("U"===h)p="\0";else if("V"===h)p="@";else if("W"===h)p="`";else{if("X"!==h&&"Y"!==h&&"Z"!==h)throw new q;p="\x7f"}break;case"/":if(h>="A"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)-32);else{if("Z"!==h)throw new q;p=":"}}c+=p,d++}else c+=f}return c}}return x.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",x.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],x.ASTERISK_ENCODING=148,x})();class ot extends _t{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,s,l){let c=this.decodeStart(s),d=this.decodeEnd(s),f=new et;ot.decodeMiddle(s,c[1],d[0],f);let h=f.toString(),p=null;null!=l&&(p=l.get(at.ALLOWED_LENGTHS)),null==p&&(p=ot.DEFAULT_ALLOWED_LENGTHS);let w=h.length,E=!1,A=0;for(let b of p){if(w===b){E=!0;break}b>A&&(A=b)}if(!E&&w>A&&(E=!0),!E)throw new q;const I=[new ie(c[1],o),new ie(d[0],o)];return new ft(h,null,0,I,le.ITF,(new Date).getTime())}static decodeMiddle(o,s,l,c){let d=new Int32Array(10),f=new Int32Array(5),h=new Int32Array(5);for(d.fill(0),f.fill(0),h.fill(0);s<l;){_t.recordPattern(o,s,d);for(let w=0;w<5;w++){let E=2*w;f[w]=d[E],h[w]=d[E+1]}let p=ot.decodeDigit(f);c.append(p.toString()),p=this.decodeDigit(h),c.append(p.toString()),d.forEach(function(w){s+=w})}}decodeStart(o){let s=ot.skipWhiteSpace(o),l=ot.findGuardPattern(o,s,ot.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(o,l[0]),l}validateQuietZone(o,s){let l=10*this.narrowLineWidth;l=l<s?l:s;for(let c=s-1;l>0&&c>=0&&!o.get(c);c--)l--;if(0!==l)throw new U}static skipWhiteSpace(o){const s=o.getSize(),l=o.getNextSet(0);if(l===s)throw new U;return l}decodeEnd(o){o.reverse();try{let l,s=ot.skipWhiteSpace(o);try{l=ot.findGuardPattern(o,s,ot.END_PATTERN_REVERSED[0])}catch(d){d instanceof U&&(l=ot.findGuardPattern(o,s,ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,l[0]);let c=l[0];return l[0]=o.getSize()-l[1],l[1]=o.getSize()-c,l}finally{o.reverse()}}static findGuardPattern(o,s,l){let c=l.length,d=new Int32Array(c),f=o.getSize(),h=!1,p=0,w=s;d.fill(0);for(let E=s;E<f;E++)if(o.get(E)!==h)d[p]++;else{if(p===c-1){if(_t.patternMatchVariance(d,l,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return[w,E];w+=d[0]+d[1],rt.arraycopy(d,2,d,0,p-1),d[p-1]=0,d[p]=0,p--}else p++;d[p]=1,h=!h}throw new U}static decodeDigit(o){let s=ot.MAX_AVG_VARIANCE,l=-1,c=ot.PATTERNS.length;for(let d=0;d<c;d++){let h=_t.patternMatchVariance(o,ot.PATTERNS[d],ot.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,l=d):h===s&&(l=-1)}if(l>=0)return l%10;throw new U}}ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ot.MAX_AVG_VARIANCE=.38,ot.MAX_INDIVIDUAL_VARIANCE=.5,ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ot.START_PATTERN=Int32Array.from([1,1,1,1]),ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class xt extends _t{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let l,s=!1,c=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),l=xt.findGuardPattern(o,c,!1,this.START_END_PATTERN,d);let f=l[0];c=l[1];let h=f-(c-f);h>=0&&(s=o.isRange(h,f,!1))}return l}static checkChecksum(o){return xt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let s=o.length;if(0===s)return!1;let l=parseInt(o.charAt(s-1),10);return xt.getStandardUPCEANChecksum(o.substring(0,s-1))===l}static getStandardUPCEANChecksum(o){let s=o.length,l=0;for(let c=s-1;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new q;l+=d}l*=3;for(let c=s-2;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new q;l+=d}return(1e3-l)%10}static decodeEnd(o,s){return xt.findGuardPattern(o,s,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,s,l,c){return this.findGuardPattern(o,s,l,c,new Int32Array(c.length))}static findGuardPattern(o,s,l,c,d){let f=o.getSize(),h=0,p=s=l?o.getNextUnset(s):o.getNextSet(s),w=c.length,E=l;for(let A=s;A<f;A++)if(o.get(A)!==E)d[h]++;else{if(h===w-1){if(_t.patternMatchVariance(d,c,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return Int32Array.from([p,A]);p+=d[0]+d[1];let I=d.slice(2,d.length-1);for(let S=0;S<h-1;S++)d[S]=I[S];d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,E=!E}throw new U}static decodeDigit(o,s,l,c){this.recordPattern(o,l,s);let d=this.MAX_AVG_VARIANCE,f=-1,h=c.length;for(let p=0;p<h;p++){let E=_t.patternMatchVariance(s,c[p],xt.MAX_INDIVIDUAL_VARIANCE);E<d&&(d=E,f=p)}if(f>=0)return f;throw new U}}xt.MAX_AVG_VARIANCE=.48,xt.MAX_INDIVIDUAL_VARIANCE=.7,xt.START_END_PATTERN=Int32Array.from([1,1,1]),xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class co{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,s,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,c),f=c.toString(),h=co.parseExtensionString(f),p=[new ie((l[0]+l[1])/2,o),new ie(d,o)],w=new ft(f,null,0,p,le.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&w.putAllMetadata(h),w}decodeMiddle(o,s,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=o.getSize(),f=s[1],h=0;for(let w=0;w<5&&f<d;w++){let E=xt.decodeDigit(o,c,f,xt.L_AND_G_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+E%10);for(let A of c)f+=A;E>=10&&(h|=1<<4-w),4!==w&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(5!==l.length)throw new U;let p=this.determineCheckDigit(h);if(co.extensionChecksum(l.toString())!==p)throw new U;return f}static extensionChecksum(o){let s=o.length,l=0;for(let c=s-2;c>=0;c-=2)l+=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);l*=3;for(let c=s-1;c>=0;c-=2)l+=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return l*=3,l%10}determineCheckDigit(o){for(let s=0;s<10;s++)if(o===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new U}static parseExtensionString(o){if(5!==o.length)return null;let s=co.parseExtension5String(o);return null==s?null:new Map([[Fe.SUGGESTED_PRICE,s]])}static parseExtension5String(o){let s;switch(o.charAt(0)){case"0":s="\xa3";break;case"5":s="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s=""}let l=parseInt(o.substring(1)),d=l%100;return s+(l/100).toString()+"."+(d<10?"0"+d:d.toString())}}class Ga{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,s,l){let c=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,c),f=c.toString(),h=Ga.parseExtensionString(f),p=[new ie((l[0]+l[1])/2,o),new ie(d,o)],w=new ft(f,null,0,p,le.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&w.putAllMetadata(h),w}decodeMiddle(o,s,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=o.getSize(),f=s[1],h=0;for(let p=0;p<2&&f<d;p++){let w=xt.decodeDigit(o,c,f,xt.L_AND_G_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+w%10);for(let E of c)f+=E;w>=10&&(h|=1<<1-p),1!==p&&(f=o.getNextSet(f),f=o.getNextUnset(f))}if(2!==l.length)throw new U;if(parseInt(l.toString())%4!==h)throw new U;return f}static parseExtensionString(o){return 2!==o.length?null:new Map([[Fe.ISSUE_NUMBER,parseInt(o)]])}}class Kc{static decodeRow(o,s,l){let c=xt.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new co).decodeRow(o,s,c)}catch{return(new Ga).decodeRow(o,s,c)}}}Kc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class tt extends xt{constructor(){super(),this.decodeRowStringBuffer="",tt.L_AND_G_PATTERNS=tt.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let s=tt.L_PATTERNS[o-10],l=new Int32Array(s.length);for(let c=0;c<s.length;c++)l[c]=s[s.length-c-1];tt.L_AND_G_PATTERNS[o]=l}}decodeRow(o,s,l){let c=tt.findStartGuardPattern(s),d=null==l?null:l.get(at.NEED_RESULT_POINT_CALLBACK);if(null!=d){const B=new ie((c[0]+c[1])/2,o);d.foundPossibleResultPoint(B)}let f=this.decodeMiddle(s,c,this.decodeRowStringBuffer),h=f.rowOffset,p=f.resultString;if(null!=d){const B=new ie(h,o);d.foundPossibleResultPoint(B)}let w=this.decodeEnd(s,h);if(null!=d){const B=new ie((w[0]+w[1])/2,o);d.foundPossibleResultPoint(B)}let E=w[1],A=E+(E-w[0]);if(A>=s.getSize()||!s.isRange(E,A,!1))throw new U;let I=p.toString();if(I.length<8)throw new q;if(!tt.checkChecksum(I))throw new St;let S=(c[1]+c[0])/2,b=(w[1]+w[0])/2,M=this.getBarcodeFormat(),O=[new ie(S,o),new ie(b,o)],N=new ft(I,null,0,O,M,(new Date).getTime()),W=0;try{let B=Kc.decodeRow(o,s,w[1]);N.putMetadata(Fe.UPC_EAN_EXTENSION,B.getText()),N.putAllMetadata(B.getResultMetadata()),N.addResultPoints(B.getResultPoints()),W=B.getText().length}catch{}let X=null==l?null:l.get(at.ALLOWED_EAN_EXTENSIONS);if(null!=X){let B=!1;for(let Ie in X)if(W.toString()===Ie){B=!0;break}if(!B)throw new U}return N}decodeEnd(o,s){return tt.findGuardPattern(o,s,!1,tt.START_END_PATTERN,new Int32Array(tt.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return tt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let s=o.length;if(0===s)return!1;let l=parseInt(o.charAt(s-1),10);return tt.getStandardUPCEANChecksum(o.substring(0,s-1))===l}static getStandardUPCEANChecksum(o){let s=o.length,l=0;for(let c=s-1;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new q;l+=d}l*=3;for(let c=s-2;c>=0;c-=2){let d=o.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(d<0||d>9)throw new q;l+=d}return(1e3-l)%10}}let Li=(()=>{class x extends tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=s.getSize(),h=l[1],p=0;for(let E=0;E<6&&h<f;E++){let A=tt.decodeDigit(s,d,h,tt.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+A%10);for(let I of d)h+=I;A>=10&&(p|=1<<5-E)}c=x.determineFirstDigit(c,p),h=tt.findGuardPattern(s,h,!0,tt.MIDDLE_PATTERN,new Int32Array(tt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&h<f;E++){let A=tt.decodeDigit(s,d,h,tt.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+A);for(let I of d)h+=I}return{rowOffset:h,resultString:c}}getBarcodeFormat(){return le.EAN_13}static determineFirstDigit(s,l){for(let c=0;c<10;c++)if(l===this.FIRST_DIGIT_ENCODINGS[c])return String.fromCharCode("0".charCodeAt(0)+c)+s;throw new U}}return x.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],x})();class ms extends tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,s,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=o.getSize(),f=s[1];for(let p=0;p<4&&f<d;p++){let w=tt.decodeDigit(o,c,f,tt.L_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+w);for(let E of c)f+=E}f=tt.findGuardPattern(o,f,!0,tt.MIDDLE_PATTERN,new Int32Array(tt.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&f<d;p++){let w=tt.decodeDigit(o,c,f,tt.L_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+w);for(let E of c)f+=E}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return le.EAN_8}}class ys extends tt{constructor(){super(...arguments),this.ean13Reader=new Li}getBarcodeFormat(){return le.UPC_A}decode(o,s){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,s,l))}decodeMiddle(o,s,l){return this.ean13Reader.decodeMiddle(o,s,l)}maybeReturnResult(o){let s=o.getText();if("0"===s.charAt(0)){let l=new ft(s.substring(1),null,null,o.getResultPoints(),le.UPC_A);return null!=o.getResultMetadata()&&l.putAllMetadata(o.getResultMetadata()),l}throw new U}reset(){this.ean13Reader.reset()}}class vn extends tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,s,l){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const d=o.getSize();let f=s[1],h=0;for(let w=0;w<6&&f<d;w++){const E=vn.decodeDigit(o,c,f,vn.L_AND_G_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+E%10);for(let A of c)f+=A;E>=10&&(h|=1<<5-w)}return{rowOffset:f,resultString:vn.determineNumSysAndCheckDigit(l,h)}}decodeEnd(o,s){return vn.findGuardPatternWithoutCounters(o,s,!0,vn.MIDDLE_END_PATTERN)}checkChecksum(o){return tt.checkChecksum(vn.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,s){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c])return String.fromCharCode("0".charCodeAt(0)+l)+o+String.fromCharCode("0".charCodeAt(0)+c);throw U.getNotFoundInstance()}getBarcodeFormat(){return le.UPC_E}static convertUPCEtoUPCA(o){const s=o.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new et;l.append(o.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(c),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(c)}return o.length>=8&&l.append(o.charAt(7)),l.toString()}}vn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class uo extends _t{constructor(o){super();let s=null==o?null:o.get(at.POSSIBLE_FORMATS),l=[];Je(s)?(l.push(new Li),l.push(new ys),l.push(new ms),l.push(new vn)):(s.indexOf(le.EAN_13)>-1&&l.push(new Li),s.indexOf(le.UPC_A)>-1&&l.push(new ys),s.indexOf(le.EAN_8)>-1&&l.push(new ms),s.indexOf(le.UPC_E)>-1&&l.push(new vn)),this.readers=l}decodeRow(o,s,l){for(let c of this.readers)try{const d=c.decodeRow(o,s,l),f=d.getBarcodeFormat()===le.EAN_13&&"0"===d.getText().charAt(0),h=null==l?null:l.get(at.POSSIBLE_FORMATS),p=null==h||h.includes(le.UPC_A);if(f&&p){const w=d.getRawBytes(),E=new ft(d.getText().substring(1),w,w?w.length:null,d.getResultPoints(),le.UPC_A);return E.putAllMetadata(d.getResultMetadata()),E}return d}catch{}throw new U}reset(){for(let o of this.readers)o.reset()}}let Hr=(()=>{class x extends _t{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,l){for(let c=0;c<l.length;c++)if(_t.patternMatchVariance(s,l[c],x.MAX_INDIVIDUAL_VARIANCE)<x.MAX_AVG_VARIANCE)return c;throw new U}static count(s){return We.sum(new Int32Array(s))}static increment(s,l){let c=0,d=l[0];for(let f=1;f<s.length;f++)l[f]>d&&(d=l[f],c=f);s[c]++}static decrement(s,l){let c=0,d=l[0];for(let f=1;f<s.length;f++)l[f]<d&&(d=l[f],c=f);s[c]--}static isFinderPattern(s){let l=s[0]+s[1],d=l/(l+s[2]+s[3]);if(d>=x.MIN_FINDER_PATTERN_RATIO&&d<=x.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let p of s)p>h&&(h=p),p<f&&(f=p);return h<10*f}return!1}}return x.MAX_AVG_VARIANCE=.2,x.MAX_INDIVIDUAL_VARIANCE=.45,x.MIN_FINDER_PATTERN_RATIO=9.5/12,x.MAX_FINDER_PATTERN_RATIO=12.5/14,x})();class zr{constructor(o,s){this.value=o,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){return o instanceof zr&&this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pi{constructor(o,s,l,c,d){this.value=o,this.startEnd=s,this.value=o,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ie(l,d)),this.resultPoints.push(new ie(c,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){return o instanceof Pi&&this.value===o.value}hashCode(){return this.value}}class Ln{constructor(){}static getRSSvalue(o,s,l){let c=0;for(let p of o)c+=p;let d=0,f=0,h=o.length;for(let p=0;p<h-1;p++){let w;for(w=1,f|=1<<p;w<o[p];w++,f&=~(1<<p)){let E=Ln.combins(c-w-1,h-p-2);if(l&&0===f&&c-w-(h-p-1)>=h-p-1&&(E-=Ln.combins(c-w-(h-p),h-p-2)),h-p-1>1){let A=0;for(let I=c-w-(h-p-2);I>s;I--)A+=Ln.combins(c-w-I-1,h-p-3);E-=A*(h-1-p)}else c-w>s&&E--;d+=E}c-=w}return d}static combins(o,s){let l,c;o-s>s?(c=s,l=o-s):(c=o-s,l=s);let d=1,f=1;for(let h=o;h>l;h--)d*=h,f<=c&&(d/=f,f++);for(;f<=c;)d/=f,f++;return d}}class Wa{static buildBitArray(o){let s=2*o.length-1;null==o[o.length-1].getRightChar()&&(s-=1);let c=new it(12*s),d=0,h=o[0].getRightChar().getValue();for(let p=11;p>=0;--p)h&1<<p&&c.set(d),d++;for(let p=1;p<o.length;++p){let w=o[p],E=w.getLeftChar().getValue();for(let A=11;A>=0;--A)E&1<<A&&c.set(d),d++;if(null!=w.getRightChar()){let A=w.getRightChar().getValue();for(let I=11;I>=0;--I)A&1<<I&&c.set(d),d++}}return c}}class Gt{constructor(o,s){s?this.decodedInformation=null:(this.finished=o,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ws{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}let Pn=(()=>{class x extends ws{constructor(s,l){super(s),this.value=l}getValue(){return this.value}isFNC1(){return this.value===x.FNC1}}return x.FNC1="$",x})();class Gr extends ws{constructor(o,s,l){super(o),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let ui=(()=>{class x extends ws{constructor(s,l,c){if(super(s),l<0||l>10||c<0||c>10)throw new q;this.firstDigit=l,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===x.FNC1}isSecondDigitFNC1(){return this.secondDigit===x.FNC1}isAnyFNC1(){return this.firstDigit===x.FNC1||this.secondDigit===x.FNC1}}return x.FNC1=10,x})();class ee{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new U;let s=o.substring(0,2);for(let d of ee.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(2,d[2],o):ee.processFixedAI(2,d[1],o);if(o.length<3)throw new U;let l=o.substring(0,3);for(let d of ee.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(3,d[2],o):ee.processFixedAI(3,d[1],o);for(let d of ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,d[2],o):ee.processFixedAI(4,d[1],o);if(o.length<4)throw new U;let c=o.substring(0,4);for(let d of ee.FOUR_DIGIT_DATA_LENGTH)if(d[0]===c)return d[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,d[2],o):ee.processFixedAI(4,d[1],o);throw new U}static processFixedAI(o,s,l){if(l.length<o)throw new U;let c=l.substring(0,o);if(l.length<o+s)throw new U;let d=l.substring(o,o+s),f=l.substring(o+s),h="("+c+")"+d,p=ee.parseFieldsInGeneralPurpose(f);return null==p?h:h+p}static processVariableAI(o,s,l){let d,c=l.substring(0,o);d=l.length<o+s?l.length:o+s;let f=l.substring(o,d),h=l.substring(d),p="("+c+")"+f,w=ee.parseFieldsInGeneralPurpose(h);return null==w?p:p+w}}ee.VARIABLE_LENGTH=[],ee.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ee.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ee.VARIABLE_LENGTH,20],["22",ee.VARIABLE_LENGTH,29],["30",ee.VARIABLE_LENGTH,8],["37",ee.VARIABLE_LENGTH,8],["90",ee.VARIABLE_LENGTH,30],["91",ee.VARIABLE_LENGTH,30],["92",ee.VARIABLE_LENGTH,30],["93",ee.VARIABLE_LENGTH,30],["94",ee.VARIABLE_LENGTH,30],["95",ee.VARIABLE_LENGTH,30],["96",ee.VARIABLE_LENGTH,30],["97",ee.VARIABLE_LENGTH,3],["98",ee.VARIABLE_LENGTH,30],["99",ee.VARIABLE_LENGTH,30]],ee.THREE_DIGIT_DATA_LENGTH=[["240",ee.VARIABLE_LENGTH,30],["241",ee.VARIABLE_LENGTH,30],["242",ee.VARIABLE_LENGTH,6],["250",ee.VARIABLE_LENGTH,30],["251",ee.VARIABLE_LENGTH,30],["253",ee.VARIABLE_LENGTH,17],["254",ee.VARIABLE_LENGTH,20],["400",ee.VARIABLE_LENGTH,30],["401",ee.VARIABLE_LENGTH,30],["402",17],["403",ee.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ee.VARIABLE_LENGTH,20],["421",ee.VARIABLE_LENGTH,15],["422",3],["423",ee.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ee.VARIABLE_LENGTH,15],["391",ee.VARIABLE_LENGTH,18],["392",ee.VARIABLE_LENGTH,15],["393",ee.VARIABLE_LENGTH,18],["703",ee.VARIABLE_LENGTH,30]],ee.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ee.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ee.VARIABLE_LENGTH,20],["8003",ee.VARIABLE_LENGTH,30],["8004",ee.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ee.VARIABLE_LENGTH,30],["8008",ee.VARIABLE_LENGTH,12],["8018",18],["8020",ee.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ee.VARIABLE_LENGTH,70],["8200",ee.VARIABLE_LENGTH,70]];class di{constructor(o){this.buffer=new et,this.information=o}decodeAllCodes(o,s){let l=s,c=null;for(;;){let d=this.decodeGeneralPurposeField(l,c),f=ee.parseFieldsInGeneralPurpose(d.getNewString());if(null!=f&&o.append(f),c=d.isRemaining()?""+d.getRemainingValue():null,l===d.getNewPosition())break;l=d.getNewPosition()}return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let s=o;s<o+3;++s)if(this.information.get(s))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(o,4);return new ui(this.information.getSize(),0===d?ui.FNC1:d-1,ui.FNC1)}let s=this.extractNumericValueFromBitArray(o,7);return new ui(o+7,(s-8)/11,(s-8)%11)}extractNumericValueFromBitArray(o,s){return di.extractNumericValueFromBitArray(this.information,o,s)}static extractNumericValueFromBitArray(o,s,l){let c=0;for(let d=0;d<l;++d)o.get(s+d)&&(c|=1<<l-d-1);return c}decodeGeneralPurposeField(o,s){this.buffer.setLengthToZero(),null!=s&&this.buffer.append(s),this.current.setPosition(o);let l=this.parseBlocks();return null!=l&&l.isRemaining()?new Gr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Gr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),o=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),o=s.isFinished()):(s=this.parseNumericBlock(),o=s.isFinished()),l===this.current.getPosition()&&!o)break}while(!o);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let s;return s=o.isSecondDigitFNC1()?new Gr(this.current.getPosition(),this.buffer.toString()):new Gr(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Gt(!0,s)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let s=new Gr(this.current.getPosition(),this.buffer.toString());return new Gt(!0,s)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Gt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let s=new Gr(this.current.getPosition(),this.buffer.toString());return new Gt(!0,s)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Gt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let s=new Gr(this.current.getPosition(),this.buffer.toString());return new Gt(!0,s)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Gt(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(o,5);if(s>=5&&s<16)return!0;if(o+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,7);if(l>=64&&l<116)return!0;if(o+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,8);return c>=232&&c<253}decodeIsoIec646(o){let s=this.extractNumericValueFromBitArray(o,5);if(15===s)return new Pn(o+5,Pn.FNC1);if(s>=5&&s<15)return new Pn(o+5,"0"+(s-5));let d,l=this.extractNumericValueFromBitArray(o,7);if(l>=64&&l<90)return new Pn(o+7,""+(l+1));if(l>=90&&l<116)return new Pn(o+7,""+(l+7));switch(this.extractNumericValueFromBitArray(o,8)){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new q}return new Pn(o+8,d)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(o,5);if(s>=5&&s<16)return!0;if(o+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(o,6);return l>=16&&l<63}decodeAlphanumeric(o){let s=this.extractNumericValueFromBitArray(o,5);if(15===s)return new Pn(o+5,Pn.FNC1);if(s>=5&&s<15)return new Pn(o+5,"0"+(s-5));let c,l=this.extractNumericValueFromBitArray(o,6);if(l>=32&&l<58)return new Pn(o+6,""+(l+33));switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Er("Decoding invalid alphanumeric value: "+l)}return new Pn(o+6,c)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let s=0;s<5&&s+o<this.information.getSize();++s)if(2===s){if(!this.information.get(o+2))return!1}else if(this.information.get(o+s))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let s=o;s<o+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let s=0;s<4&&s+o<this.information.getSize();++s)if(this.information.get(o+s))return!1;return!0}}class xs{constructor(o){this.information=o,this.generalDecoder=new di(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let bt=(()=>{class x extends xs{constructor(s){super(s)}encodeCompressedGtin(s,l){s.append("(01)");let c=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,l,c)}encodeCompressedGtinWithoutAI(s,l,c){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*d,10);f/100==0&&s.append("0"),f/10==0&&s.append("0"),s.append(f)}x.appendCheckDigit(s,c)}static appendCheckDigit(s,l){let c=0;for(let d=0;d<13;d++){let f=s.charAt(d+l).charCodeAt(0)-"0".charCodeAt(0);c+=1&d?f:3*f}c=10-c%10,10===c&&(c=0),s.append(c)}}return x.GTIN_SIZE=40,x})(),Jc=(()=>{class x extends bt{constructor(s){super(s)}parseInformation(){let s=new et;s.append("(01)");let l=s.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE,4);return s.append(c),this.encodeCompressedGtinWithoutAI(s,x.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(s,x.HEADER_SIZE+44)}}return x.HEADER_SIZE=4,x})(),Wt=(()=>{class x extends xs{constructor(s){super(s)}parseInformation(){let s=new et;return this.getGeneralDecoder().decodeAllCodes(s,x.HEADER_SIZE)}}return x.HEADER_SIZE=5,x})();class sr extends bt{constructor(o){super(o)}encodeCompressedWeight(o,s,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(o,c);let d=this.checkWeight(c),f=1e5;for(let h=0;h<5;++h)d/f==0&&o.append("0"),f/=10;o.append(d)}}let Fn=(()=>{class x extends sr{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=x.HEADER_SIZE+sr.GTIN_SIZE+x.WEIGHT_SIZE)throw new U;let s=new et;return this.encodeCompressedGtin(s,x.HEADER_SIZE),this.encodeCompressedWeight(s,x.HEADER_SIZE+sr.GTIN_SIZE,x.WEIGHT_SIZE),s.toString()}}return x.HEADER_SIZE=5,x.WEIGHT_SIZE=15,x})();class Bh extends Fn{constructor(o){super(o)}addWeightCode(o,s){o.append("(3103)")}checkWeight(o){return o}}class eu extends Fn{constructor(o){super(o)}addWeightCode(o,s){o.append(s<1e4?"(3202)":"(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}let tu=(()=>{class x extends bt{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<x.HEADER_SIZE+bt.GTIN_SIZE)throw new U;let s=new et;this.encodeCompressedGtin(s,x.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+bt.GTIN_SIZE,x.LAST_DIGIT_SIZE);s.append("(392"),s.append(l),s.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(x.HEADER_SIZE+bt.GTIN_SIZE+x.LAST_DIGIT_SIZE,null);return s.append(c.getNewString()),s.toString()}}return x.HEADER_SIZE=8,x.LAST_DIGIT_SIZE=2,x})(),Cs=(()=>{class x extends bt{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<x.HEADER_SIZE+bt.GTIN_SIZE)throw new U;let s=new et;this.encodeCompressedGtin(s,x.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+bt.GTIN_SIZE,x.LAST_DIGIT_SIZE);s.append("(393"),s.append(l),s.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+bt.GTIN_SIZE+x.LAST_DIGIT_SIZE,x.FIRST_THREE_DIGITS_SIZE);c/100==0&&s.append("0"),c/10==0&&s.append("0"),s.append(c);let d=this.getGeneralDecoder().decodeGeneralPurposeField(x.HEADER_SIZE+bt.GTIN_SIZE+x.LAST_DIGIT_SIZE+x.FIRST_THREE_DIGITS_SIZE,null);return s.append(d.getNewString()),s.toString()}}return x.HEADER_SIZE=8,x.LAST_DIGIT_SIZE=2,x.FIRST_THREE_DIGITS_SIZE=10,x})(),Dr=(()=>{class x extends sr{constructor(s,l,c){super(s),this.dateCode=c,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=x.HEADER_SIZE+x.GTIN_SIZE+x.WEIGHT_SIZE+x.DATE_SIZE)throw new U;let s=new et;return this.encodeCompressedGtin(s,x.HEADER_SIZE),this.encodeCompressedWeight(s,x.HEADER_SIZE+x.GTIN_SIZE,x.WEIGHT_SIZE),this.encodeCompressedDate(s,x.HEADER_SIZE+x.GTIN_SIZE+x.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(l,x.DATE_SIZE);if(38400==c)return;s.append("("),s.append(this.dateCode),s.append(")");let d=c%32;c/=32;let f=c%12+1;c/=12;let h=c;h/10==0&&s.append("0"),s.append(h),f/10==0&&s.append("0"),s.append(f),d/10==0&&s.append("0"),s.append(d)}addWeightCode(s,l){s.append("("),s.append(this.firstAIdigits),s.append(l/1e5),s.append(")")}checkWeight(s){return s%1e5}}return x.HEADER_SIZE=8,x.WEIGHT_SIZE=20,x.DATE_SIZE=16,x})();function fi(x){try{if(x.get(1))return new Jc(x);if(!x.get(2))return new Wt(x);switch(di.extractNumericValueFromBitArray(x,1,4)){case 4:return new Bh(x);case 5:return new eu(x)}switch(di.extractNumericValueFromBitArray(x,1,5)){case 12:return new tu(x);case 13:return new Cs(x)}switch(di.extractNumericValueFromBitArray(x,1,7)){case 56:return new Dr(x,"310","11");case 57:return new Dr(x,"320","11");case 58:return new Dr(x,"310","13");case 59:return new Dr(x,"320","13");case 60:return new Dr(x,"310","15");case 61:return new Dr(x,"320","15");case 62:return new Dr(x,"310","17");case 63:return new Dr(x,"320","17")}}catch(o){throw console.log(o),new Er("unknown decoder: "+x)}}class Ar{constructor(o,s,l,c){this.leftchar=o,this.rightchar=s,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(o,s){return o instanceof Ar&&Ar.equalsOrNull(o.leftchar,s.leftchar)&&Ar.equalsOrNull(o.rightchar,s.rightchar)&&Ar.equalsOrNull(o.finderpattern,s.finderpattern)}static equalsOrNull(o,s){return null===o?null===s:Ar.equals(o,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class fo{constructor(o,s,l){this.pairs=o,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,s){return o instanceof fo&&this.checkEqualitity(o,s)&&o.wasReversed===s.wasReversed}checkEqualitity(o,s){if(!o||!s)return;let l;return o.forEach((c,d)=>{s.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class V extends Hr{constructor(o){super(...arguments),this.pairs=new Array(V.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===o}decodeRow(o,s,l){this.pairs.length=0,this.startFromEven=!1;try{return V.constructResult(this.decodeRow2pairs(o,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,V.constructResult(this.decodeRow2pairs(o,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,s){let c,l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,o))}catch(d){if(d instanceof U){if(!this.pairs.length)throw new U;l=!0}}if(this.checkChecksum())return this.pairs;if(c=!!this.rows.length,this.storeRow(o,!1),c){let d=this.checkRowsBoolean(!1);if(null!=d||(d=this.checkRowsBoolean(!0),null!=d))return d}throw new U}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return o&&(this.rows=this.rows.reverse()),s}checkRows(o,s){for(let l=s;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let f of o)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!V.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(o);d.push(c);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new U}static isValidSequence(o){for(let s of V.FINDER_PATTERN_SEQUENCES){if(o.length>s.length)continue;let l=!0;for(let c=0;c<o.length;c++)if(o[c].getFinderPattern().getValue()!=s[c]){l=!1;break}if(l)return!0}return!1}storeRow(o,s){let l=0,c=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>o){d=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),l++}d||c||V.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new fo(this.pairs,o,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,s){for(let l of s)if(l.getPairs().length!==o.length)for(let c of l.getPairs())for(let d of o)if(Ar.equals(c,d))break}static isPartialRow(o,s){for(let l of s){let c=!0;for(let d of o){let f=!1;for(let h of l.getPairs())if(d.equals(h)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(o){let c=fi(Wa.buildBitArray(o)).parseInformation(),d=o[0].getFinderPattern().getResultPoints(),f=o[o.length-1].getFinderPattern().getResultPoints();return new ft(c,null,null,[d[0],d[1],f[0],f[1]],le.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),s=o.getLeftChar(),l=o.getRightChar();if(null==l)return!1;let c=l.getChecksumPortion(),d=2;for(let h=1;h<this.pairs.size();++h){let p=this.pairs.get(h);c+=p.getLeftChar().getChecksumPortion(),d++;let w=p.getRightChar();null!=w&&(c+=w.getChecksumPortion(),d++)}return c%=211,211*(d-4)+c==s.getValue()}static getNextSecondBar(o,s){let l;return o.get(s)?(l=o.getNextUnset(s),l=o.getNextSet(l)):(l=o.getNextSet(s),l=o.getNextUnset(l)),l}retrieveNextPair(o,s,l){let c=s.length%2==0;this.startFromEven&&(c=!c);let d,f=!0,h=-1;do{this.findNextPair(o,s,h),d=this.parseFoundFinderPattern(o,l,c),null==d?h=V.getNextSecondBar(o,this.startEnd[0]):f=!1}while(f);let w,p=this.decodeDataCharacter(o,d,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new U;try{w=this.decodeDataCharacter(o,d,c,!1)}catch(E){w=null,this.verbose&&console.log(E)}return new Ar(p,w,d,!0)}isEmptyPair(o){return 0===o.length}findNextPair(o,s,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f,d=o.getSize();f=l>=0?l:this.isEmptyPair(s)?0:s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let p=!1;for(;f<d&&(p=!o.get(f),p);)f++;let w=0,E=f;for(let A=f;A<d;A++)if(o.get(A)!=p)c[w]++;else{if(3==w){if(h&&V.reverseCounters(c),V.isFinderPattern(c))return this.startEnd[0]=E,void(this.startEnd[1]=A);h&&V.reverseCounters(c),E+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,p=!p}throw new U}static reverseCounters(o){let s=o.length;for(let l=0;l<s/2;++l){let c=o[l];o[l]=o[s-l-1],o[s-l-1]=c}}parseFoundFinderPattern(o,s,l){let c,d,f;if(l){let w=this.startEnd[0]-1;for(;w>=0&&!o.get(w);)w--;w++,c=this.startEnd[0]-w,d=w,f=this.startEnd[1]}else d=this.startEnd[0],f=o.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let p,h=this.getDecodeFinderCounters();rt.arraycopy(h,0,h,1,h.length-1),h[0]=c;try{p=this.parseFinderValue(h,V.FINDER_PATTERNS)}catch{return null}return new Pi(p,[d,f],d,f,s)}decodeDataCharacter(o,s,l,c){let d=this.getDataCharacterCounters();for(let Ke=0;Ke<d.length;Ke++)d[Ke]=0;if(c)V.recordPatternInReverse(o,s.getStartEnd()[0],d);else{V.recordPattern(o,s.getStartEnd()[1],d);for(let Ke=0,Bt=d.length-1;Ke<Bt;Ke++,Bt--){let Le=d[Ke];d[Ke]=d[Bt],d[Bt]=Le}}let h=We.sum(new Int32Array(d))/17,p=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new U;let w=this.getOddCounts(),E=this.getEvenCounts(),A=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Ke=0;Ke<d.length;Ke++){let Bt=1*d[Ke]/h,Le=Bt+.5;if(Le<1){if(Bt<.3)throw new U;Le=1}else if(Le>8){if(Bt>8.7)throw new U;Le=8}let Vi=Ke/2;1&Ke?(E[Vi]=Le,I[Vi]=Bt-Le):(w[Vi]=Le,A[Vi]=Bt-Le)}this.adjustOddEvenCounts(17);let S=4*s.getValue()+(l?0:2)+(c?0:1)-1,b=0,M=0;for(let Ke=w.length-1;Ke>=0;Ke--)V.isNotA1left(s,l,c)&&(M+=w[Ke]*V.WEIGHTS[S][2*Ke]),b+=w[Ke];let O=0;for(let Ke=E.length-1;Ke>=0;Ke--)V.isNotA1left(s,l,c)&&(O+=E[Ke]*V.WEIGHTS[S][2*Ke+1]);let N=M+O;if(1&b||b>13||b<4)throw new U;let W=(13-b)/2,X=V.SYMBOL_WIDEST[W],B=9-X,Ie=Ln.getRSSvalue(w,X,!0),se=Ln.getRSSvalue(E,B,!1);return new zr(Ie*V.EVEN_TOTAL_SUBSET[W]+se+V.GSUM[W],N)}static isNotA1left(o,s,l){return!(0==o.getValue()&&s&&l)}adjustOddEvenCounts(o){let s=We.sum(new Int32Array(this.getOddCounts())),l=We.sum(new Int32Array(this.getEvenCounts())),c=!1,d=!1;s>13?d=!0:s<4&&(c=!0);let f=!1,h=!1;l>13?h=!0:l<4&&(f=!0);let p=s+l-o,w=1==(1&s),E=0==(1&l);if(1==p)if(w){if(E)throw new U;d=!0}else{if(!E)throw new U;h=!0}else if(-1==p)if(w){if(E)throw new U;c=!0}else{if(!E)throw new U;f=!0}else{if(0!=p)throw new U;if(w){if(!E)throw new U;s<l?(c=!0,h=!0):(d=!0,f=!0)}else if(E)throw new U}if(c){if(d)throw new U;V.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&V.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new U;V.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&V.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}V.SYMBOL_WIDEST=[7,5,4,3,1],V.EVEN_TOTAL_SUBSET=[4,20,52,104,204],V.GSUM=[0,348,1388,2948,3988],V.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],V.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],V.FINDER_PAT_A=0,V.FINDER_PAT_B=1,V.FINDER_PAT_C=2,V.FINDER_PAT_D=3,V.FINDER_PAT_E=4,V.FINDER_PAT_F=5,V.FINDER_PATTERN_SEQUENCES=[[V.FINDER_PAT_A,V.FINDER_PAT_A],[V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B],[V.FINDER_PAT_A,V.FINDER_PAT_C,V.FINDER_PAT_B,V.FINDER_PAT_D],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_C],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_D,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_E,V.FINDER_PAT_B,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_D],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_E],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F],[V.FINDER_PAT_A,V.FINDER_PAT_A,V.FINDER_PAT_B,V.FINDER_PAT_B,V.FINDER_PAT_C,V.FINDER_PAT_D,V.FINDER_PAT_D,V.FINDER_PAT_E,V.FINDER_PAT_E,V.FINDER_PAT_F,V.FINDER_PAT_F]],V.MAX_PAIRS=11;class nu extends zr{constructor(o,s,l){super(o,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class pt extends Hr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,s,l){const c=this.decodePair(s,!1,o,l);pt.addOrTally(this.possibleLeftPairs,c),s.reverse();let d=this.decodePair(s,!0,o,l);pt.addOrTally(this.possibleRightPairs,d),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1)for(let h of this.possibleRightPairs)if(h.getCount()>1&&pt.checkChecksum(f,h))return pt.constructResult(f,h);throw new U}static addOrTally(o,s){if(null==s)return;let l=!1;for(let c of o)if(c.getValue()===s.getValue()){c.incrementCount(),l=!0;break}l||o.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,s){let l=4537077*o.getValue()+s.getValue(),c=new String(l).toString(),d=new et;for(let w=13-c.length;w>0;w--)d.append("0");d.append(c);let f=0;for(let w=0;w<13;w++){let E=d.charAt(w).charCodeAt(0)-"0".charCodeAt(0);f+=1&w?E:3*E}f=10-f%10,10===f&&(f=0),d.append(f.toString());let h=o.getFinderPattern().getResultPoints(),p=s.getFinderPattern().getResultPoints();return new ft(d.toString(),null,0,[h[0],h[1],p[0],p[1]],le.RSS_14,(new Date).getTime())}static checkChecksum(o,s){let l=(o.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*o.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(o,s,l,c){try{let d=this.findFinderPattern(o,s),f=this.parseFoundFinderPattern(o,l,s,d),h=null==c?null:c.get(at.NEED_RESULT_POINT_CALLBACK);if(null!=h){let E=(d[0]+d[1])/2;s&&(E=o.getSize()-1-E),h.foundPossibleResultPoint(new ie(E,l))}let p=this.decodeDataCharacter(o,f,!0),w=this.decodeDataCharacter(o,f,!1);return new nu(1597*p.getValue()+w.getValue(),p.getChecksumPortion()+4*w.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(o,s,l){let c=this.getDataCharacterCounters();for(let O=0;O<c.length;O++)c[O]=0;if(l)_t.recordPatternInReverse(o,s.getStartEnd()[0],c);else{_t.recordPattern(o,s.getStartEnd()[1]+1,c);for(let O=0,N=c.length-1;O<N;O++,N--){let W=c[O];c[O]=c[N],c[N]=W}}let d=l?16:15,f=We.sum(new Int32Array(c))/d,h=this.getOddCounts(),p=this.getEvenCounts(),w=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let O=0;O<c.length;O++){let N=c[O]/f,W=Math.floor(N+.5);W<1?W=1:W>8&&(W=8);let X=Math.floor(O/2);1&O?(p[X]=W,E[X]=N-W):(h[X]=W,w[X]=N-W)}this.adjustOddEvenCounts(l,d);let A=0,I=0;for(let O=h.length-1;O>=0;O--)I*=9,I+=h[O],A+=h[O];let S=0,b=0;for(let O=p.length-1;O>=0;O--)S*=9,S+=p[O],b+=p[O];let M=I+3*S;if(l){if(1&A||A>12||A<4)throw new U;let O=(12-A)/2,N=pt.OUTSIDE_ODD_WIDEST[O],W=9-N,X=Ln.getRSSvalue(h,N,!1),B=Ln.getRSSvalue(p,W,!0);return new zr(X*pt.OUTSIDE_EVEN_TOTAL_SUBSET[O]+B+pt.OUTSIDE_GSUM[O],M)}{if(1&b||b>10||b<4)throw new U;let O=(10-b)/2,N=pt.INSIDE_ODD_WIDEST[O],W=9-N,X=Ln.getRSSvalue(h,N,!0),B=Ln.getRSSvalue(p,W,!1);return new zr(B*pt.INSIDE_ODD_TOTAL_SUBSET[O]+X+pt.INSIDE_GSUM[O],M)}}findFinderPattern(o,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=o.getSize(),d=!1,f=0;for(;f<c&&(d=!o.get(f),s!==d);)f++;let h=0,p=f;for(let w=f;w<c;w++)if(o.get(w)!==d)l[h]++;else{if(3===h){if(Hr.isFinderPattern(l))return[p,w];p+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,h--}else h++;l[h]=1,d=!d}throw new U}parseFoundFinderPattern(o,s,l,c){let d=o.get(c[0]),f=c[0]-1;for(;f>=0&&d!==o.get(f);)f--;f++;const h=c[0]-f,p=this.getDecodeFinderCounters(),w=new Int32Array(p.length);rt.arraycopy(p,0,w,1,p.length-1),w[0]=h;const E=this.parseFinderValue(w,pt.FINDER_PATTERNS);let A=f,I=c[1];return l&&(A=o.getSize()-1-A,I=o.getSize()-1-I),new Pi(E,[f,c[1]],A,I,s)}adjustOddEvenCounts(o,s){let l=We.sum(new Int32Array(this.getOddCounts())),c=We.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,h=!1,p=!1;o?(l>12?f=!0:l<4&&(d=!0),c>12?p=!0:c<4&&(h=!0)):(l>11?f=!0:l<5&&(d=!0),c>10?p=!0:c<4&&(h=!0));let w=l+c-s,E=(1&l)==(o?1:0),A=1==(1&c);if(1===w)if(E){if(A)throw new U;f=!0}else{if(!A)throw new U;p=!0}else if(-1===w)if(E){if(A)throw new U;d=!0}else{if(!A)throw new U;h=!0}else{if(0!==w)throw new U;if(E){if(!A)throw new U;l<c?(d=!0,p=!0):(f=!0,h=!0)}else if(A)throw new U}if(d){if(f)throw new U;Hr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Hr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new U;Hr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Hr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],pt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],pt.OUTSIDE_GSUM=[0,161,961,2015,2715],pt.INSIDE_GSUM=[0,336,1036,1516],pt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],pt.INSIDE_ODD_WIDEST=[2,4,6,8],pt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class hi extends _t{constructor(o,s){super(),this.readers=[],this.verbose=!0===s;const l=o?o.get(at.POSSIBLE_FORMATS):null,c=o&&void 0!==o.get(at.ASSUME_CODE_39_CHECK_DIGIT);l?((l.includes(le.EAN_13)||l.includes(le.UPC_A)||l.includes(le.EAN_8)||l.includes(le.UPC_E))&&this.readers.push(new uo(o)),l.includes(le.CODE_39)&&this.readers.push(new za(c)),l.includes(le.CODE_128)&&this.readers.push(new Z),l.includes(le.ITF)&&this.readers.push(new ot),l.includes(le.RSS_14)&&this.readers.push(new pt),l.includes(le.RSS_EXPANDED)&&this.readers.push(new V(this.verbose))):(this.readers.push(new uo(o)),this.readers.push(new za),this.readers.push(new uo(o)),this.readers.push(new Z),this.readers.push(new ot),this.readers.push(new pt),this.readers.push(new V(this.verbose)))}decodeRow(o,s,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(o,s,l)}catch{}throw new U}reset(){this.readers.forEach(o=>o.reset())}}class Xe{constructor(o,s,l){this.ecCodewords=o,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ze{constructor(o,s){this.count=o,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ke{constructor(o,s,l,c,d,f){this.versionNumber=o,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=d,this.ecBlocks=f;let h=0;const p=f.getECCodewords(),w=f.getECBlocks();for(let E of w)h+=E.getCount()*(E.getDataCodewords()+p);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,s){if(1&o||1&s)throw new q;for(let l of ke.VERSIONS)if(l.symbolSizeRows===o&&l.symbolSizeColumns===s)return l;throw new q}toString(){return""+this.versionNumber}static buildVersions(){return[new ke(1,10,10,8,8,new Xe(5,new Ze(1,3))),new ke(2,12,12,10,10,new Xe(7,new Ze(1,5))),new ke(3,14,14,12,12,new Xe(10,new Ze(1,8))),new ke(4,16,16,14,14,new Xe(12,new Ze(1,12))),new ke(5,18,18,16,16,new Xe(14,new Ze(1,18))),new ke(6,20,20,18,18,new Xe(18,new Ze(1,22))),new ke(7,22,22,20,20,new Xe(20,new Ze(1,30))),new ke(8,24,24,22,22,new Xe(24,new Ze(1,36))),new ke(9,26,26,24,24,new Xe(28,new Ze(1,44))),new ke(10,32,32,14,14,new Xe(36,new Ze(1,62))),new ke(11,36,36,16,16,new Xe(42,new Ze(1,86))),new ke(12,40,40,18,18,new Xe(48,new Ze(1,114))),new ke(13,44,44,20,20,new Xe(56,new Ze(1,144))),new ke(14,48,48,22,22,new Xe(68,new Ze(1,174))),new ke(15,52,52,24,24,new Xe(42,new Ze(2,102))),new ke(16,64,64,14,14,new Xe(56,new Ze(2,140))),new ke(17,72,72,16,16,new Xe(36,new Ze(4,92))),new ke(18,80,80,18,18,new Xe(48,new Ze(4,114))),new ke(19,88,88,20,20,new Xe(56,new Ze(4,144))),new ke(20,96,96,22,22,new Xe(68,new Ze(4,174))),new ke(21,104,104,24,24,new Xe(56,new Ze(6,136))),new ke(22,120,120,18,18,new Xe(68,new Ze(6,175))),new ke(23,132,132,20,20,new Xe(62,new Ze(8,163))),new ke(24,144,144,22,22,new Xe(62,new Ze(8,156),new Ze(2,155))),new ke(25,8,18,6,16,new Xe(7,new Ze(1,5))),new ke(26,8,32,6,14,new Xe(11,new Ze(1,10))),new ke(27,12,26,10,24,new Xe(14,new Ze(1,16))),new ke(28,12,36,10,16,new Xe(18,new Ze(1,22))),new ke(29,16,36,14,16,new Xe(24,new Ze(1,32))),new ke(30,16,48,14,22,new Xe(28,new Ze(1,49)))]}}ke.VERSIONS=ke.buildVersions();class Ct{constructor(o){const s=o.getHeight();if(s<8||s>144||1&s)throw new q;this.version=Ct.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new Lt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const s=o.getHeight(),l=o.getWidth();return ke.getVersionForDimensions(s,l)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,c=0;const d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let h=!1,p=!1,w=!1,E=!1;do{if(l!==d||0!==c||h)if(l===d-2&&0===c&&3&f&&!p)o[s++]=255&this.readCorner2(d,f),l-=2,c+=2,p=!0;else if(l!==d+4||2!==c||7&f||w)if(l!==d-2||0!==c||4!=(7&f)||E){do{l<d&&c>=0&&!this.readMappingMatrix.get(c,l)&&(o[s++]=255&this.readUtah(l,c,d,f)),l-=2,c+=2}while(l>=0&&c<f);l+=1,c+=3;do{l>=0&&c<f&&!this.readMappingMatrix.get(c,l)&&(o[s++]=255&this.readUtah(l,c,d,f)),l+=2,c-=2}while(l<d&&c>=0);l+=3,c+=1}else o[s++]=255&this.readCorner4(d,f),l-=2,c+=2,E=!0;else o[s++]=255&this.readCorner3(d,f),l-=2,c+=2,w=!0;else o[s++]=255&this.readCorner1(d,f),l-=2,c+=2,h=!0}while(l<d||c<f);if(s!==this.version.getTotalCodewords())throw new q;return o}readModule(o,s,l,c){return o<0&&(o+=l,s+=4-(l+4&7)),s<0&&(s+=c,o+=4-(c+4&7)),this.readMappingMatrix.set(s,o),this.mappingBitMatrix.get(s,o)}readUtah(o,s,l,c){let d=0;return this.readModule(o-2,s-2,l,c)&&(d|=1),d<<=1,this.readModule(o-2,s-1,l,c)&&(d|=1),d<<=1,this.readModule(o-1,s-2,l,c)&&(d|=1),d<<=1,this.readModule(o-1,s-1,l,c)&&(d|=1),d<<=1,this.readModule(o-1,s,l,c)&&(d|=1),d<<=1,this.readModule(o,s-2,l,c)&&(d|=1),d<<=1,this.readModule(o,s-1,l,c)&&(d|=1),d<<=1,this.readModule(o,s,l,c)&&(d|=1),d}readCorner1(o,s){let l=0;return this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,1,o,s)&&(l|=1),l<<=1,this.readModule(o-1,2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l<<=1,this.readModule(2,s-1,o,s)&&(l|=1),l<<=1,this.readModule(3,s-1,o,s)&&(l|=1),l}readCorner2(o,s){let l=0;return this.readModule(o-3,0,o,s)&&(l|=1),l<<=1,this.readModule(o-2,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(0,s-4,o,s)&&(l|=1),l<<=1,this.readModule(0,s-3,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l}readCorner3(o,s){let l=0;return this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,s-1,o,s)&&(l|=1),l<<=1,this.readModule(0,s-3,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-3,o,s)&&(l|=1),l<<=1,this.readModule(1,s-2,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l}readCorner4(o,s){let l=0;return this.readModule(o-3,0,o,s)&&(l|=1),l<<=1,this.readModule(o-2,0,o,s)&&(l|=1),l<<=1,this.readModule(o-1,0,o,s)&&(l|=1),l<<=1,this.readModule(0,s-2,o,s)&&(l|=1),l<<=1,this.readModule(0,s-1,o,s)&&(l|=1),l<<=1,this.readModule(1,s-1,o,s)&&(l|=1),l<<=1,this.readModule(2,s-1,o,s)&&(l|=1),l<<=1,this.readModule(3,s-1,o,s)&&(l|=1),l}extractDataRegion(o){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(o.getHeight()!==s)throw new te("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=s/c|0,h=l/d|0,E=new Lt(h*d,f*c);for(let A=0;A<f;++A){const I=A*c;for(let S=0;S<h;++S){const b=S*d;for(let M=0;M<c;++M){const O=A*(c+2)+1+M,N=I+M;for(let W=0;W<d;++W)o.get(S*(d+2)+1+W,O)&&E.set(b+W,N)}}}return E}}class Es{constructor(o,s){this.numDataCodewords=o,this.codewords=s}static getDataBlocks(o,s){const l=s.getECBlocks();let c=0;const d=l.getECBlocks();for(let M of d)c+=M.getCount();const f=new Array(c);let h=0;for(let M of d)for(let O=0;O<M.getCount();O++){const N=M.getDataCodewords(),W=l.getECCodewords()+N;f[h++]=new Es(N,new Uint8Array(W))}const w=f[0].codewords.length-l.getECCodewords(),E=w-1;let A=0;for(let M=0;M<E;M++)for(let O=0;O<h;O++)f[O].codewords[M]=o[A++];const I=24===s.getVersionNumber(),S=I?8:h;for(let M=0;M<S;M++)f[M].codewords[w-1]=o[A++];const b=f[0].codewords.length;for(let M=w;M<b;M++)for(let O=0;O<h;O++){const N=I?(O+8)%h:O;f[N].codewords[I&&N>7?M-1:M]=o[A++]}if(A!==o.length)throw new te;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ds{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new te(""+o);let s=0,l=this.bitOffset,c=this.byteOffset;const d=this.bytes;if(l>0){const f=8-l,h=o<f?o:f,p=f-h;s=(d[c]&255>>8-h<<p)>>p,o-=h,l+=h,8===l&&(l=0,c++)}if(o>0){for(;o>=8;)s=s<<8|255&d[c],c++,o-=8;if(o>0){const f=8-o;s=s<<o|(d[c]&255>>f<<f)>>f,l+=o}}return this.bitOffset=l,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var mt=(()=>{return(x=mt||(mt={}))[x.PAD_ENCODE=0]="PAD_ENCODE",x[x.ASCII_ENCODE=1]="ASCII_ENCODE",x[x.C40_ENCODE=2]="C40_ENCODE",x[x.TEXT_ENCODE=3]="TEXT_ENCODE",x[x.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",x[x.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",x[x.BASE256_ENCODE=6]="BASE256_ENCODE",mt;var x})();class je{static decode(o){const s=new Ds(o),l=new et,c=new et,d=new Array;let f=mt.ASCII_ENCODE;do{if(f===mt.ASCII_ENCODE)f=this.decodeAsciiSegment(s,l,c);else{switch(f){case mt.C40_ENCODE:this.decodeC40Segment(s,l);break;case mt.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case mt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case mt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case mt.BASE256_ENCODE:this.decodeBase256Segment(s,l,d);break;default:throw new q}f=mt.ASCII_ENCODE}}while(f!==mt.PAD_ENCODE&&s.available()>0);return c.length()>0&&l.append(c.toString()),new Ri(o,l.toString(),0===d.length?null:d,null)}static decodeAsciiSegment(o,s,l){let c=!1;do{let d=o.readBits(8);if(0===d)throw new q;if(d<=128)return c&&(d+=128),s.append(String.fromCharCode(d-1)),mt.ASCII_ENCODE;if(129===d)return mt.PAD_ENCODE;if(d<=229){const f=d-130;f<10&&s.append("0"),s.append(""+f)}else switch(d){case 230:return mt.C40_ENCODE;case 231:return mt.BASE256_ENCODE;case 232:s.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:c=!0;break;case 236:s.append("[)>\x1e05\x1d"),l.insert(0,"\x1e\x04");break;case 237:s.append("[)>\x1e06\x1d"),l.insert(0,"\x1e\x04");break;case 238:return mt.ANSIX12_ENCODE;case 239:return mt.TEXT_ENCODE;case 240:return mt.EDIFACT_ENCODE;default:if(254!==d||0!==o.available())throw new q}}while(o.available()>0);return mt.ASCII_ENCODE}static decodeC40Segment(o,s){let l=!1;const c=[];let d=0;do{if(8===o.available())return;const f=o.readBits(8);if(254===f)return;this.parseTwoBytes(f,o.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(d){case 0:if(p<3)d=p+1;else{if(!(p<this.C40_BASIC_SET_CHARS.length))throw new q;{const w=this.C40_BASIC_SET_CHARS[p];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}}break;case 1:l?(s.append(String.fromCharCode(p+128)),l=!1):s.append(String.fromCharCode(p)),d=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[p];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}else switch(p){case 27:s.append(String.fromCharCode(29));break;case 30:l=!0;break;default:throw new q}d=0;break;case 3:l?(s.append(String.fromCharCode(p+224)),l=!1):s.append(String.fromCharCode(p+96)),d=0;break;default:throw new q}}}while(o.available()>0)}static decodeTextSegment(o,s){let l=!1,c=[],d=0;do{if(8===o.available())return;const f=o.readBits(8);if(254===f)return;this.parseTwoBytes(f,o.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(d){case 0:if(p<3)d=p+1;else{if(!(p<this.TEXT_BASIC_SET_CHARS.length))throw new q;{const w=this.TEXT_BASIC_SET_CHARS[p];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}}break;case 1:l?(s.append(String.fromCharCode(p+128)),l=!1):s.append(String.fromCharCode(p)),d=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[p];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w)}else switch(p){case 27:s.append(String.fromCharCode(29));break;case 30:l=!0;break;default:throw new q}d=0;break;case 3:if(!(p<this.TEXT_SHIFT3_SET_CHARS.length))throw new q;{const w=this.TEXT_SHIFT3_SET_CHARS[p];l?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),l=!1):s.append(w),d=0}break;default:throw new q}}}while(o.available()>0)}static decodeAnsiX12Segment(o,s){const l=[];do{if(8===o.available())return;const c=o.readBits(8);if(254===c)return;this.parseTwoBytes(c,o.readBits(8),l);for(let d=0;d<3;d++){const f=l[d];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else{if(!(f<40))throw new q;s.append(String.fromCharCode(f+51))}}}}while(o.available()>0)}static parseTwoBytes(o,s,l){let c=(o<<8)+s-1,d=Math.floor(c/1600);l[0]=d,c-=1600*d,d=Math.floor(c/40),l[1]=d,l[2]=c-40*d}static decodeEdifactSegment(o,s){do{if(o.available()<=16)return;for(let l=0;l<4;l++){let c=o.readBits(6);if(31===c){const d=8-o.getBitOffset();return void(8!==d&&o.readBits(d))}32&c||(c|=64),s.append(String.fromCharCode(c))}}while(o.available()>0)}static decodeBase256Segment(o,s,l){let c=1+o.getByteOffset();const d=this.unrandomize255State(o.readBits(8),c++);let f;if(f=0===d?o.available()/8|0:d<250?d:250*(d-249)+this.unrandomize255State(o.readBits(8),c++),f<0)throw new q;const h=new Uint8Array(f);for(let p=0;p<f;p++){if(o.available()<8)throw new q;h[p]=this.unrandomize255State(o.readBits(8),c++)}l.push(h);try{s.append(Ht.decode(h,Ce.ISO88591))}catch(p){throw new Er("Platform does not support required encoding: "+p.message)}}static unrandomize255State(o,s){const c=o-(149*s%255+1);return c>=0?c:c+256}}je.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],je.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],je.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],je.TEXT_SHIFT2_SET_CHARS=je.C40_SHIFT2_SET_CHARS,je.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class As{constructor(){this.rsDecoder=new ao(Ge.DATA_MATRIX_FIELD_256)}decode(o){const s=new Ct(o),l=s.getVersion(),c=s.readCodewords(),d=Es.getDataBlocks(c,l);let f=0;for(let w of d)f+=w.getNumDataCodewords();const h=new Uint8Array(f),p=d.length;for(let w=0;w<p;w++){const E=d[w],A=E.getCodewords(),I=E.getNumDataCodewords();this.correctErrors(A,I);for(let S=0;S<I;S++)h[S*p+w]=A[S]}return je.decode(h)}correctErrors(o,s){const l=new Int32Array(o);try{this.rsDecoder.decode(l,o.length-s)}catch{throw new St}for(let c=0;c<s;c++)o[c]=l[c]}}class Ee{constructor(o){this.image=o,this.rectangleDetector=new Oi(this.image)}detect(){const o=this.rectangleDetector.detect();let s=this.detectSolid1(o);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new U;s=this.shiftToModuleCenter(s);const l=s[0],c=s[1],d=s[2],f=s[3];let h=this.transitionsBetween(l,f)+1,p=this.transitionsBetween(d,f)+1;1==(1&h)&&(h+=1),1==(1&p)&&(p+=1),4*h<7*p&&4*p<7*h&&(h=p=Math.max(h,p));let w=Ee.sampleGrid(this.image,l,c,d,f,h,p);return new lo(w,[l,c,d,f])}static shiftPoint(o,s,l){let c=(s.getX()-o.getX())/(l+1),d=(s.getY()-o.getY())/(l+1);return new ie(o.getX()+c,o.getY()+d)}static moveAway(o,s,l){let c=o.getX(),d=o.getY();return c<s?c-=1:c+=1,d<l?d-=1:d+=1,new ie(c,d)}detectSolid1(o){let s=o[0],l=o[1],c=o[3],d=o[2],f=this.transitionsBetween(s,l),h=this.transitionsBetween(l,c),p=this.transitionsBetween(c,d),w=this.transitionsBetween(d,s),E=f,A=[d,s,l,c];return E>h&&(E=h,A[0]=s,A[1]=l,A[2]=c,A[3]=d),E>p&&(E=p,A[0]=l,A[1]=c,A[2]=d,A[3]=s),E>w&&(A[0]=c,A[1]=d,A[2]=s,A[3]=l),A}detectSolid2(o){let s=o[0],l=o[1],c=o[2],d=o[3],f=this.transitionsBetween(s,d),h=Ee.shiftPoint(l,c,4*(f+1)),p=Ee.shiftPoint(c,l,4*(f+1));return this.transitionsBetween(h,s)<this.transitionsBetween(p,d)?(o[0]=s,o[1]=l,o[2]=c,o[3]=d):(o[0]=l,o[1]=c,o[2]=d,o[3]=s),o}correctTopRight(o){let s=o[0],l=o[1],c=o[2],d=o[3],f=this.transitionsBetween(s,d),h=this.transitionsBetween(l,d),p=Ee.shiftPoint(s,l,4*(h+1)),w=Ee.shiftPoint(c,l,4*(f+1));f=this.transitionsBetween(p,d),h=this.transitionsBetween(w,d);let E=new ie(d.getX()+(c.getX()-l.getX())/(f+1),d.getY()+(c.getY()-l.getY())/(f+1)),A=new ie(d.getX()+(s.getX()-l.getX())/(h+1),d.getY()+(s.getY()-l.getY())/(h+1));return this.isValid(E)?this.isValid(A)?this.transitionsBetween(p,E)+this.transitionsBetween(w,E)>this.transitionsBetween(p,A)+this.transitionsBetween(w,A)?E:A:E:this.isValid(A)?A:null}shiftToModuleCenter(o){let s=o[0],l=o[1],c=o[2],d=o[3],f=this.transitionsBetween(s,d)+1,h=this.transitionsBetween(c,d)+1,p=Ee.shiftPoint(s,l,4*h),w=Ee.shiftPoint(c,l,4*f);f=this.transitionsBetween(p,d)+1,h=this.transitionsBetween(w,d)+1,1==(1&f)&&(f+=1),1==(1&h)&&(h+=1);let I,S,E=(s.getX()+l.getX()+c.getX()+d.getX())/4,A=(s.getY()+l.getY()+c.getY()+d.getY())/4;return s=Ee.moveAway(s,E,A),l=Ee.moveAway(l,E,A),c=Ee.moveAway(c,E,A),d=Ee.moveAway(d,E,A),p=Ee.shiftPoint(s,l,4*h),p=Ee.shiftPoint(p,d,4*f),I=Ee.shiftPoint(l,s,4*h),I=Ee.shiftPoint(I,c,4*f),w=Ee.shiftPoint(c,d,4*h),w=Ee.shiftPoint(w,l,4*f),S=Ee.shiftPoint(d,c,4*h),S=Ee.shiftPoint(S,s,4*f),[p,I,w,S]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,s,l,c,d,f,h){return Vr.getInstance().sampleGrid(o,f,h,.5,.5,f-.5,.5,f-.5,h-.5,.5,h-.5,s.getX(),s.getY(),d.getX(),d.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(o,s){let l=Math.trunc(o.getX()),c=Math.trunc(o.getY()),d=Math.trunc(s.getX()),f=Math.trunc(s.getY()),h=Math.abs(f-c)>Math.abs(d-l);if(h){let M=l;l=c,c=M,M=d,d=f,f=M}let p=Math.abs(d-l),w=Math.abs(f-c),E=-p/2,A=c<f?1:-1,I=l<d?1:-1,S=0,b=this.image.get(h?c:l,h?l:c);for(let M=l,O=c;M!==d;M+=I){let N=this.image.get(h?O:M,h?M:O);if(N!==b&&(S++,b=N),E+=w,E>0){if(O===f)break;O+=A,E-=p}}return S}}let gi=(()=>{class x{constructor(){this.decoder=new As}decode(s,l=null){let c,d;if(null!=l&&l.has(at.PURE_BARCODE)){const E=x.extractPureBits(s.getBlackMatrix());c=this.decoder.decode(E),d=x.NO_POINTS}else{const E=new Ee(s.getBlackMatrix()).detect();c=this.decoder.decode(E.getBits()),d=E.getPoints()}const f=c.getRawBytes(),h=new ft(c.getText(),f,8*f.length,d,le.DATA_MATRIX,rt.currentTimeMillis()),p=c.getByteSegments();null!=p&&h.putMetadata(Fe.BYTE_SEGMENTS,p);const w=c.getECLevel();return null!=w&&h.putMetadata(Fe.ERROR_CORRECTION_LEVEL,w),h}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),c=s.getBottomRightOnBit();if(null==l||null==c)throw new U;const d=this.moduleSize(l,s);let f=l[1],p=l[0];const E=(c[0]-p+1)/d,A=(c[1]-f+1)/d;if(E<=0||A<=0)throw new U;const I=d/2;f+=I,p+=I;const S=new Lt(E,A);for(let b=0;b<A;b++){const M=f+b*d;for(let O=0;O<E;O++)s.get(p+O*d,M)&&S.set(O,b)}return S}static moduleSize(s,l){const c=l.getWidth();let d=s[0];const f=s[1];for(;d<c&&l.get(d,f);)d++;if(d===c)throw new U;const h=d-s[0];if(0===h)throw new U;return h}}return x.NO_POINTS=[],x})();var ar=(()=>{return(x=ar||(ar={}))[x.L=0]="L",x[x.M=1]="M",x[x.Q=2]="Q",x[x.H=3]="H",ar;var x})();class K{constructor(o,s,l){this.value=o,this.stringValue=s,this.bits=l,K.FOR_BITS.set(l,this),K.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return K.L;case"M":return K.M;case"Q":return K.Q;case"H":return K.H;default:throw new gn(o+"not available")}}toString(){return this.stringValue}equals(o){return o instanceof K&&this.value===o.value}static forBits(o){if(o<0||o>=K.FOR_BITS.size)throw new te;return K.FOR_BITS.get(o)}}K.FOR_BITS=new Map,K.FOR_VALUE=new Map,K.L=new K(ar.L,"L",1),K.M=new K(ar.M,"M",0),K.Q=new K(ar.Q,"Q",3),K.H=new K(ar.H,"H",2);class Pt{constructor(o){this.errorCorrectionLevel=K.forBits(o>>3&3),this.dataMask=7&o}static numBitsDiffering(o,s){return De.bitCount(o^s)}static decodeFormatInformation(o,s){const l=Pt.doDecodeFormatInformation(o,s);return null!==l?l:Pt.doDecodeFormatInformation(o^Pt.FORMAT_INFO_MASK_QR,s^Pt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,s){let l=Number.MAX_SAFE_INTEGER,c=0;for(const d of Pt.FORMAT_INFO_DECODE_LOOKUP){const f=d[0];if(f===o||f===s)return new Pt(d[1]);let h=Pt.numBitsDiffering(o,f);h<l&&(c=d[1],l=h),o!==s&&(h=Pt.numBitsDiffering(s,f),h<l&&(c=d[1],l=h))}return l<=3?new Pt(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){return o instanceof Pt&&this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Pt.FORMAT_INFO_MASK_QR=21522,Pt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class L{constructor(o,...s){this.ecCodewordsPerBlock=o,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const s=this.ecBlocks;for(const l of s)o+=l.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class _{constructor(o,s){this.count=o,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class oe{constructor(o,s,...l){this.versionNumber=o,this.alignmentPatternCenters=s,this.ecBlocks=l;let c=0;const d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const h of f)c+=h.getCount()*(h.getDataCodewords()+d);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!=1)throw new q;try{return this.getVersionForNumber((o-17)/4)}catch{throw new q}}static getVersionForNumber(o){if(o<1||o>40)throw new te;return oe.VERSIONS[o-1]}static decodeVersionInformation(o){let s=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<oe.VERSION_DECODE_INFO.length;c++){const d=oe.VERSION_DECODE_INFO[c];if(d===o)return oe.getVersionForNumber(c+7);const f=Pt.numBitsDiffering(o,d);f<s&&(l=c+7,s=f)}return s<=3?oe.getVersionForNumber(l):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),s=new Lt(o);s.setRegion(0,0,9,9),s.setRegion(o-8,0,8,9),s.setRegion(0,o-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const d=this.alignmentPatternCenters[c]-2;for(let f=0;f<l;f++)0===c&&(0===f||f===l-1)||c===l-1&&0===f||s.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return s.setRegion(6,9,1,o-17),s.setRegion(9,6,o-17,1),this.versionNumber>6&&(s.setRegion(o-11,0,3,6),s.setRegion(0,o-11,6,3)),s}toString(){return""+this.versionNumber}}oe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),oe.VERSIONS=[new oe(1,new Int32Array(0),new L(7,new _(1,19)),new L(10,new _(1,16)),new L(13,new _(1,13)),new L(17,new _(1,9))),new oe(2,Int32Array.from([6,18]),new L(10,new _(1,34)),new L(16,new _(1,28)),new L(22,new _(1,22)),new L(28,new _(1,16))),new oe(3,Int32Array.from([6,22]),new L(15,new _(1,55)),new L(26,new _(1,44)),new L(18,new _(2,17)),new L(22,new _(2,13))),new oe(4,Int32Array.from([6,26]),new L(20,new _(1,80)),new L(18,new _(2,32)),new L(26,new _(2,24)),new L(16,new _(4,9))),new oe(5,Int32Array.from([6,30]),new L(26,new _(1,108)),new L(24,new _(2,43)),new L(18,new _(2,15),new _(2,16)),new L(22,new _(2,11),new _(2,12))),new oe(6,Int32Array.from([6,34]),new L(18,new _(2,68)),new L(16,new _(4,27)),new L(24,new _(4,19)),new L(28,new _(4,15))),new oe(7,Int32Array.from([6,22,38]),new L(20,new _(2,78)),new L(18,new _(4,31)),new L(18,new _(2,14),new _(4,15)),new L(26,new _(4,13),new _(1,14))),new oe(8,Int32Array.from([6,24,42]),new L(24,new _(2,97)),new L(22,new _(2,38),new _(2,39)),new L(22,new _(4,18),new _(2,19)),new L(26,new _(4,14),new _(2,15))),new oe(9,Int32Array.from([6,26,46]),new L(30,new _(2,116)),new L(22,new _(3,36),new _(2,37)),new L(20,new _(4,16),new _(4,17)),new L(24,new _(4,12),new _(4,13))),new oe(10,Int32Array.from([6,28,50]),new L(18,new _(2,68),new _(2,69)),new L(26,new _(4,43),new _(1,44)),new L(24,new _(6,19),new _(2,20)),new L(28,new _(6,15),new _(2,16))),new oe(11,Int32Array.from([6,30,54]),new L(20,new _(4,81)),new L(30,new _(1,50),new _(4,51)),new L(28,new _(4,22),new _(4,23)),new L(24,new _(3,12),new _(8,13))),new oe(12,Int32Array.from([6,32,58]),new L(24,new _(2,92),new _(2,93)),new L(22,new _(6,36),new _(2,37)),new L(26,new _(4,20),new _(6,21)),new L(28,new _(7,14),new _(4,15))),new oe(13,Int32Array.from([6,34,62]),new L(26,new _(4,107)),new L(22,new _(8,37),new _(1,38)),new L(24,new _(8,20),new _(4,21)),new L(22,new _(12,11),new _(4,12))),new oe(14,Int32Array.from([6,26,46,66]),new L(30,new _(3,115),new _(1,116)),new L(24,new _(4,40),new _(5,41)),new L(20,new _(11,16),new _(5,17)),new L(24,new _(11,12),new _(5,13))),new oe(15,Int32Array.from([6,26,48,70]),new L(22,new _(5,87),new _(1,88)),new L(24,new _(5,41),new _(5,42)),new L(30,new _(5,24),new _(7,25)),new L(24,new _(11,12),new _(7,13))),new oe(16,Int32Array.from([6,26,50,74]),new L(24,new _(5,98),new _(1,99)),new L(28,new _(7,45),new _(3,46)),new L(24,new _(15,19),new _(2,20)),new L(30,new _(3,15),new _(13,16))),new oe(17,Int32Array.from([6,30,54,78]),new L(28,new _(1,107),new _(5,108)),new L(28,new _(10,46),new _(1,47)),new L(28,new _(1,22),new _(15,23)),new L(28,new _(2,14),new _(17,15))),new oe(18,Int32Array.from([6,30,56,82]),new L(30,new _(5,120),new _(1,121)),new L(26,new _(9,43),new _(4,44)),new L(28,new _(17,22),new _(1,23)),new L(28,new _(2,14),new _(19,15))),new oe(19,Int32Array.from([6,30,58,86]),new L(28,new _(3,113),new _(4,114)),new L(26,new _(3,44),new _(11,45)),new L(26,new _(17,21),new _(4,22)),new L(26,new _(9,13),new _(16,14))),new oe(20,Int32Array.from([6,34,62,90]),new L(28,new _(3,107),new _(5,108)),new L(26,new _(3,41),new _(13,42)),new L(30,new _(15,24),new _(5,25)),new L(28,new _(15,15),new _(10,16))),new oe(21,Int32Array.from([6,28,50,72,94]),new L(28,new _(4,116),new _(4,117)),new L(26,new _(17,42)),new L(28,new _(17,22),new _(6,23)),new L(30,new _(19,16),new _(6,17))),new oe(22,Int32Array.from([6,26,50,74,98]),new L(28,new _(2,111),new _(7,112)),new L(28,new _(17,46)),new L(30,new _(7,24),new _(16,25)),new L(24,new _(34,13))),new oe(23,Int32Array.from([6,30,54,78,102]),new L(30,new _(4,121),new _(5,122)),new L(28,new _(4,47),new _(14,48)),new L(30,new _(11,24),new _(14,25)),new L(30,new _(16,15),new _(14,16))),new oe(24,Int32Array.from([6,28,54,80,106]),new L(30,new _(6,117),new _(4,118)),new L(28,new _(6,45),new _(14,46)),new L(30,new _(11,24),new _(16,25)),new L(30,new _(30,16),new _(2,17))),new oe(25,Int32Array.from([6,32,58,84,110]),new L(26,new _(8,106),new _(4,107)),new L(28,new _(8,47),new _(13,48)),new L(30,new _(7,24),new _(22,25)),new L(30,new _(22,15),new _(13,16))),new oe(26,Int32Array.from([6,30,58,86,114]),new L(28,new _(10,114),new _(2,115)),new L(28,new _(19,46),new _(4,47)),new L(28,new _(28,22),new _(6,23)),new L(30,new _(33,16),new _(4,17))),new oe(27,Int32Array.from([6,34,62,90,118]),new L(30,new _(8,122),new _(4,123)),new L(28,new _(22,45),new _(3,46)),new L(30,new _(8,23),new _(26,24)),new L(30,new _(12,15),new _(28,16))),new oe(28,Int32Array.from([6,26,50,74,98,122]),new L(30,new _(3,117),new _(10,118)),new L(28,new _(3,45),new _(23,46)),new L(30,new _(4,24),new _(31,25)),new L(30,new _(11,15),new _(31,16))),new oe(29,Int32Array.from([6,30,54,78,102,126]),new L(30,new _(7,116),new _(7,117)),new L(28,new _(21,45),new _(7,46)),new L(30,new _(1,23),new _(37,24)),new L(30,new _(19,15),new _(26,16))),new oe(30,Int32Array.from([6,26,52,78,104,130]),new L(30,new _(5,115),new _(10,116)),new L(28,new _(19,47),new _(10,48)),new L(30,new _(15,24),new _(25,25)),new L(30,new _(23,15),new _(25,16))),new oe(31,Int32Array.from([6,30,56,82,108,134]),new L(30,new _(13,115),new _(3,116)),new L(28,new _(2,46),new _(29,47)),new L(30,new _(42,24),new _(1,25)),new L(30,new _(23,15),new _(28,16))),new oe(32,Int32Array.from([6,34,60,86,112,138]),new L(30,new _(17,115)),new L(28,new _(10,46),new _(23,47)),new L(30,new _(10,24),new _(35,25)),new L(30,new _(19,15),new _(35,16))),new oe(33,Int32Array.from([6,30,58,86,114,142]),new L(30,new _(17,115),new _(1,116)),new L(28,new _(14,46),new _(21,47)),new L(30,new _(29,24),new _(19,25)),new L(30,new _(11,15),new _(46,16))),new oe(34,Int32Array.from([6,34,62,90,118,146]),new L(30,new _(13,115),new _(6,116)),new L(28,new _(14,46),new _(23,47)),new L(30,new _(44,24),new _(7,25)),new L(30,new _(59,16),new _(1,17))),new oe(35,Int32Array.from([6,30,54,78,102,126,150]),new L(30,new _(12,121),new _(7,122)),new L(28,new _(12,47),new _(26,48)),new L(30,new _(39,24),new _(14,25)),new L(30,new _(22,15),new _(41,16))),new oe(36,Int32Array.from([6,24,50,76,102,128,154]),new L(30,new _(6,121),new _(14,122)),new L(28,new _(6,47),new _(34,48)),new L(30,new _(46,24),new _(10,25)),new L(30,new _(2,15),new _(64,16))),new oe(37,Int32Array.from([6,28,54,80,106,132,158]),new L(30,new _(17,122),new _(4,123)),new L(28,new _(29,46),new _(14,47)),new L(30,new _(49,24),new _(10,25)),new L(30,new _(24,15),new _(46,16))),new oe(38,Int32Array.from([6,32,58,84,110,136,162]),new L(30,new _(4,122),new _(18,123)),new L(28,new _(13,46),new _(32,47)),new L(30,new _(48,24),new _(14,25)),new L(30,new _(42,15),new _(32,16))),new oe(39,Int32Array.from([6,26,54,82,110,138,166]),new L(30,new _(20,117),new _(4,118)),new L(28,new _(40,47),new _(7,48)),new L(30,new _(43,24),new _(22,25)),new L(30,new _(10,15),new _(67,16))),new oe(40,Int32Array.from([6,30,58,86,114,142,170]),new L(30,new _(19,118),new _(6,119)),new L(28,new _(18,47),new _(31,48)),new L(30,new _(34,24),new _(34,25)),new L(30,new _(20,15),new _(61,16)))];var $=(()=>{return(x=$||($={}))[x.DATA_MASK_000=0]="DATA_MASK_000",x[x.DATA_MASK_001=1]="DATA_MASK_001",x[x.DATA_MASK_010=2]="DATA_MASK_010",x[x.DATA_MASK_011=3]="DATA_MASK_011",x[x.DATA_MASK_100=4]="DATA_MASK_100",x[x.DATA_MASK_101=5]="DATA_MASK_101",x[x.DATA_MASK_110=6]="DATA_MASK_110",x[x.DATA_MASK_111=7]="DATA_MASK_111",$;var x})();class nn{constructor(o,s){this.value=o,this.isMasked=s}unmaskBitMatrix(o,s){for(let l=0;l<s;l++)for(let c=0;c<s;c++)this.isMasked(l,c)&&o.flip(c,l)}}nn.values=new Map([[$.DATA_MASK_000,new nn($.DATA_MASK_000,(x,o)=>0==(x+o&1))],[$.DATA_MASK_001,new nn($.DATA_MASK_001,(x,o)=>0==(1&x))],[$.DATA_MASK_010,new nn($.DATA_MASK_010,(x,o)=>o%3==0)],[$.DATA_MASK_011,new nn($.DATA_MASK_011,(x,o)=>(x+o)%3==0)],[$.DATA_MASK_100,new nn($.DATA_MASK_100,(x,o)=>0==(Math.floor(x/2)+Math.floor(o/3)&1))],[$.DATA_MASK_101,new nn($.DATA_MASK_101,(x,o)=>x*o%6==0)],[$.DATA_MASK_110,new nn($.DATA_MASK_110,(x,o)=>x*o%6<3)],[$.DATA_MASK_111,new nn($.DATA_MASK_111,(x,o)=>0==(x+o+x*o%3&1))]]);class Ae{constructor(o){const s=o.getHeight();if(s<21||1!=(3&s))throw new q;this.bitMatrix=o}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let o=0;for(let d=0;d<6;d++)o=this.copyBit(d,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let d=5;d>=0;d--)o=this.copyBit(8,d,o);const s=this.bitMatrix.getHeight();let l=0;const c=s-7;for(let d=s-1;d>=c;d--)l=this.copyBit(8,d,l);for(let d=s-8;d<s;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Pt.decodeFormatInformation(o,l),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new q}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const o=this.bitMatrix.getHeight(),s=Math.floor((o-17)/4);if(s<=6)return oe.getVersionForNumber(s);let l=0;const c=o-11;for(let f=5;f>=0;f--)for(let h=o-9;h>=c;h--)l=this.copyBit(h,f,l);let d=oe.decodeVersionInformation(l);if(null!==d&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let h=o-9;h>=c;h--)l=this.copyBit(f,h,l);if(d=oe.decodeVersionInformation(l),null!==d&&d.getDimensionForVersion()===o)return this.parsedVersion=d,d;throw new q}copyBit(o,s,l){return(this.isMirror?this.bitMatrix.get(s,o):this.bitMatrix.get(o,s))?l<<1|1:l<<1}readCodewords(){const o=this.readFormatInformation(),s=this.readVersion(),l=nn.values.get(o.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const d=s.buildFunctionPattern();let f=!0;const h=new Uint8Array(s.getTotalCodewords());let p=0,w=0,E=0;for(let A=c-1;A>0;A-=2){6===A&&A--;for(let I=0;I<c;I++){const S=f?c-1-I:I;for(let b=0;b<2;b++)d.get(A-b,S)||(E++,w<<=1,this.bitMatrix.get(A-b,S)&&(w|=1),8===E&&(h[p++]=w,E=0,w=0))}f=!f}if(p!==s.getTotalCodewords())throw new q;return h}remask(){if(null===this.parsedFormatInfo)return;const o=nn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,s)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let s=0,l=o.getWidth();s<l;s++)for(let c=s+1,d=o.getHeight();c<d;c++)o.get(s,c)!==o.get(c,s)&&(o.flip(c,s),o.flip(s,c))}}class $e{constructor(o,s){this.numDataCodewords=o,this.codewords=s}static getDataBlocks(o,s,l){if(o.length!==s.getTotalCodewords())throw new te;const c=s.getECBlocksForLevel(l);let d=0;const f=c.getECBlocks();for(const b of f)d+=b.getCount();const h=new Array(d);let p=0;for(const b of f)for(let M=0;M<b.getCount();M++){const O=b.getDataCodewords(),N=c.getECCodewordsPerBlock()+O;h[p++]=new $e(O,new Uint8Array(N))}const w=h[0].codewords.length;let E=h.length-1;for(;E>=0&&h[E].codewords.length!==w;)E--;E++;const A=w-c.getECCodewordsPerBlock();let I=0;for(let b=0;b<A;b++)for(let M=0;M<p;M++)h[M].codewords[b]=o[I++];for(let b=E;b<p;b++)h[b].codewords[A]=o[I++];const S=h[0].codewords.length;for(let b=A;b<S;b++)for(let M=0;M<p;M++)h[M].codewords[M<E?b:b+1]=o[I++];return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var pn=(()=>{return(x=pn||(pn={}))[x.TERMINATOR=0]="TERMINATOR",x[x.NUMERIC=1]="NUMERIC",x[x.ALPHANUMERIC=2]="ALPHANUMERIC",x[x.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",x[x.BYTE=4]="BYTE",x[x.ECI=5]="ECI",x[x.KANJI=6]="KANJI",x[x.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",x[x.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",x[x.HANZI=9]="HANZI",pn;var x})();class ce{constructor(o,s,l,c){this.value=o,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=c,ce.FOR_BITS.set(c,this),ce.FOR_VALUE.set(o,this)}static forBits(o){const s=ce.FOR_BITS.get(o);if(void 0===s)throw new te;return s}getCharacterCountBits(o){const s=o.getVersionNumber();let l;return l=s<=9?0:s<=26?1:2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(o){return o instanceof ce&&this.value===o.value}toString(){return this.stringValue}}ce.FOR_BITS=new Map,ce.FOR_VALUE=new Map,ce.TERMINATOR=new ce(pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ce.NUMERIC=new ce(pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ce.ALPHANUMERIC=new ce(pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ce.STRUCTURED_APPEND=new ce(pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ce.BYTE=new ce(pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ce.ECI=new ce(pn.ECI,"ECI",Int32Array.from([0,0,0]),7),ce.KANJI=new ce(pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ce.FNC1_FIRST_POSITION=new ce(pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ce.FNC1_SECOND_POSITION=new ce(pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ce.HANZI=new ce(pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let $a=(()=>{class x{static decode(s,l,c,d){const f=new Ds(s);let h=new et;const p=new Array;let w=-1,E=-1;try{let S,A=null,I=!1;do{if(f.available()<4)S=ce.TERMINATOR;else{const b=f.readBits(4);S=ce.forBits(b)}switch(S){case ce.TERMINATOR:break;case ce.FNC1_FIRST_POSITION:case ce.FNC1_SECOND_POSITION:I=!0;break;case ce.STRUCTURED_APPEND:if(f.available()<16)throw new q;w=f.readBits(8),E=f.readBits(8);break;case ce.ECI:const b=x.parseECIValue(f);if(A=Y.getCharacterSetECIByValue(b),null===A)throw new q;break;case ce.HANZI:const M=f.readBits(4),O=f.readBits(S.getCharacterCountBits(l));M===x.GB2312_SUBSET&&x.decodeHanziSegment(f,h,O);break;default:const N=f.readBits(S.getCharacterCountBits(l));switch(S){case ce.NUMERIC:x.decodeNumericSegment(f,h,N);break;case ce.ALPHANUMERIC:x.decodeAlphanumericSegment(f,h,N,I);break;case ce.BYTE:x.decodeByteSegment(f,h,N,A,p,d);break;case ce.KANJI:x.decodeKanjiSegment(f,h,N);break;default:throw new q}}}while(S!==ce.TERMINATOR)}catch{throw new q}return new Ri(s,h.toString(),0===p.length?null:p,null===c?null:c.toString(),w,E)}static decodeHanziSegment(s,l,c){if(13*c>s.available())throw new q;const d=new Uint8Array(2*c);let f=0;for(;c>0;){const h=s.readBits(13);let p=h/96<<8&4294967295|h%96;p+=p<959?41377:42657,d[f]=p>>8&255,d[f+1]=255&p,f+=2,c--}try{l.append(Ht.decode(d,Ce.GB2312))}catch(h){throw new q(h)}}static decodeKanjiSegment(s,l,c){if(13*c>s.available())throw new q;const d=new Uint8Array(2*c);let f=0;for(;c>0;){const h=s.readBits(13);let p=h/192<<8&4294967295|h%192;p+=p<7936?33088:49472,d[f]=p>>8,d[f+1]=p,f+=2,c--}try{l.append(Ht.decode(d,Ce.SHIFT_JIS))}catch(h){throw new q(h)}}static decodeByteSegment(s,l,c,d,f,h){if(8*c>s.available())throw new q;const p=new Uint8Array(c);for(let E=0;E<c;E++)p[E]=s.readBits(8);let w;w=null===d?Ce.guessEncoding(p,h):d.getName();try{l.append(Ht.decode(p,w))}catch(E){throw new q(E)}f.push(p)}static toAlphaNumericChar(s){if(s>=x.ALPHANUMERIC_CHARS.length)throw new q;return x.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,l,c,d){const f=l.length();for(;c>1;){if(s.available()<11)throw new q;const h=s.readBits(11);l.append(x.toAlphaNumericChar(Math.floor(h/45))),l.append(x.toAlphaNumericChar(h%45)),c-=2}if(1===c){if(s.available()<6)throw new q;l.append(x.toAlphaNumericChar(s.readBits(6)))}if(d)for(let h=f;h<l.length();h++)"%"===l.charAt(h)&&(h<l.length()-1&&"%"===l.charAt(h+1)?l.deleteCharAt(h+1):l.setCharAt(h,String.fromCharCode(29)))}static decodeNumericSegment(s,l,c){for(;c>=3;){if(s.available()<10)throw new q;const d=s.readBits(10);if(d>=1e3)throw new q;l.append(x.toAlphaNumericChar(Math.floor(d/100))),l.append(x.toAlphaNumericChar(Math.floor(d/10)%10)),l.append(x.toAlphaNumericChar(d%10)),c-=3}if(2===c){if(s.available()<7)throw new q;const d=s.readBits(7);if(d>=100)throw new q;l.append(x.toAlphaNumericChar(Math.floor(d/10))),l.append(x.toAlphaNumericChar(d%10))}else if(1===c){if(s.available()<4)throw new q;const d=s.readBits(4);if(d>=10)throw new q;l.append(x.toAlphaNumericChar(d))}}static parseECIValue(s){const l=s.readBits(8);if(!(128&l))return 127&l;if(128==(192&l))return(63&l)<<8&4294967295|s.readBits(8);if(192==(224&l))return(31&l)<<16&4294967295|s.readBits(16);throw new q}}return x.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",x.GB2312_SUBSET=1,x})();class Fi{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||null===o||o.length<3)return;const s=o[0];o[0]=o[2],o[2]=s}}class mn{constructor(){this.rsDecoder=new ao(Ge.QR_CODE_FIELD_256)}decodeBooleanArray(o,s){return this.decodeBitMatrix(Lt.parseFromBooleanArray(o),s)}decodeBitMatrix(o,s){const l=new Ae(o);let c=null;try{return this.decodeBitMatrixParser(l,s)}catch(d){c=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,s);return d.setOther(new Fi(!0)),d}catch(d){throw null!==c?c:d}}decodeBitMatrixParser(o,s){const l=o.readVersion(),c=o.readFormatInformation().getErrorCorrectionLevel(),d=o.readCodewords(),f=$e.getDataBlocks(d,l,c);let h=0;for(const E of f)h+=E.getNumDataCodewords();const p=new Uint8Array(h);let w=0;for(const E of f){const A=E.getCodewords(),I=E.getNumDataCodewords();this.correctErrors(A,I);for(let S=0;S<I;S++)p[w++]=A[S]}return $a.decode(p,l,c,s)}correctErrors(o,s){const l=new Int32Array(o);try{this.rsDecoder.decode(l,o.length-s)}catch{throw new St}for(let c=0;c<s;c++)o[c]=l[c]}}class Ya extends ie{constructor(o,s,l){super(o,s),this.estimatedModuleSize=l}aboutEquals(o,s,l){if(Math.abs(s-this.getY())<=o&&Math.abs(l-this.getX())<=o){const c=Math.abs(o-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(o,s,l){const c=(this.getX()+s)/2,d=(this.getY()+o)/2;return new Ya(c,d,(this.estimatedModuleSize+l)/2)}}class ho{constructor(o,s,l,c,d,f,h){this.image=o,this.startX=s,this.startY=l,this.width=c,this.height=d,this.moduleSize=f,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,s=this.height,c=o+this.width,d=this.startY+s/2,f=new Int32Array(3),h=this.image;for(let p=0;p<s;p++){const w=d+(1&p?-Math.floor((p+1)/2):Math.floor((p+1)/2));f[0]=0,f[1]=0,f[2]=0;let E=o;for(;E<c&&!h.get(E,w);)E++;let A=0;for(;E<c;){if(h.get(E,w))if(1===A)f[1]++;else if(2===A){if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,w,E);if(null!==I)return I}f[0]=f[2],f[1]=1,f[2]=0,A=1}else f[++A]++;else 1===A&&A++,f[A]++;E++}if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,w,c);if(null!==I)return I}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new U}static centerFromEnd(o,s){return s-o[2]-o[1]/2}foundPatternCross(o){const s=this.moduleSize,l=s/2;for(let c=0;c<3;c++)if(Math.abs(s-o[c])>=l)return!1;return!0}crossCheckVertical(o,s,l,c){const d=this.image,f=d.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let p=o;for(;p>=0&&d.get(s,p)&&h[1]<=l;)h[1]++,p--;if(p<0||h[1]>l)return NaN;for(;p>=0&&!d.get(s,p)&&h[0]<=l;)h[0]++,p--;if(h[0]>l)return NaN;for(p=o+1;p<f&&d.get(s,p)&&h[1]<=l;)h[1]++,p++;if(p===f||h[1]>l)return NaN;for(;p<f&&!d.get(s,p)&&h[2]<=l;)h[2]++,p++;return h[2]>l||5*Math.abs(h[0]+h[1]+h[2]-c)>=2*c?NaN:this.foundPatternCross(h)?ho.centerFromEnd(h,p):NaN}handlePossibleCenter(o,s,l){const c=o[0]+o[1]+o[2],d=ho.centerFromEnd(o,l),f=this.crossCheckVertical(s,d,2*o[1],c);if(!isNaN(f)){const h=(o[0]+o[1]+o[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(h,f,d))return w.combineEstimate(f,d,h);const p=new Ya(d,f,h);this.possibleCenters.push(p),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class Xa extends ie{constructor(o,s,l,c){super(o,s),this.estimatedModuleSize=l,this.count=c,void 0===c&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,s,l){if(Math.abs(s-this.getY())<=o&&Math.abs(l-this.getX())<=o){const c=Math.abs(o-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(o,s,l){const c=this.count+1,d=(this.count*this.getX()+s)/c,f=(this.count*this.getY()+o)/c;return new Xa(d,f,(this.count*this.estimatedModuleSize+l)/c,c)}}class Ir{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let Uh=(()=>{class x{constructor(s,l){this.image=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const l=null!=s&&void 0!==s.get(at.TRY_HARDER),c=null!=s&&void 0!==s.get(at.PURE_BARCODE),d=this.image,f=d.getHeight(),h=d.getWidth();let p=Math.floor(3*f/(4*x.MAX_MODULES));(p<x.MIN_SKIP||l)&&(p=x.MIN_SKIP);let w=!1;const E=new Int32Array(5);for(let I=p-1;I<f&&!w;I+=p){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let S=0;for(let b=0;b<h;b++)if(d.get(b,I))1==(1&S)&&S++,E[S]++;else if(1&S)E[S]++;else if(4===S)if(x.foundPatternCross(E)){if(!0!==this.handlePossibleCenter(E,I,b,c)){E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,S=3;continue}if(p=2,!0===this.hasSkipped)w=this.haveMultiplyConfirmedCenters();else{const O=this.findRowSkip();O>E[2]&&(I+=O-E[2]-p,b=h-1)}S=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,S=3;else E[++S]++;x.foundPatternCross(E)&&!0===this.handlePossibleCenter(E,I,h,c)&&(p=E[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const A=this.selectBestPatterns();return ie.orderBestPatterns(A),new Ir(A)}static centerFromEnd(s,l){return l-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let l=0;for(let f=0;f<5;f++){const h=s[f];if(0===h)return!1;l+=h}if(l<7)return!1;const c=l/7,d=c/2;return Math.abs(c-s[0])<d&&Math.abs(c-s[1])<d&&Math.abs(3*c-s[2])<3*d&&Math.abs(c-s[3])<d&&Math.abs(c-s[4])<d}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,l,c,d){const f=this.getCrossCheckStateCount();let h=0;const p=this.image;for(;s>=h&&l>=h&&p.get(l-h,s-h);)f[2]++,h++;if(s<h||l<h)return!1;for(;s>=h&&l>=h&&!p.get(l-h,s-h)&&f[1]<=c;)f[1]++,h++;if(s<h||l<h||f[1]>c)return!1;for(;s>=h&&l>=h&&p.get(l-h,s-h)&&f[0]<=c;)f[0]++,h++;if(f[0]>c)return!1;const w=p.getHeight(),E=p.getWidth();for(h=1;s+h<w&&l+h<E&&p.get(l+h,s+h);)f[2]++,h++;if(s+h>=w||l+h>=E)return!1;for(;s+h<w&&l+h<E&&!p.get(l+h,s+h)&&f[3]<c;)f[3]++,h++;if(s+h>=w||l+h>=E||f[3]>=c)return!1;for(;s+h<w&&l+h<E&&p.get(l+h,s+h)&&f[4]<c;)f[4]++,h++;return!(f[4]>=c)&&Math.abs(f[0]+f[1]+f[2]+f[3]+f[4]-d)<2*d&&x.foundPatternCross(f)}crossCheckVertical(s,l,c,d){const f=this.image,h=f.getHeight(),p=this.getCrossCheckStateCount();let w=s;for(;w>=0&&f.get(l,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(l,w)&&p[1]<=c;)p[1]++,w--;if(w<0||p[1]>c)return NaN;for(;w>=0&&f.get(l,w)&&p[0]<=c;)p[0]++,w--;if(p[0]>c)return NaN;for(w=s+1;w<h&&f.get(l,w);)p[2]++,w++;if(w===h)return NaN;for(;w<h&&!f.get(l,w)&&p[3]<c;)p[3]++,w++;if(w===h||p[3]>=c)return NaN;for(;w<h&&f.get(l,w)&&p[4]<c;)p[4]++,w++;return p[4]>=c||5*Math.abs(p[0]+p[1]+p[2]+p[3]+p[4]-d)>=2*d?NaN:x.foundPatternCross(p)?x.centerFromEnd(p,w):NaN}crossCheckHorizontal(s,l,c,d){const f=this.image,h=f.getWidth(),p=this.getCrossCheckStateCount();let w=s;for(;w>=0&&f.get(w,l);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,l)&&p[1]<=c;)p[1]++,w--;if(w<0||p[1]>c)return NaN;for(;w>=0&&f.get(w,l)&&p[0]<=c;)p[0]++,w--;if(p[0]>c)return NaN;for(w=s+1;w<h&&f.get(w,l);)p[2]++,w++;if(w===h)return NaN;for(;w<h&&!f.get(w,l)&&p[3]<c;)p[3]++,w++;if(w===h||p[3]>=c)return NaN;for(;w<h&&f.get(w,l)&&p[4]<c;)p[4]++,w++;return p[4]>=c||5*Math.abs(p[0]+p[1]+p[2]+p[3]+p[4]-d)>=d?NaN:x.foundPatternCross(p)?x.centerFromEnd(p,w):NaN}handlePossibleCenter(s,l,c,d){const f=s[0]+s[1]+s[2]+s[3]+s[4];let h=x.centerFromEnd(s,c),p=this.crossCheckVertical(l,Math.floor(h),s[2],f);if(!isNaN(p)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(p),s[2],f),!isNaN(h)&&(!d||this.crossCheckDiagonal(Math.floor(p),Math.floor(h),s[2],f)))){const w=f/7;let E=!1;const A=this.possibleCenters;for(let I=0,S=A.length;I<S;I++){const b=A[I];if(b.aboutEquals(w,p,h)){A[I]=b.combineEstimate(p,h,w),E=!0;break}}if(!E){const I=new Xa(h,p,w);A.push(I),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(I)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const c of this.possibleCenters)if(c.getCount()>=x.CENTER_QUORUM){if(null!=l)return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-c.getX())-Math.abs(l.getY()-c.getY()))/2);l=c}return 0}haveMultiplyConfirmedCenters(){let s=0,l=0;const c=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=x.CENTER_QUORUM&&(s++,l+=h.getEstimatedModuleSize());if(s<3)return!1;const d=l/c;let f=0;for(const h of this.possibleCenters)f+=Math.abs(h.getEstimatedModuleSize()-d);return f<=.05*l}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new U;const l=this.possibleCenters;let c;if(s>3){let d=0,f=0;for(const w of this.possibleCenters){const E=w.getEstimatedModuleSize();d+=E,f+=E*E}c=d/s;let h=Math.sqrt(f/s-c*c);l.sort((w,E)=>{const A=Math.abs(E.getEstimatedModuleSize()-c),I=Math.abs(w.getEstimatedModuleSize()-c);return A<I?-1:A>I?1:0});const p=Math.max(.2*c,h);for(let w=0;w<l.length&&l.length>3;w++)Math.abs(l[w].getEstimatedModuleSize()-c)>p&&(l.splice(w,1),w--)}if(l.length>3){let d=0;for(const f of l)d+=f.getEstimatedModuleSize();c=d/l.length,l.sort((f,h)=>{if(h.getCount()===f.getCount()){const p=Math.abs(h.getEstimatedModuleSize()-c),w=Math.abs(f.getEstimatedModuleSize()-c);return p<w?1:p>w?-1:0}return h.getCount()-f.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}return x.CENTER_QUORUM=2,x.MIN_SKIP=3,x.MAX_MODULES=57,x})();class go{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=null==o?null:o.get(at.NEED_RESULT_POINT_CALLBACK);const l=new Uh(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(l)}processFinderPatternInfo(o){const s=o.getTopLeft(),l=o.getTopRight(),c=o.getBottomLeft(),d=this.calculateModuleSize(s,l,c);if(d<1)throw new U("No pattern found in proccess finder.");const f=go.computeDimension(s,l,c,d),h=oe.getProvisionalVersionForDimension(f),p=h.getDimensionForVersion()-7;let w=null;if(h.getAlignmentPatternCenters().length>0){const S=l.getX()-s.getX()+c.getX(),b=l.getY()-s.getY()+c.getY(),M=1-3/p,O=Math.floor(s.getX()+M*(S-s.getX())),N=Math.floor(s.getY()+M*(b-s.getY()));for(let W=4;W<=16;W<<=1)try{w=this.findAlignmentInRegion(d,O,N,W);break}catch(X){if(!(X instanceof U))throw X}}const E=go.createTransform(s,l,c,w,f),A=go.sampleGrid(this.image,E,f);let I;return I=null===w?[c,s,l]:[c,s,l,w],new lo(A,I)}static createTransform(o,s,l,c,d){const f=d-3.5;let h,p,w,E;return null!==c?(h=c.getX(),p=c.getY(),w=f-3,E=w):(h=s.getX()-o.getX()+l.getX(),p=s.getY()-o.getY()+l.getY(),w=f,E=f),In.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,w,E,3.5,f,o.getX(),o.getY(),s.getX(),s.getY(),h,p,l.getX(),l.getY())}static sampleGrid(o,s,l){return Vr.getInstance().sampleGridWithTransform(o,l,l,s)}static computeDimension(o,s,l,c){const d=We.round(ie.distance(o,s)/c),f=We.round(ie.distance(o,l)/c);let h=Math.floor((d+f)/2)+7;switch(3&h){case 0:h++;break;case 2:h--;break;case 3:throw new U("Dimensions could be not found.")}return h}calculateModuleSize(o,s,l){return(this.calculateModuleSizeOneWay(o,s)+this.calculateModuleSizeOneWay(o,l))/2}calculateModuleSizeOneWay(o,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(o,s,l,c){let d=this.sizeOfBlackWhiteBlackRun(o,s,l,c),f=1,h=o-(l-o);h<0?(f=o/(o-h),h=0):h>=this.image.getWidth()&&(f=(this.image.getWidth()-1-o)/(h-o),h=this.image.getWidth()-1);let p=Math.floor(s-(c-s)*f);return f=1,p<0?(f=s/(s-p),p=0):p>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(p-s),p=this.image.getHeight()-1),h=Math.floor(o+(h-o)*f),d+=this.sizeOfBlackWhiteBlackRun(o,s,h,p),d-1}sizeOfBlackWhiteBlackRun(o,s,l,c){const d=Math.abs(c-s)>Math.abs(l-o);if(d){let S=o;o=s,s=S,S=l,l=c,c=S}const f=Math.abs(l-o),h=Math.abs(c-s);let p=-f/2;const w=o<l?1:-1,E=s<c?1:-1;let A=0;const I=l+w;for(let S=o,b=s;S!==I;S+=w){if(1===A===this.image.get(d?b:S,d?S:b)){if(2===A)return We.distance(S,b,o,s);A++}if(p+=h,p>0){if(b===c)break;b+=E,p-=f}}return 2===A?We.distance(l+w,c,o,s):NaN}findAlignmentInRegion(o,s,l,c){const d=Math.floor(c*o),f=Math.max(0,s-d),h=Math.min(this.image.getWidth()-1,s+d);if(h-f<3*o)throw new U("Alignment top exceeds estimated module size.");const p=Math.max(0,l-d),w=Math.min(this.image.getHeight()-1,l+d);if(w-p<3*o)throw new U("Alignment bottom exceeds estimated module size.");return new ho(this.image,f,p,h-f,w-p,o,this.resultPointCallback).find()}}class Wr{constructor(){this.decoder=new mn}getDecoder(){return this.decoder}decode(o,s){let l,c;if(null!=s&&void 0!==s.get(at.PURE_BARCODE)){const p=Wr.extractPureBits(o.getBlackMatrix());l=this.decoder.decodeBitMatrix(p,s),c=Wr.NO_POINTS}else{const p=new go(o.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(p.getBits(),s),c=p.getPoints()}l.getOther()instanceof Fi&&l.getOther().applyMirroredCorrection(c);const d=new ft(l.getText(),l.getRawBytes(),void 0,c,le.QR_CODE,void 0),f=l.getByteSegments();null!==f&&d.putMetadata(Fe.BYTE_SEGMENTS,f);const h=l.getECLevel();return null!==h&&d.putMetadata(Fe.ERROR_CORRECTION_LEVEL,h),l.hasStructuredAppend()&&(d.putMetadata(Fe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Fe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(o){const s=o.getTopLeftOnBit(),l=o.getBottomRightOnBit();if(null===s||null===l)throw new U;const c=this.moduleSize(s,o);let d=s[1],f=l[1],h=s[0],p=l[0];if(h>=p||d>=f)throw new U;if(f-d!=p-h&&(p=h+(f-d),p>=o.getWidth()))throw new U;const w=Math.round((p-h+1)/c),E=Math.round((f-d+1)/c);if(w<=0||E<=0)throw new U;if(E!==w)throw new U;const A=Math.floor(c/2);d+=A,h+=A;const I=h+Math.floor((w-1)*c)-p;if(I>0){if(I>A)throw new U;h-=I}const S=d+Math.floor((E-1)*c)-f;if(S>0){if(S>A)throw new U;d-=S}const b=new Lt(w,E);for(let M=0;M<E;M++){const O=d+Math.floor(M*c);for(let N=0;N<w;N++)o.get(h+Math.floor(N*c),O)&&b.set(N,M)}return b}static moduleSize(o,s){const l=s.getHeight(),c=s.getWidth();let d=o[0],f=o[1],h=!0,p=0;for(;d<c&&f<l;){if(h!==s.get(d,f)){if(5==++p)break;h=!h}d++,f++}if(d===c||f===l)throw new U;return(d-o[0])/7}}Wr.NO_POINTS=new Array;class me{PDF417Common(){}static getBitCountSum(o){return We.sum(o)}static toIntArray(o){if(null==o||!o.length)return me.EMPTY_INT_ARRAY;const s=new Int32Array(o.length);let l=0;for(const c of o)s[l++]=c;return s}static getCodeword(o){const s=It.binarySearch(me.SYMBOL_TABLE,262143&o);return s<0?-1:(me.CODEWORD_TABLE[s]-1)%me.NUMBER_OF_CODEWORDS}}me.NUMBER_OF_CODEWORDS=929,me.MAX_CODEWORDS_IN_BARCODE=me.NUMBER_OF_CODEWORDS-1,me.MIN_ROWS_IN_BARCODE=3,me.MAX_ROWS_IN_BARCODE=90,me.MODULES_IN_CODEWORD=17,me.MODULES_IN_STOP_PATTERN=18,me.BARS_IN_MODULE=8,me.EMPTY_INT_ARRAY=new Int32Array([]),me.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),me.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ou{constructor(o,s){this.bits=o,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ne{static detectMultiple(o,s,l){let c=o.getBlackMatrix(),d=Ne.detect(l,c);return d.length||(c=c.clone(),c.rotate180(),d=Ne.detect(l,c)),new ou(c,d)}static detect(o,s){const l=new Array;let c=0,d=0,f=!1;for(;c<s.getHeight();){const h=Ne.findVertices(s,c,d);if(null!=h[0]||null!=h[3]){if(f=!0,l.push(h),!o)break;null!=h[2]?(d=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(d=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}else{if(!f)break;f=!1,d=0;for(const p of l)null!=p[1]&&(c=Math.trunc(Math.max(c,p[1].getY()))),null!=p[3]&&(c=Math.max(c,Math.trunc(p[3].getY())));c+=Ne.ROW_STEP}}return l}static findVertices(o,s,l){const c=o.getHeight(),d=o.getWidth(),f=new Array(8);return Ne.copyToResult(f,Ne.findRowsWithPattern(o,c,d,s,l,Ne.START_PATTERN),Ne.INDEXES_START_PATTERN),null!=f[4]&&(l=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),Ne.copyToResult(f,Ne.findRowsWithPattern(o,c,d,s,l,Ne.STOP_PATTERN),Ne.INDEXES_STOP_PATTERN),f}static copyToResult(o,s,l){for(let c=0;c<l.length;c++)o[l[c]]=s[c]}static findRowsWithPattern(o,s,l,c,d,f){const h=new Array(4);let p=!1;const w=new Int32Array(f.length);for(;c<s;c+=Ne.ROW_STEP){let A=Ne.findGuardPattern(o,d,c,l,!1,f,w);if(null!=A){for(;c>0;){const I=Ne.findGuardPattern(o,d,--c,l,!1,f,w);if(null==I){c++;break}A=I}h[0]=new ie(A[0],c),h[1]=new ie(A[1],c),p=!0;break}}let E=c+1;if(p){let A=0,I=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;E<s;E++){const S=Ne.findGuardPattern(o,I[0],E,l,!1,f,w);if(null!=S&&Math.abs(I[0]-S[0])<Ne.MAX_PATTERN_DRIFT&&Math.abs(I[1]-S[1])<Ne.MAX_PATTERN_DRIFT)I=S,A=0;else{if(A>Ne.SKIPPED_ROW_COUNT_MAX)break;A++}}E-=A+1,h[2]=new ie(I[0],E),h[3]=new ie(I[1],E)}return E-c<Ne.BARCODE_MIN_HEIGHT&&It.fill(h,null),h}static findGuardPattern(o,s,l,c,d,f,h){It.fillWithin(h,0,h.length,0);let p=s,w=0;for(;o.get(p,l)&&p>0&&w++<Ne.MAX_PIXEL_DRIFT;)p--;let E=p,A=0,I=f.length;for(let S=d;E<c;E++)if(o.get(E,l)!==S)h[A]++;else{if(A===I-1){if(Ne.patternMatchVariance(h,f,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE)return new Int32Array([p,E]);p+=h[0]+h[1],rt.arraycopy(h,2,h,0,A-1),h[A-1]=0,h[A]=0,A--}else A++;h[A]=1,S=!S}return A===I-1&&Ne.patternMatchVariance(h,f,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE?new Int32Array([p,E-1]):null}static patternMatchVariance(o,s,l){let c=o.length,d=0,f=0;for(let w=0;w<c;w++)d+=o[w],f+=s[w];if(d<f)return 1/0;let h=d/f;l*=h;let p=0;for(let w=0;w<c;w++){let E=o[w],A=s[w]*h,I=E>A?E-A:A-E;if(I>l)return 1/0;p+=I}return p/d}}Ne.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ne.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ne.MAX_AVG_VARIANCE=.42,Ne.MAX_INDIVIDUAL_VARIANCE=.8,Ne.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ne.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ne.MAX_PIXEL_DRIFT=3,Ne.MAX_PATTERN_DRIFT=5,Ne.SKIPPED_ROW_COUNT_MAX=25,Ne.ROW_STEP=5,Ne.BARCODE_MIN_HEIGHT=10;class $t{constructor(o,s){if(0===s.length)throw new te;this.field=o;let l=s.length;if(l>1&&0===s[0]){let c=1;for(;c<l&&0===s[c];)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),rt.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(0===o)return this.getCoefficient(0);if(1===o){let c=0;for(let d of this.coefficients)c=this.field.add(c,d);return c}let s=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)s=this.field.add(this.field.multiply(o,s),this.coefficients[c]);return s}add(o){if(!this.field.equals(o.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let s=this.coefficients,l=o.coefficients;if(s.length>l.length){let f=s;s=l,l=f}let c=new Int32Array(l.length),d=l.length-s.length;rt.arraycopy(l,0,c,0,d);for(let f=d;f<l.length;f++)c[f]=this.field.add(s[f-d],l[f]);return new $t(this.field,c)}subtract(o){if(!this.field.equals(o.field))throw new te("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof $t?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new $t(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,c=o.coefficients,d=c.length,f=new Int32Array(l+d-1);for(let h=0;h<l;h++){let p=s[h];for(let w=0;w<d;w++)f[h+w]=this.field.add(f[h+w],this.field.multiply(p,c[w]))}return new $t(this.field,f)}negative(){let o=this.coefficients.length,s=new Int32Array(o);for(let l=0;l<o;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new $t(this.field,s)}multiplyScalar(o){if(0===o)return new $t(this.field,new Int32Array([0]));if(1===o)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let c=0;c<s;c++)l[c]=this.field.multiply(this.coefficients[c],o);return new $t(this.field,l)}multiplyByMonomial(o,s){if(o<0)throw new te;if(0===s)return new $t(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+o);for(let d=0;d<l;d++)c[d]=this.field.multiply(this.coefficients[d],s);return new $t(this.field,c)}toString(){let o=new et;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);0!==l&&(l<0?(o.append(" - "),l=-l):o.length()>0&&o.append(" + "),(0===s||1!==l)&&o.append(l),0!==s&&(1===s?o.append("x"):(o.append("x^"),o.append(s))))}return o.toString()}}class jh{add(o,s){return(o+s)%this.modulus}subtract(o,s){return(this.modulus+o-s)%this.modulus}exp(o){return this.expTable[o]}log(o){if(0===o)throw new te;return this.logTable[o]}inverse(o){if(0===o)throw new Ua;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,s){return 0===o||0===s?0:this.expTable[(this.logTable[o]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class cn extends jh{constructor(o,s){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let l=1;for(let c=0;c<o;c++)this.expTable[c]=l,l=l*s%o;for(let c=0;c<o-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new $t(this,new Int32Array([0])),this.one=new $t(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,s){if(o<0)throw new te;if(0===s)return this.zero;let l=new Int32Array(o+1);return l[0]=s,new $t(this,l)}}cn.PDF417_GF=new cn(me.NUMBER_OF_CODEWORDS,3);class qe{constructor(){this.field=cn.PDF417_GF}decode(o,s,l){let c=new $t(this.field,o),d=new Int32Array(s),f=!1;for(let b=s;b>0;b--){let M=c.evaluateAt(this.field.exp(b));d[s-b]=M,0!==M&&(f=!0)}if(!f)return 0;let h=this.field.getOne();if(null!=l)for(const b of l){let M=this.field.exp(o.length-1-b),O=new $t(this.field,new Int32Array([this.field.subtract(0,M),1]));h=h.multiply(O)}let p=new $t(this.field,d),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),p,s),E=w[0],A=w[1],I=this.findErrorLocations(E),S=this.findErrorMagnitudes(A,E,I);for(let b=0;b<I.length;b++){let M=o.length-1-this.field.log(I[b]);if(M<0)throw St.getChecksumInstance();o[M]=this.field.subtract(o[M],S[b])}return I.length}runEuclideanAlgorithm(o,s,l){if(o.getDegree()<s.getDegree()){let I=o;o=s,s=I}let c=o,d=s,f=this.field.getZero(),h=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let I=c,S=f;if(c=d,f=h,c.isZero())throw St.getChecksumInstance();d=I;let b=this.field.getZero(),M=c.getCoefficient(c.getDegree()),O=this.field.inverse(M);for(;d.getDegree()>=c.getDegree()&&!d.isZero();){let N=d.getDegree()-c.getDegree(),W=this.field.multiply(d.getCoefficient(d.getDegree()),O);b=b.add(this.field.buildMonomial(N,W)),d=d.subtract(c.multiplyByMonomial(N,W))}h=b.multiply(f).subtract(S).negative()}let p=h.getCoefficient(0);if(0===p)throw St.getChecksumInstance();let w=this.field.inverse(p);return[h.multiply(w),d.multiply(w)]}findErrorLocations(o){let s=o.getDegree(),l=new Int32Array(s),c=0;for(let d=1;d<this.field.getSize()&&c<s;d++)0===o.evaluateAt(d)&&(l[c]=this.field.inverse(d),c++);if(c!==s)throw St.getChecksumInstance();return l}findErrorMagnitudes(o,s,l){let c=s.getDegree(),d=new Int32Array(c);for(let w=1;w<=c;w++)d[c-w]=this.field.multiply(w,s.getCoefficient(w));let f=new $t(this.field,d),h=l.length,p=new Int32Array(h);for(let w=0;w<h;w++){let E=this.field.inverse(l[w]),A=this.field.subtract(0,o.evaluateAt(E)),I=this.field.inverse(f.evaluateAt(E));p[w]=this.field.multiply(A,I)}return p}}class pi{constructor(o,s,l,c,d){o instanceof pi?this.constructor_2(o):this.constructor_1(o,s,l,c,d)}constructor_1(o,s,l,c,d){const f=null==s||null==l,h=null==c||null==d;if(f&&h)throw new U;f?(s=new ie(0,c.getY()),l=new ie(0,d.getY())):h&&(c=new ie(o.getWidth()-1,s.getY()),d=new ie(o.getWidth()-1,l.getY())),this.image=o,this.topLeft=s,this.bottomLeft=l,this.topRight=c,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,s){return null==o?s:null==s?o:new pi(o.image,o.topLeft,o.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(o,s,l){let c=this.topLeft,d=this.bottomLeft,f=this.topRight,h=this.bottomRight;if(o>0){let p=l?this.topLeft:this.topRight,w=Math.trunc(p.getY()-o);w<0&&(w=0);let E=new ie(p.getX(),w);l?c=E:f=E}if(s>0){let p=l?this.bottomLeft:this.bottomRight,w=Math.trunc(p.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let E=new ie(p.getX(),w);l?d=E:h=E}return new pi(this.image,c,d,f,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Vh{constructor(o,s,l,c){this.columnCount=o,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class po{constructor(){this.buffer=""}static form(o,s){let l=-1;return o.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(f,h,p,w,E,A){if("%%"===f)return"%";if(void 0===s[++l])return;f=w?parseInt(w.substr(1)):void 0;let S,I=E?parseInt(E.substr(1)):void 0;switch(A){case"s":S=s[l];break;case"c":S=s[l][0];break;case"f":S=parseFloat(s[l]).toFixed(f);break;case"p":S=parseFloat(s[l]).toPrecision(f);break;case"e":S=parseFloat(s[l]).toExponential(f);break;case"x":S=parseInt(s[l]).toString(I||16);break;case"d":S=parseFloat(parseInt(s[l],I||10).toPrecision(f)).toFixed(0)}S="object"==typeof S?JSON.stringify(S):(+S).toString(I);let b=parseInt(p),M=p&&p[0]+""=="0"?"0":" ";for(;S.length<b;)S=void 0!==h?S+M:M+S;return S})}format(o,...s){this.buffer+=po.form(o,s)}toString(){return this.buffer}}let he=(()=>{class x{constructor(s){this.boundingBox=new pi(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let l=this.getCodeword(s);if(null!=l)return l;for(let c=1;c<x.MAX_NEARBY_DISTANCE;c++){let d=this.imageRowToCodewordIndex(s)-c;if(d>=0&&(l=this.codewords[d],null!=l)||(d=this.imageRowToCodewordIndex(s)+c,d<this.codewords.length&&(l=this.codewords[d],null!=l)))return l}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,l){this.codewords[this.imageRowToCodewordIndex(s)]=l}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new po;let l=0;for(const c of this.codewords)null!=c?s.format("%3d: %3d|%3d%n",l++,c.getRowNumber(),c.getValue()):s.format("%3d:    |   %n",l++);return s.toString()}}return x.MAX_NEARBY_DISTANCE=5,x})();class mo{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let s=this.values.get(o);null==s&&(s=0),s++,this.values.set(o,s)}getValue(){let o=-1,s=new Array;for(const[l,c]of this.values.entries()){const d={getKey:()=>l,getValue:()=>c};d.getValue()>o?(o=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===o&&s.push(d.getKey())}return me.toIntArray(s)}getConfidence(o){return this.values.get(o)}}class lr extends he{constructor(o,s){super(o),this._isLeft=s}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,o);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(d.getY())),p=-1,w=1,E=0;for(let A=f;A<h;A++){if(null==s[A])continue;let I=s[A],S=I.getRowNumber()-p;if(0===S)E++;else if(1===S)w=Math.max(w,E),E=1,p=I.getRowNumber();else if(S<0||I.getRowNumber()>=o.getRowCount()||S>A)s[A]=null;else{let b;b=w>2?(w-2)*S:S;let M=b>=A;for(let O=1;O<=b&&!M;O++)M=null!=s[A-O];M?s[A]=null:(p=I.getRowNumber(),E=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(null==o)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let s=new Int32Array(o.getRowCount());for(let l of this.getCodewords())if(null!=l){let c=l.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(o){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),p=-1;for(let w=d;w<f;w++){if(null==h[w])continue;let E=h[w];E.setRowNumberAsRowIndicatorColumn();let A=E.getRowNumber()-p;0===A||(1===A?p=E.getRowNumber():E.getRowNumber()>=o.getRowCount()?h[w]=null:p=E.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),s=new mo,l=new mo,c=new mo,d=new mo;for(let h of o){if(null==h)continue;h.setRowNumberAsRowIndicatorColumn();let p=h.getValue()%30,w=h.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:l.setValue(3*p+1);break;case 1:d.setValue(p/3),c.setValue(p%3);break;case 2:s.setValue(p+1)}}if(0===s.getValue().length||0===l.getValue().length||0===c.getValue().length||0===d.getValue().length||s.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<me.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>me.MAX_ROWS_IN_BARCODE)return null;let f=new Vh(s.getValue()[0],l.getValue()[0],c.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(o,f),f}removeIncorrectCodewords(o,s){for(let l=0;l<o.length;l++){let c=o[l];if(null==o[l])continue;let d=c.getValue()%30,f=c.getRowNumber();if(f>s.getRowCount())o[l]=null;else switch(this._isLeft||(f+=2),f%3){case 0:3*d+1!==s.getRowCountUpperPart()&&(o[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(o[l]=null);break;case 2:d+1!==s.getColumnCount()&&(o[l]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class vr{constructor(o,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s,o=me.MAX_CODEWORDS_IN_BARCODE;do{s=o,o=this.adjustRowNumbersAndGetCount()}while(o>0&&o<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(0===o)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let c=0;c<l.length;c++)null!=l[c]&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,l))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let o=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++)if(null!=o[l]&&null!=s[l]&&o[l].getRowNumber()===s[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let d=this.detectionResultColumns[c].getCodewords()[l];null!=d&&(d.setRowNumber(o[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let o=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(null==s[l])continue;let c=s[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let h=this.detectionResultColumns[f].getCodewords()[l];null!=h&&(d=vr.adjustRowNumberIfValid(c,d,h),h.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let o=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(null==s[l])continue;let c=s[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let h=this.detectionResultColumns[f].getCodewords()[l];null!=h&&(d=vr.adjustRowNumberIfValid(c,d,h),h.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,s,l){return null==l||l.hasValidRowNumber()||(l.isValidRowNumber(o)?(l.setRowNumber(o),s=0):++s),s}adjustRowNumbers(o,s,l){if(!this.detectionResultColumns[o-1])return;let c=l[s],d=this.detectionResultColumns[o-1].getCodewords(),f=d;null!=this.detectionResultColumns[o+1]&&(f=this.detectionResultColumns[o+1].getCodewords());let h=new Array(14);h[2]=d[s],h[3]=f[s],s>0&&(h[0]=l[s-1],h[4]=d[s-1],h[5]=f[s-1]),s>1&&(h[8]=l[s-2],h[10]=d[s-2],h[11]=f[s-2]),s<l.length-1&&(h[1]=l[s+1],h[6]=d[s+1],h[7]=f[s+1]),s<l.length-2&&(h[9]=l[s+2],h[12]=d[s+2],h[13]=f[s+2]);for(let p of h)if(vr.adjustRowNumber(c,p))return}static adjustRowNumber(o,s){return!(null==s||!s.hasValidRowNumber()||s.getBucket()!==o.getBucket()||(o.setRowNumber(s.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,s){this.detectionResultColumns[o]=s}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];null==o&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new po;for(let l=0;l<o.getCodewords().length;l++){s.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(null==this.detectionResultColumns[c]){s.format("    |   ");continue}let d=this.detectionResultColumns[c].getCodewords()[l];null!=d?s.format(" %3d|%3d",d.getRowNumber(),d.getValue()):s.format("    |   ")}s.format("%n")}return s.toString()}}let su=(()=>{class x{constructor(s,l,c,d){this.rowNumber=x.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(l),this.bucket=Math.trunc(c),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==x.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}return x.BARCODE_ROW_UNKNOWN=-1,x})();class rn{static initialize(){for(let o=0;o<me.SYMBOL_TABLE.length;o++){let s=me.SYMBOL_TABLE[o],l=1&s;for(let c=0;c<me.BARS_IN_MODULE;c++){let d=0;for(;(1&s)===l;)d+=1,s>>=1;l=1&s,rn.RATIOS_TABLE[o]||(rn.RATIOS_TABLE[o]=new Array(me.BARS_IN_MODULE)),rn.RATIOS_TABLE[o][me.BARS_IN_MODULE-c-1]=Math.fround(d/me.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let s=rn.getDecodedCodewordValue(rn.sampleBitCounts(o));return-1!==s?s:rn.getClosestDecodedValue(o)}static sampleBitCounts(o){let s=We.sum(o),l=new Int32Array(me.BARS_IN_MODULE),c=0,d=0;for(let f=0;f<me.MODULES_IN_CODEWORD;f++)d+o[c]<=s/(2*me.MODULES_IN_CODEWORD)+f*s/me.MODULES_IN_CODEWORD&&(d+=o[c],c++),l[c]++;return l}static getDecodedCodewordValue(o){let s=rn.getBitValue(o);return-1===me.getCodeword(s)?-1:s}static getBitValue(o){let s=0;for(let l=0;l<o.length;l++)for(let c=0;c<o[l];c++)s=s<<1|(l%2==0?1:0);return Math.trunc(s)}static getClosestDecodedValue(o){let s=We.sum(o),l=new Array(me.BARS_IN_MODULE);if(s>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(o[f]/s);let c=ps.MAX_VALUE,d=-1;this.bSymbolTableReady||rn.initialize();for(let f=0;f<rn.RATIOS_TABLE.length;f++){let h=0,p=rn.RATIOS_TABLE[f];for(let w=0;w<me.BARS_IN_MODULE;w++){let E=Math.fround(p[w]-l[w]);if(h+=Math.fround(E*E),h>=c)break}h<c&&(c=h,d=me.SYMBOL_TABLE[f])}return d}}rn.bSymbolTableReady=!1,rn.RATIOS_TABLE=new Array(me.SYMBOL_TABLE.length).map(x=>new Array(me.BARS_IN_MODULE));class Za{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class qa{static parseLong(o,s){return parseInt(o,s)}}let Qa=(()=>{class x extends Qt{}return x.kind="NullPointerException",x})();class yo{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,s,l){if(null==o)throw new Qa;if(s<0||s>o.length||l<0||s+l>o.length||s+l<0)throw new gs;if(0!==l)for(let c=0;c<l;c++)this.write(o[s+c])}flush(){}close(){}}class Is extends Qt{}class Ka extends yo{constructor(o=32){if(super(),this.count=0,o<0)throw new te("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let l=this.buf.length<<1;if(l-o<0&&(l=o),l<0){if(o<0)throw new Is;l=De.MAX_VALUE}this.buf=It.copyOfUint8Array(this.buf,l)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,s,l){if(s<0||s>o.length||l<0||s+l-o.length>0)throw new gs;this.ensureCapacity(this.count+l),rt.arraycopy(o,s,this.buf,this.count,l),this.count+=l}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return It.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?"string"==typeof o?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var nt=(()=>{return(x=nt||(nt={}))[x.ALPHA=0]="ALPHA",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.PUNCT=3]="PUNCT",x[x.ALPHA_SHIFT=4]="ALPHA_SHIFT",x[x.PUNCT_SHIFT=5]="PUNCT_SHIFT",nt;var x})();function ue(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let mi;function Sr(x){if(typeof mi>"u"&&(mi=ue()),null===mi)throw new Error("BigInt is not supported!");return mi(x)}class F{static decode(o,s){let l=new et(""),c=Y.ISO8859_1;l.enableDecoding(c);let d=1,f=o[d++],h=new Za;for(;d<o[0];){switch(f){case F.TEXT_COMPACTION_MODE_LATCH:d=F.textCompaction(o,d,l);break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:d=F.byteCompaction(f,o,c,d,l);break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(o[d++]);break;case F.NUMERIC_COMPACTION_MODE_LATCH:d=F.numericCompaction(o,d,l);break;case F.ECI_CHARSET:Y.getCharacterSetECIByValue(o[d++]);break;case F.ECI_GENERAL_PURPOSE:d+=2;break;case F.ECI_USER_DEFINED:d++;break;case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=F.decodeMacroBlock(o,d,h);break;case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:throw new q;default:d--,d=F.textCompaction(o,d,l)}if(!(d<o.length))throw q.getFormatInstance();f=o[d++]}if(0===l.length())throw q.getFormatInstance();let p=new Ri(null,l.toString(),null,s);return p.setOther(h),p}static decodeMacroBlock(o,s,l){if(s+F.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw q.getFormatInstance();let c=new Int32Array(F.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<F.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)c[h]=o[s];l.setSegmentIndex(De.parseInt(F.decodeBase900toBase10(c,F.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new et;s=F.textCompaction(o,s,d),l.setFileId(d.toString());let f=-1;for(o[s]===F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<o[0];)switch(o[s]){case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o[++s]){case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new et;s=F.textCompaction(o,s+1,h),l.setFileName(h.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new et;s=F.textCompaction(o,s+1,p),l.setSender(p.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new et;s=F.textCompaction(o,s+1,w),l.setAddressee(w.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new et;s=F.numericCompaction(o,s+1,E),l.setSegmentCount(De.parseInt(E.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new et;s=F.numericCompaction(o,s+1,A),l.setTimestamp(qa.parseLong(A.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new et;s=F.numericCompaction(o,s+1,I),l.setChecksum(De.parseInt(I.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let S=new et;s=F.numericCompaction(o,s+1,S),l.setFileSize(qa.parseLong(S.toString()));break;default:throw q.getFormatInstance()}break;case F.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw q.getFormatInstance()}if(-1!==f){let h=s-f;l.isLastSegment()&&h--,l.setOptionalData(It.copyOfRange(o,f,f+h))}return s}static textCompaction(o,s,l){let c=new Int32Array(2*(o[0]-s)),d=new Int32Array(2*(o[0]-s)),f=0,h=!1;for(;s<o[0]&&!h;){let p=o[s++];if(p<F.TEXT_COMPACTION_MODE_LATCH)c[f]=p/30,c[f+1]=p%30,f+=2;else switch(p){case F.TEXT_COMPACTION_MODE_LATCH:c[f++]=F.TEXT_COMPACTION_MODE_LATCH;break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=o[s++],d[f]=p,f++}}return F.decodeTextCompaction(c,d,f,l),s}static decodeTextCompaction(o,s,l,c){let d=nt.ALPHA,f=nt.ALPHA,h=0;for(;h<l;){let p=o[h],w="";switch(d){case nt.ALPHA:if(p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case F.LL:d=nt.LOWER;break;case F.ML:d=nt.MIXED;break;case F.PS:f=d,d=nt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=nt.ALPHA}break;case nt.LOWER:if(p<26)w=String.fromCharCode(97+p);else switch(p){case 26:w=" ";break;case F.AS:f=d,d=nt.ALPHA_SHIFT;break;case F.ML:d=nt.MIXED;break;case F.PS:f=d,d=nt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=nt.ALPHA}break;case nt.MIXED:if(p<F.PL)w=F.MIXED_CHARS[p];else switch(p){case F.PL:d=nt.PUNCT;break;case 26:w=" ";break;case F.LL:d=nt.LOWER;break;case F.AL:d=nt.ALPHA;break;case F.PS:f=d,d=nt.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=nt.ALPHA}break;case nt.PUNCT:if(p<F.PAL)w=F.PUNCT_CHARS[p];else switch(p){case F.PAL:d=nt.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=nt.ALPHA}break;case nt.ALPHA_SHIFT:if(d=f,p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case F.TEXT_COMPACTION_MODE_LATCH:d=nt.ALPHA}break;case nt.PUNCT_SHIFT:if(d=f,p<F.PAL)w=F.PUNCT_CHARS[p];else switch(p){case F.PAL:d=nt.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:d=nt.ALPHA}}""!==w&&c.append(w),h++}}static byteCompaction(o,s,l,c,d){let f=new Ka,h=0,p=0,w=!1;switch(o){case F.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),A=s[c++];for(;c<s[0]&&!w;)switch(E[h++]=A,p=900*p+A,A=s[c++],A){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(h%5==0&&h>0){for(let I=0;I<6;++I)f.write(Number(Sr(p)>>Sr(8*(5-I))));p=0,h=0}}c===s[0]&&A<F.TEXT_COMPACTION_MODE_LATCH&&(E[h++]=A);for(let I=0;I<h;I++)f.write(E[I]);break;case F.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let I=s[c++];if(I<F.TEXT_COMPACTION_MODE_LATCH)h++,p=900*p+I;else switch(I){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:c--,w=!0}if(h%5==0&&h>0){for(let S=0;S<6;++S)f.write(Number(Sr(p)>>Sr(8*(5-S))));p=0,h=0}}}return d.append(Ht.decode(f.toByteArray(),l)),c}static numericCompaction(o,s,l){let c=0,d=!1,f=new Int32Array(F.MAX_NUMERIC_CODEWORDS);for(;s<o[0]&&!d;){let h=o[s++];if(s===o[0]&&(d=!0),h<F.TEXT_COMPACTION_MODE_LATCH)f[c]=h,c++;else switch(h){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:s--,d=!0}(c%F.MAX_NUMERIC_CODEWORDS==0||h===F.NUMERIC_COMPACTION_MODE_LATCH||d)&&c>0&&(l.append(F.decodeBase900toBase10(f,c)),c=0)}return s}static decodeBase900toBase10(o,s){let l=Sr(0);for(let d=0;d<s;d++)l+=F.EXP900[s-d-1]*Sr(o[d]);let c=l.toString();if("1"!==c.charAt(0))throw new q;return c.substring(1)}}F.TEXT_COMPACTION_MODE_LATCH=900,F.BYTE_COMPACTION_MODE_LATCH=901,F.NUMERIC_COMPACTION_MODE_LATCH=902,F.BYTE_COMPACTION_MODE_LATCH_6=924,F.ECI_USER_DEFINED=925,F.ECI_GENERAL_PURPOSE=926,F.ECI_CHARSET=927,F.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,F.MACRO_PDF417_TERMINATOR=922,F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,F.MAX_NUMERIC_CODEWORDS=15,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,F.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,F.PL=25,F.LL=27,F.AS=27,F.ML=28,F.AL=28,F.PS=29,F.PAL=29,F.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",F.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",F.EXP900=ue()?function Sn(){let x=[];x[0]=Sr(1);let o=Sr(900);x[1]=o;for(let s=2;s<16;s++)x[s]=x[s-1]*o;return x}():[],F.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Oe{constructor(){}static decode(o,s,l,c,d,f,h){let A,p=new pi(o,s,l,c,d),w=null,E=null;for(let b=!0;;b=!1){if(null!=s&&(w=Oe.getRowIndicatorColumn(o,p,s,!0,f,h)),null!=c&&(E=Oe.getRowIndicatorColumn(o,p,c,!1,f,h)),A=Oe.merge(w,E),null==A)throw U.getNotFoundInstance();let M=A.getBoundingBox();if(!b||null==M||!(M.getMinY()<p.getMinY()||M.getMaxY()>p.getMaxY()))break;p=M}A.setBoundingBox(p);let I=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,w),A.setDetectionResultColumn(I,E);let S=null!=w;for(let b=1;b<=I;b++){let O,M=S?b:I-b;if(void 0!==A.getDetectionResultColumn(M))continue;O=0===M||M===I?new lr(p,0===M):new he(p),A.setDetectionResultColumn(M,O);let N=-1,W=N;for(let X=p.getMinY();X<=p.getMaxY();X++){if(N=Oe.getStartColumn(A,M,X,S),N<0||N>p.getMaxX()){if(-1===W)continue;N=W}let B=Oe.detectCodeword(o,p.getMinX(),p.getMaxX(),S,N,X,f,h);null!=B&&(O.setCodeword(X,B),W=N,f=Math.min(f,B.getWidth()),h=Math.max(h,B.getWidth()))}}return Oe.createDecoderResult(A)}static merge(o,s){if(null==o&&null==s)return null;let l=Oe.getBarcodeMetadata(o,s);if(null==l)return null;let c=pi.merge(Oe.adjustBoundingBox(o),Oe.adjustBoundingBox(s));return new vr(l,c)}static adjustBoundingBox(o){if(null==o)return null;let s=o.getRowHeights();if(null==s)return null;let l=Oe.getMax(s),c=0;for(let h of s)if(c+=l-h,h>0)break;let d=o.getCodewords();for(let h=0;c>0&&null==d[h];h++)c--;let f=0;for(let h=s.length-1;h>=0&&(f+=l-s[h],!(s[h]>0));h--);for(let h=d.length-1;f>0&&null==d[h];h--)f--;return o.getBoundingBox().addMissingRows(c,f,o.isLeft())}static getMax(o){let s=-1;for(let l of o)s=Math.max(s,l);return s}static getBarcodeMetadata(o,s){let l,c;return null==o||null==(l=o.getBarcodeMetadata())?null==s?null:s.getBarcodeMetadata():null==s||null==(c=s.getBarcodeMetadata())?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(o,s,l,c,d,f){let h=new lr(s,c);for(let p=0;p<2;p++){let w=0===p?1:-1,E=Math.trunc(Math.trunc(l.getX()));for(let A=Math.trunc(Math.trunc(l.getY()));A<=s.getMaxY()&&A>=s.getMinY();A+=w){let I=Oe.detectCodeword(o,0,o.getWidth(),c,E,A,d,f);null!=I&&(h.setCodeword(A,I),E=c?I.getStartX():I.getEndX())}}return h}static adjustCodewordCount(o,s){let l=s[0][1],c=l.getValue(),d=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Oe.getNumberOfECCodeWords(o.getBarcodeECLevel());if(0===c.length){if(d<1||d>me.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();l.setValue(d)}else c[0]!==d&&l.setValue(d)}static createDecoderResult(o){let s=Oe.createBarcodeMatrix(o);Oe.adjustCodewordCount(o,s);let l=new Array,c=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),d=[],f=new Array;for(let p=0;p<o.getBarcodeRowCount();p++)for(let w=0;w<o.getBarcodeColumnCount();w++){let E=s[p][w+1].getValue(),A=p*o.getBarcodeColumnCount()+w;0===E.length?l.push(A):1===E.length?c[A]=E[0]:(f.push(A),d.push(E))}let h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[p];return Oe.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),c,me.toIntArray(l),me.toIntArray(f),h)}static createDecoderResultFromAmbiguousValues(o,s,l,c,d){let f=new Int32Array(c.length),h=100;for(;h-- >0;){for(let p=0;p<f.length;p++)s[c[p]]=d[p][f[p]];try{return Oe.decodeCodewords(s,o,l)}catch(p){if(!(p instanceof St))throw p}if(0===f.length)throw St.getChecksumInstance();for(let p=0;p<f.length;p++){if(f[p]<d[p].length-1){f[p]++;break}if(f[p]=0,p===f.length-1)throw St.getChecksumInstance()}}throw St.getChecksumInstance()}static createBarcodeMatrix(o){let s=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let d=0;d<s[c].length;d++)s[c][d]=new mo;let l=0;for(let c of o.getDetectionResultColumns()){if(null!=c)for(let d of c.getCodewords())if(null!=d){let f=d.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][l].setValue(d.getValue())}}l++}return s}static isValidBarcodeColumn(o,s){return s>=0&&s<=o.getBarcodeColumnCount()+1}static getStartColumn(o,s,l,c){let d=c?1:-1,f=null;if(Oe.isValidBarcodeColumn(o,s-d)&&(f=o.getDetectionResultColumn(s-d).getCodeword(l)),null!=f)return c?f.getEndX():f.getStartX();if(f=o.getDetectionResultColumn(s).getCodewordNearby(l),null!=f)return c?f.getStartX():f.getEndX();if(Oe.isValidBarcodeColumn(o,s-d)&&(f=o.getDetectionResultColumn(s-d).getCodewordNearby(l)),null!=f)return c?f.getEndX():f.getStartX();let h=0;for(;Oe.isValidBarcodeColumn(o,s-d);){s-=d;for(let p of o.getDetectionResultColumn(s).getCodewords())if(null!=p)return(c?p.getEndX():p.getStartX())+d*h*(p.getEndX()-p.getStartX());h++}return c?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,s,l,c,d,f,h,p){d=Oe.adjustCodewordStartColumn(o,s,l,c,d,f);let w=Oe.getModuleBitCount(o,s,l,c,d,f);if(null==w)return null;let E,A=We.sum(w);if(c)E=d+A;else{for(let b=0;b<w.length/2;b++){let M=w[b];w[b]=w[w.length-1-b],w[w.length-1-b]=M}E=d,d=E-A}if(!Oe.checkCodewordSkew(A,h,p))return null;let I=rn.getDecodedValue(w),S=me.getCodeword(I);return-1===S?null:new su(d,E,Oe.getCodewordBucketNumber(I),S)}static getModuleBitCount(o,s,l,c,d,f){let h=d,p=new Int32Array(8),w=0,E=c?1:-1,A=c;for(;(c?h<l:h>=s)&&w<p.length;)o.get(h,f)===A?(p[w]++,h+=E):(w++,A=!A);return w===p.length||h===(c?l:s)&&w===p.length-1?p:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,s,l,c,d,f){let h=d,p=c?-1:1;for(let w=0;w<2;w++){for(;(c?h>=s:h<l)&&c===o.get(h,f);){if(Math.abs(d-h)>Oe.CODEWORD_SKEW_SIZE)return d;h+=p}p=-p,c=!c}return h}static checkCodewordSkew(o,s,l){return s-Oe.CODEWORD_SKEW_SIZE<=o&&o<=l+Oe.CODEWORD_SKEW_SIZE}static decodeCodewords(o,s,l){if(0===o.length)throw q.getFormatInstance();let c=1<<s+1,d=Oe.correctErrors(o,l,c);Oe.verifyCodewordCount(o,c);let f=F.decode(o,""+s);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(o,s,l){if(null!=s&&s.length>l/2+Oe.MAX_ERRORS||l<0||l>Oe.MAX_EC_CODEWORDS)throw St.getChecksumInstance();return Oe.errorCorrection.decode(o,l,s)}static verifyCodewordCount(o,s){if(o.length<4)throw q.getFormatInstance();let l=o[0];if(l>o.length)throw q.getFormatInstance();if(0===l){if(!(s<o.length))throw q.getFormatInstance();o[0]=o.length-s}}static getBitCountForCodeword(o){let s=new Int32Array(8),l=0,c=s.length-1;for(;!((1&o)!==l&&(l=1&o,c--,c<0));)s[c]++,o>>=1;return s}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Oe.getCodewordBucketNumber(Oe.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let s=new po;for(let l=0;l<o.length;l++){s.format("Row %2d: ",l);for(let c=0;c<o[l].length;c++){let d=o[l][c];0===d.getValue().length?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}Oe.CODEWORD_SKEW_SIZE=2,Oe.MAX_ERRORS=3,Oe.MAX_EC_CODEWORDS=512,Oe.errorCorrection=new qe;class _e{decode(o,s=null){let l=_e.decode(o,s,!1);if(null==l||0===l.length||null==l[0])throw U.getNotFoundInstance();return l[0]}decodeMultiple(o,s=null){try{return _e.decode(o,s,!0)}catch(l){throw l instanceof q||l instanceof St?U.getNotFoundInstance():l}}static decode(o,s,l){const c=new Array,d=Ne.detectMultiple(o,s,l);for(const f of d.getPoints()){const h=Oe.decode(d.getBits(),f[4],f[5],f[6],f[7],_e.getMinCodewordWidth(f),_e.getMaxCodewordWidth(f)),p=new ft(h.getText(),h.getRawBytes(),void 0,f,le.PDF_417);p.putMetadata(Fe.ERROR_CORRECTION_LEVEL,h.getECLevel());const w=h.getOther();null!=w&&p.putMetadata(Fe.PDF417_EXTRA_METADATA,w),c.push(p)}return c.map(f=>f)}static getMaxWidth(o,s){return null==o||null==s?0:Math.trunc(Math.abs(o.getX()-s.getX()))}static getMinWidth(o,s){return null==o||null==s?De.MAX_VALUE:Math.trunc(Math.abs(o.getX()-s.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(_e.getMaxWidth(o[0],o[4]),_e.getMaxWidth(o[6],o[2])*me.MODULES_IN_CODEWORD/me.MODULES_IN_STOP_PATTERN),Math.max(_e.getMaxWidth(o[1],o[5]),_e.getMaxWidth(o[7],o[3])*me.MODULES_IN_CODEWORD/me.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(_e.getMinWidth(o[0],o[4]),_e.getMinWidth(o[6],o[2])*me.MODULES_IN_CODEWORD/me.MODULES_IN_STOP_PATTERN),Math.min(_e.getMinWidth(o[1],o[5]),_e.getMinWidth(o[7],o[3])*me.MODULES_IN_CODEWORD/me.MODULES_IN_STOP_PATTERN)))}reset(){}}let Ja=(()=>{class x extends Qt{}return x.kind="ReaderException",x})();class au{constructor(o,s){this.verbose=!0===o,s&&this.setHints(s)}decode(o,s){return s&&this.setHints(s),this.decodeInternal(o)}decodeWithState(o){return null==this.readers&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const s=!Je(o)&&!0===o.get(at.TRY_HARDER),l=Je(o)?null:o.get(at.POSSIBLE_FORMATS),c=new Array;if(!Je(l)){const d=l.some(f=>f===le.UPC_A||f===le.UPC_E||f===le.EAN_13||f===le.EAN_8||f===le.CODABAR||f===le.CODE_39||f===le.CODE_93||f===le.CODE_128||f===le.ITF||f===le.RSS_14||f===le.RSS_EXPANDED);d&&!s&&c.push(new hi(o,this.verbose)),l.includes(le.QR_CODE)&&c.push(new Wr),l.includes(le.DATA_MATRIX)&&c.push(new gi),l.includes(le.AZTEC)&&c.push(new Yn),l.includes(le.PDF_417)&&c.push(new _e),d&&s&&c.push(new hi(o,this.verbose))}0===c.length&&(s||c.push(new hi(o,this.verbose)),c.push(new Wr),c.push(new gi),c.push(new Yn),c.push(new _e),s&&c.push(new hi(o,this.verbose))),this.readers=c}reset(){if(null!==this.readers)for(const o of this.readers)o.reset()}decodeInternal(o){if(null===this.readers)throw new Ja("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(o,this.hints)}catch(l){if(l instanceof Ja)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}var $r=(()=>{return(x=$r||($r={}))[x.ERROR_CORRECTION=0]="ERROR_CORRECTION",x[x.CHARACTER_SET=1]="CHARACTER_SET",x[x.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",x[x.MIN_SIZE=3]="MIN_SIZE",x[x.MAX_SIZE=4]="MAX_SIZE",x[x.MARGIN=5]="MARGIN",x[x.PDF417_COMPACT=6]="PDF417_COMPACT",x[x.PDF417_COMPACTION=7]="PDF417_COMPACTION",x[x.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",x[x.AZTEC_LAYERS=9]="AZTEC_LAYERS",x[x.QR_VERSION=10]="QR_VERSION",$r;var x})(),Tt=$r;class Ss{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Kt(o,Int32Array.from([1])))}buildGenerator(o){const s=this.cachedGenerators;if(o>=s.length){let l=s[s.length-1];const c=this.field;for(let d=s.length;d<=o;d++){const f=l.multiply(new Kt(c,Int32Array.from([1,c.exp(d-1+c.getGeneratorBase())])));s.push(f),l=f}}return s[o]}encode(o,s){if(0===s)throw new te("No error correction bytes");const l=o.length-s;if(l<=0)throw new te("No data bytes provided");const c=this.buildGenerator(s),d=new Int32Array(l);rt.arraycopy(o,0,d,0,l);let f=new Kt(this.field,d);f=f.multiplyByMonomial(s,1);const p=f.divide(c)[1].getCoefficients(),w=s-p.length;for(let E=0;E<w;E++)o[l+E]=0;rt.arraycopy(p,0,o,l+w,p.length)}}let yi=(()=>{class x{constructor(){}static applyMaskPenaltyRule1(s){return x.applyMaskPenaltyRule1Internal(s,!0)+x.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let l=0;const c=s.getArray(),d=s.getWidth(),f=s.getHeight();for(let h=0;h<f-1;h++){const p=c[h];for(let w=0;w<d-1;w++){const E=p[w];E===p[w+1]&&E===c[h+1][w]&&E===c[h+1][w+1]&&l++}}return x.N2*l}static applyMaskPenaltyRule3(s){let l=0;const c=s.getArray(),d=s.getWidth(),f=s.getHeight();for(let h=0;h<f;h++)for(let p=0;p<d;p++){const w=c[h];p+6<d&&1===w[p]&&0===w[p+1]&&1===w[p+2]&&1===w[p+3]&&1===w[p+4]&&0===w[p+5]&&1===w[p+6]&&(x.isWhiteHorizontal(w,p-4,p)||x.isWhiteHorizontal(w,p+7,p+11))&&l++,h+6<f&&1===c[h][p]&&0===c[h+1][p]&&1===c[h+2][p]&&1===c[h+3][p]&&1===c[h+4][p]&&0===c[h+5][p]&&1===c[h+6][p]&&(x.isWhiteVertical(c,p,h-4,h)||x.isWhiteVertical(c,p,h+7,h+11))&&l++}return l*x.N3}static isWhiteHorizontal(s,l,c){l=Math.max(l,0),c=Math.min(c,s.length);for(let d=l;d<c;d++)if(1===s[d])return!1;return!0}static isWhiteVertical(s,l,c,d){c=Math.max(c,0),d=Math.min(d,s.length);for(let f=c;f<d;f++)if(1===s[f][l])return!1;return!0}static applyMaskPenaltyRule4(s){let l=0;const c=s.getArray(),d=s.getWidth(),f=s.getHeight();for(let w=0;w<f;w++){const E=c[w];for(let A=0;A<d;A++)1===E[A]&&l++}const h=s.getHeight()*s.getWidth();return Math.floor(10*Math.abs(2*l-h)/h)*x.N4}static getDataMaskBit(s,l,c){let d,f;switch(s){case 0:d=c+l&1;break;case 1:d=1&c;break;case 2:d=l%3;break;case 3:d=(c+l)%3;break;case 4:d=Math.floor(c/2)+Math.floor(l/3)&1;break;case 5:f=c*l,d=(1&f)+f%3;break;case 6:f=c*l,d=(1&f)+f%3&1;break;case 7:f=c*l,d=f%3+(c+l&1)&1;break;default:throw new te("Invalid mask pattern: "+s)}return 0===d}static applyMaskPenaltyRule1Internal(s,l){let c=0;const d=l?s.getHeight():s.getWidth(),f=l?s.getWidth():s.getHeight(),h=s.getArray();for(let p=0;p<d;p++){let w=0,E=-1;for(let A=0;A<f;A++){const I=l?h[p][A]:h[A][p];I===E?w++:(w>=5&&(c+=x.N1+(w-5)),w=1,E=I)}w>=5&&(c+=x.N1+(w-5))}return c}}return x.N1=3,x.N2=3,x.N3=40,x.N4=10,x})();class Bi{constructor(o,s){this.width=o,this.height=s;const l=new Array(s);for(let c=0;c!==s;c++)l[c]=new Uint8Array(o);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(o,s){return this.bytes[s][o]}getArray(){return this.bytes}setNumber(o,s,l){this.bytes[s][o]=l}setBoolean(o,s,l){this.bytes[s][o]=l?1:0}clear(o){for(const s of this.bytes)It.fill(s,o)}equals(o){if(!(o instanceof Bi))return!1;const s=o;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,c=this.height;l<c;++l){const d=this.bytes[l],f=s.bytes[l];for(let h=0,p=this.width;h<p;++h)if(d[h]!==f[h])return!1}return!0}toString(){const o=new et;for(let s=0,l=this.height;s<l;++s){const c=this.bytes[s];for(let d=0,f=this.width;d<f;++d)switch(c[d]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ")}o.append("\n")}return o.toString()}}let _r=(()=>{class x{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new et;return s.append("<<\n"),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append("\n ecLevel: "),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append("\n version: "),s.append(this.version?this.version.toString():"null"),s.append("\n maskPattern: "),s.append(this.maskPattern.toString()),this.matrix?(s.append("\n matrix:\n"),s.append(this.matrix.toString())):s.append("\n matrix: null\n"),s.append(">>\n"),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<x.NUM_MASK_PATTERNS}}return x.NUM_MASK_PATTERNS=8,x})(),Qe=(()=>{class x extends Qt{}return x.kind="WriterException",x})();class de{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,s,l,c,d){de.clearMatrix(d),de.embedBasicPatterns(l,d),de.embedTypeInfo(s,c,d),de.maybeEmbedVersionInfo(l,d),de.embedDataBits(o,c,d)}static embedBasicPatterns(o,s){de.embedPositionDetectionPatternsAndSeparators(s),de.embedDarkDotAtLeftBottomCorner(s),de.maybeEmbedPositionAdjustmentPatterns(o,s),de.embedTimingPatterns(s)}static embedTypeInfo(o,s,l){const c=new it;de.makeTypeInfoBits(o,s,c);for(let d=0,f=c.getSize();d<f;++d){const h=c.get(c.getSize()-1-d),p=de.TYPE_INFO_COORDINATES[d];if(l.setBoolean(p[0],p[1],h),d<8){const A=l.getWidth()-d-1;l.setBoolean(A,8,h)}else{const I=l.getHeight()-7+(d-8);l.setBoolean(8,I,h)}}}static maybeEmbedVersionInfo(o,s){if(o.getVersionNumber()<7)return;const l=new it;de.makeVersionInfoBits(o,l);let c=17;for(let d=0;d<6;++d)for(let f=0;f<3;++f){const h=l.get(c);c--,s.setBoolean(d,s.getHeight()-11+f,h),s.setBoolean(s.getHeight()-11+f,d,h)}}static embedDataBits(o,s,l){let c=0,d=-1,f=l.getWidth()-1,h=l.getHeight()-1;for(;f>0;){for(6===f&&(f-=1);h>=0&&h<l.getHeight();){for(let p=0;p<2;++p){const w=f-p;if(!de.isEmpty(l.get(w,h)))continue;let E;c<o.getSize()?(E=o.get(c),++c):E=!1,255!==s&&yi.getDataMaskBit(s,w,h)&&(E=!E),l.setBoolean(w,h,E)}h+=d}d=-d,h+=d,f-=2}if(c!==o.getSize())throw new Qe("Not all bits consumed: "+c+"/"+o.getSize())}static findMSBSet(o){return 32-De.numberOfLeadingZeros(o)}static calculateBCHCode(o,s){if(0===s)throw new te("0 polynomial");const l=de.findMSBSet(s);for(o<<=l-1;de.findMSBSet(o)>=l;)o^=s<<de.findMSBSet(o)-l;return o}static makeTypeInfoBits(o,s,l){if(!_r.isValidMaskPattern(s))throw new Qe("Invalid mask pattern");const c=o.getBits()<<3|s;l.appendBits(c,5);const d=de.calculateBCHCode(c,de.TYPE_INFO_POLY);l.appendBits(d,10);const f=new it;if(f.appendBits(de.TYPE_INFO_MASK_PATTERN,15),l.xor(f),15!==l.getSize())throw new Qe("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(o,s){s.appendBits(o.getVersionNumber(),6);const l=de.calculateBCHCode(o.getVersionNumber(),de.VERSION_INFO_POLY);if(s.appendBits(l,12),18!==s.getSize())throw new Qe("should not happen but we got: "+s.getSize())}static isEmpty(o){return 255===o}static embedTimingPatterns(o){for(let s=8;s<o.getWidth()-8;++s){const l=(s+1)%2;de.isEmpty(o.get(s,6))&&o.setNumber(s,6,l),de.isEmpty(o.get(6,s))&&o.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(o){if(0===o.get(8,o.getHeight()-8))throw new Qe;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,s,l){for(let c=0;c<8;++c){if(!de.isEmpty(l.get(o+c,s)))throw new Qe;l.setNumber(o+c,s,0)}}static embedVerticalSeparationPattern(o,s,l){for(let c=0;c<7;++c){if(!de.isEmpty(l.get(o,s+c)))throw new Qe;l.setNumber(o,s+c,0)}}static embedPositionAdjustmentPattern(o,s,l){for(let c=0;c<5;++c){const d=de.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)l.setNumber(o+f,s+c,d[f])}}static embedPositionDetectionPattern(o,s,l){for(let c=0;c<7;++c){const d=de.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)l.setNumber(o+f,s+c,d[f])}}static embedPositionDetectionPatternsAndSeparators(o){const s=de.POSITION_DETECTION_PATTERN[0].length;de.embedPositionDetectionPattern(0,0,o),de.embedPositionDetectionPattern(o.getWidth()-s,0,o),de.embedPositionDetectionPattern(0,o.getWidth()-s,o);de.embedHorizontalSeparationPattern(0,7,o),de.embedHorizontalSeparationPattern(o.getWidth()-8,7,o),de.embedHorizontalSeparationPattern(0,o.getWidth()-8,o);de.embedVerticalSeparationPattern(7,0,o),de.embedVerticalSeparationPattern(o.getHeight()-7-1,0,o),de.embedVerticalSeparationPattern(7,o.getHeight()-7,o)}static maybeEmbedPositionAdjustmentPatterns(o,s){if(o.getVersionNumber()<2)return;const l=o.getVersionNumber()-1,c=de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=c.length;d!==f;d++){const h=c[d];if(h>=0)for(let p=0;p!==f;p++){const w=c[p];w>=0&&de.isEmpty(s.get(w,h))&&de.embedPositionAdjustmentPattern(w-2,h-2,s)}}}}de.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),de.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),de.VERSION_INFO_POLY=7973,de.TYPE_INFO_POLY=1335,de.TYPE_INFO_MASK_PATTERN=21522;class fe{constructor(o,s){this.dataBytes=o,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ct{constructor(){}static calculateMaskPenalty(o){return yi.applyMaskPenaltyRule1(o)+yi.applyMaskPenaltyRule2(o)+yi.applyMaskPenaltyRule3(o)+yi.applyMaskPenaltyRule4(o)}static encode(o,s,l=null){let c=ct.DEFAULT_BYTE_MODE_ENCODING;const d=null!==l&&void 0!==l.get(Tt.CHARACTER_SET);d&&(c=l.get(Tt.CHARACTER_SET).toString());const f=this.chooseMode(o,c),h=new it;if(f===ce.BYTE&&(d||ct.DEFAULT_BYTE_MODE_ENCODING!==c)){const X=Y.getCharacterSetECIByName(c);void 0!==X&&this.appendECI(X,h)}this.appendModeInfo(f,h);const p=new it;let w;if(this.appendBytes(o,f,p,c),null!==l&&void 0!==l.get(Tt.QR_VERSION)){const X=Number.parseInt(l.get(Tt.QR_VERSION).toString(),10);w=oe.getVersionForNumber(X);const B=this.calculateBitsNeeded(f,h,p,w);if(!this.willFit(B,w,s))throw new Qe("Data too big for requested version")}else w=this.recommendVersion(s,f,h,p);const E=new it;E.appendBitArray(h);const A=f===ce.BYTE?p.getSizeInBytes():o.length;this.appendLengthInfo(A,w,f,E),E.appendBitArray(p);const I=w.getECBlocksForLevel(s),S=w.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(S,E);const b=this.interleaveWithECBytes(E,w.getTotalCodewords(),S,I.getNumBlocks()),M=new _r;M.setECLevel(s),M.setMode(f),M.setVersion(w);const O=w.getDimensionForVersion(),N=new Bi(O,O),W=this.chooseMaskPattern(b,s,w,N);return M.setMaskPattern(W),de.buildMatrix(b,s,w,W,N),M.setMatrix(N),M}static recommendVersion(o,s,l,c){const d=this.calculateBitsNeeded(s,l,c,oe.getVersionForNumber(1)),f=this.chooseVersion(d,o),h=this.calculateBitsNeeded(s,l,c,f);return this.chooseVersion(h,o)}static calculateBitsNeeded(o,s,l,c){return s.getSize()+o.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(o){return o<ct.ALPHANUMERIC_TABLE.length?ct.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,s=null){if(Y.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(o))return ce.KANJI;let l=!1,c=!1;for(let d=0,f=o.length;d<f;++d){const h=o.charAt(d);if(ct.isDigit(h))l=!0;else{if(-1===this.getAlphanumericCode(h.charCodeAt(0)))return ce.BYTE;c=!0}}return c?ce.ALPHANUMERIC:l?ce.NUMERIC:ce.BYTE}static isOnlyDoubleByteKanji(o){let s;try{s=Ht.encode(o,Y.SJIS)}catch{return!1}const l=s.length;if(l%2!=0)return!1;for(let c=0;c<l;c+=2){const d=255&s[c];if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(o,s,l,c){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let h=0;h<_r.NUM_MASK_PATTERNS;h++){de.buildMatrix(o,s,l,h,c);let p=this.calculateMaskPenalty(c);p<d&&(d=p,f=h)}return f}static chooseVersion(o,s){for(let l=1;l<=40;l++){const c=oe.getVersionForNumber(l);if(ct.willFit(o,c,s))return c}throw new Qe("Data too big")}static willFit(o,s,l){return s.getTotalCodewords()-s.getECBlocksForLevel(l).getTotalECCodewords()>=(o+7)/8}static terminateBits(o,s){const l=8*o;if(s.getSize()>l)throw new Qe("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let f=0;f<4&&s.getSize()<l;++f)s.appendBit(!1);const c=7&s.getSize();if(c>0)for(let f=c;f<8;f++)s.appendBit(!1);const d=o-s.getSizeInBytes();for(let f=0;f<d;++f)s.appendBits(1&f?17:236,8);if(s.getSize()!==l)throw new Qe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,s,l,c,d,f){if(c>=l)throw new Qe("Block ID too large");const h=o%l,p=l-h,w=Math.floor(o/l),E=w+1,A=Math.floor(s/l),I=A+1,S=w-A,b=E-I;if(S!==b)throw new Qe("EC bytes mismatch");if(l!==p+h)throw new Qe("RS blocks mismatch");if(o!==(A+S)*p+(I+b)*h)throw new Qe("Total bytes mismatch");c<p?(d[0]=A,f[0]=S):(d[0]=I,f[0]=b)}static interleaveWithECBytes(o,s,l,c){if(o.getSizeInBytes()!==l)throw new Qe("Number of bits and data bytes does not match");let d=0,f=0,h=0;const p=new Array;for(let E=0;E<c;++E){const A=new Int32Array(1),I=new Int32Array(1);ct.getNumDataBytesAndNumECBytesForBlockID(s,l,c,E,A,I);const S=A[0],b=new Uint8Array(S);o.toBytes(8*d,b,0,S);const M=ct.generateECBytes(b,I[0]);p.push(new fe(b,M)),f=Math.max(f,S),h=Math.max(h,M.length),d+=A[0]}if(l!==d)throw new Qe("Data bytes does not match offset");const w=new it;for(let E=0;E<f;++E)for(const A of p){const I=A.getDataBytes();E<I.length&&w.appendBits(I[E],8)}for(let E=0;E<h;++E)for(const A of p){const I=A.getErrorCorrectionBytes();E<I.length&&w.appendBits(I[E],8)}if(s!==w.getSizeInBytes())throw new Qe("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(o,s){const l=o.length,c=new Int32Array(l+s);for(let f=0;f<l;f++)c[f]=255&o[f];new Ss(Ge.QR_CODE_FIELD_256).encode(c,s);const d=new Uint8Array(s);for(let f=0;f<s;f++)d[f]=c[l+f];return d}static appendModeInfo(o,s){s.appendBits(o.getBits(),4)}static appendLengthInfo(o,s,l,c){const d=l.getCharacterCountBits(s);if(o>=1<<d)throw new Qe(o+" is bigger than "+((1<<d)-1));c.appendBits(o,d)}static appendBytes(o,s,l,c){switch(s){case ce.NUMERIC:ct.appendNumericBytes(o,l);break;case ce.ALPHANUMERIC:ct.appendAlphanumericBytes(o,l);break;case ce.BYTE:ct.append8BitBytes(o,l,c);break;case ce.KANJI:ct.appendKanjiBytes(o,l);break;default:throw new Qe("Invalid mode: "+s)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const s=ct.getDigit(o);return s>=0&&s<=9}static appendNumericBytes(o,s){const l=o.length;let c=0;for(;c<l;){const d=ct.getDigit(o.charAt(c));if(c+2<l){const f=ct.getDigit(o.charAt(c+1)),h=ct.getDigit(o.charAt(c+2));s.appendBits(100*d+10*f+h,10),c+=3}else if(c+1<l){const f=ct.getDigit(o.charAt(c+1));s.appendBits(10*d+f,7),c+=2}else s.appendBits(d,4),c++}}static appendAlphanumericBytes(o,s){const l=o.length;let c=0;for(;c<l;){const d=ct.getAlphanumericCode(o.charCodeAt(c));if(-1===d)throw new Qe;if(c+1<l){const f=ct.getAlphanumericCode(o.charCodeAt(c+1));if(-1===f)throw new Qe;s.appendBits(45*d+f,11),c+=2}else s.appendBits(d,6),c++}}static append8BitBytes(o,s,l){let c;try{c=Ht.encode(o,l)}catch(d){throw new Qe(d)}for(let d=0,f=c.length;d!==f;d++)s.appendBits(c[d],8)}static appendKanjiBytes(o,s){let l;try{l=Ht.encode(o,Y.SJIS)}catch(d){throw new Qe(d)}const c=l.length;for(let d=0;d<c;d+=2){const p=(255&l[d])<<8&4294967295|255&l[d+1];let w=-1;if(p>=33088&&p<=40956?w=p-33088:p>=57408&&p<=60351&&(w=p-49472),-1===w)throw new Qe("Invalid byte sequence");s.appendBits(192*(w>>8)+(255&w),13)}}static appendECI(o,s){s.appendBits(ce.ECI.getBits(),4),s.appendBits(o.getValue(),8)}}ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ct.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();let Be=(()=>{class x{write(s,l,c,d=null){if(0===s.length)throw new te("Found empty contents");if(l<0||c<0)throw new te("Requested dimensions are too small: "+l+"x"+c);let f=K.L,h=x.QUIET_ZONE_SIZE;null!==d&&(void 0!==d.get(Tt.ERROR_CORRECTION)&&(f=K.fromString(d.get(Tt.ERROR_CORRECTION).toString())),void 0!==d.get(Tt.MARGIN)&&(h=Number.parseInt(d.get(Tt.MARGIN).toString(),10)));const p=ct.encode(s,f,d);return this.renderResult(p,l,c,h)}writeToDom(s,l,c,d,f=null){"string"==typeof s&&(s=document.querySelector(s));const h=this.write(l,c,d,f);s&&s.appendChild(h)}renderResult(s,l,c,d){const f=s.getMatrix();if(null===f)throw new Er;const h=f.getWidth(),p=f.getHeight(),w=h+2*d,E=p+2*d,A=Math.max(l,w),I=Math.max(c,E),S=Math.min(Math.floor(A/w),Math.floor(I/E)),b=Math.floor((A-h*S)/2),M=Math.floor((I-p*S)/2),O=this.createSVGElement(A,I);for(let N=0,W=M;N<p;N++,W+=S)for(let X=0,B=b;X<h;X++,B+=S)if(1===f.get(X,N)){const Ie=this.createSvgRectElement(B,W,S,S);O.appendChild(Ie)}return O}createSVGElement(s,l){const c=document.createElementNS(x.SVG_NS,"svg");return c.setAttributeNS(null,"height",s.toString()),c.setAttributeNS(null,"width",l.toString()),c}createSvgRectElement(s,l,c,d){const f=document.createElementNS(x.SVG_NS,"rect");return f.setAttributeNS(null,"x",s.toString()),f.setAttributeNS(null,"y",l.toString()),f.setAttributeNS(null,"height",c.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return x.QUIET_ZONE_SIZE=4,x.SVG_NS="http://www.w3.org/2000/svg",x})(),Ui=(()=>{class x{encode(s,l,c,d,f){if(0===s.length)throw new te("Found empty contents");if(l!==le.QR_CODE)throw new te("Can only encode QR_CODE, but got "+l);if(c<0||d<0)throw new te(`Requested dimensions are too small: ${c}x${d}`);let h=K.L,p=x.QUIET_ZONE_SIZE;null!==f&&(void 0!==f.get(Tt.ERROR_CORRECTION)&&(h=K.fromString(f.get(Tt.ERROR_CORRECTION).toString())),void 0!==f.get(Tt.MARGIN)&&(p=Number.parseInt(f.get(Tt.MARGIN).toString(),10)));const w=ct.encode(s,h,f);return x.renderResult(w,c,d,p)}static renderResult(s,l,c,d){const f=s.getMatrix();if(null===f)throw new Er;const h=f.getWidth(),p=f.getHeight(),w=h+2*d,E=p+2*d,A=Math.max(l,w),I=Math.max(c,E),S=Math.min(Math.floor(A/w),Math.floor(I/E)),b=Math.floor((A-h*S)/2),M=Math.floor((I-p*S)/2),O=new Lt(A,I);for(let N=0,W=M;N<p;N++,W+=S)for(let X=0,B=b;X<h;X++,B+=S)1===f.get(X,N)&&O.setRegion(B,W,S,S);return O}}return x.QUIET_ZONE_SIZE=4,x})();let ji=(()=>{class x extends ci{constructor(s,l,c,d,f,h,p,w){if(super(h,p),this.yuvData=s,this.dataWidth=l,this.dataHeight=c,this.left=d,this.top=f,d+h>l||f+p>c)throw new te("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(h,p)}getRow(s,l){if(s<0||s>=this.getHeight())throw new te("Requested row is outside the image: "+s);const c=this.getWidth();return(null==l||l.length<c)&&(l=new Uint8ClampedArray(c)),rt.arraycopy(this.yuvData,(s+this.top)*this.dataWidth+this.left,l,0,c),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.yuvData;const c=s*l,d=new Uint8ClampedArray(c);let f=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return rt.arraycopy(this.yuvData,f,d,0,c),d;for(let h=0;h<l;h++)rt.arraycopy(this.yuvData,f,d,h*s,s),f+=this.dataWidth;return d}isCropSupported(){return!0}crop(s,l,c,d){return new x(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+l,c,d,!1)}renderThumbnail(){const s=this.getWidth()/x.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/x.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(s*l),d=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let h=0;h<l;h++){const p=h*s;for(let w=0;w<s;w++)c[p+w]=4278190080|65793*(255&d[f+w*x.THUMBNAIL_SCALE_FACTOR]);f+=this.dataWidth*x.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/x.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/x.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,l){const c=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<l;d++,f+=this.dataWidth){const h=f+s/2;for(let p=f,w=f+s-1;p<h;p++,w--){const E=c[p];c[p]=c[w],c[w]=E}}}invert(){return new lt(this)}}return x.THUMBNAIL_SCALE_FACTOR=2,x})();class bs extends ci{constructor(o,s,l,c,d,f,h){if(super(s,l),this.dataWidth=c,this.dataHeight=d,this.left=f,this.top=h,4===o.BYTES_PER_ELEMENT){const p=s*l,w=new Uint8ClampedArray(p);for(let E=0;E<p;E++){const A=o[E];w[E]=((A>>16&255)+(A>>7&510)+(255&A))/4&255}this.luminances=w}else this.luminances=o;if(void 0===c&&(this.dataWidth=s),void 0===d&&(this.dataHeight=l),void 0===f&&(this.left=0),void 0===h&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new te("Crop rectangle does not fit within image data.")}getRow(o,s){if(o<0||o>=this.getHeight())throw new te("Requested row is outside the image: "+o);const l=this.getWidth();return(null==s||s.length<l)&&(s=new Uint8ClampedArray(l)),rt.arraycopy(this.luminances,(o+this.top)*this.dataWidth+this.left,s,0,l),s}getMatrix(){const o=this.getWidth(),s=this.getHeight();if(o===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=o*s,c=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return rt.arraycopy(this.luminances,d,c,0,l),c;for(let f=0;f<s;f++)rt.arraycopy(this.luminances,d,c,f*o,o),d+=this.dataWidth;return c}isCropSupported(){return!0}crop(o,s,l,c){return new bs(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+o,this.top+s)}invert(){return new lt(this)}}class el extends Y{static forName(o){return this.getCharacterSetECIByName(o)}}class Ts{}Ts.ISO_8859_1=Y.ISO8859_1;class Xn{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class kn{static singletonList(o){return[o]}static min(o,s){return o.sort(s)[0]}}class Zn{constructor(o){this.previous=o}getPrevious(){return this.previous}}class un extends Zn{constructor(o,s,l){super(o),this.value=s,this.bitCount=l}appendTo(o,s){o.appendBits(this.value,this.bitCount)}add(o,s){return new un(this,o,s)}addBinaryShift(o,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new un(this,o,s)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+De.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class He extends un{constructor(o,s,l){super(o,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(o,s){for(let l=0;l<this.binaryShiftByteCount;l++)(0===l||31===l&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):o.appendBits(0===l?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),o.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(o,s){return new He(this,o,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Yr(x,o,s){return new un(x,o,s)}const Ms=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],cr=0,_n=1,Jt=2,tl=3,bn=4,lu=new un(null,0,0),Ns=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];const br=function cu(x){for(let o of x)It.fill(o,-1);return x[cr][bn]=0,x[_n][bn]=0,x[_n][cr]=28,x[tl][bn]=0,x[Jt][bn]=0,x[Jt][cr]=15,x}(It.createInt32Array(6,6));class qn{constructor(o,s,l,c){this.token=o,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,s){let l=this.bitCount,c=this.token;if(o!==this.mode){let f=Ns[this.mode][o];c=Yr(c,65535&f,f>>16),l+=f>>16}let d=o===Jt?4:5;return c=Yr(c,s,d),new qn(c,o,0,l+d)}shiftAndAppend(o,s){let l=this.token,c=this.mode===Jt?4:5;return l=Yr(l,br[this.mode][o],c),l=Yr(l,s,5),new qn(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(o){let s=this.token,l=this.mode,c=this.bitCount;if(this.mode===bn||this.mode===Jt){let h=Ns[l][cr];s=Yr(s,65535&h,h>>16),c+=h>>16,l=cr}let f=new qn(s,l,this.binaryShiftByteCount+1,c+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===f.binaryShiftByteCount&&(f=f.endBinaryShift(o+1)),f}endBinaryShift(o){if(0===this.binaryShiftByteCount)return this;let s=this.token;return s=function wo(x,o,s){return new He(x,o,s)}(s,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new qn(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let s=this.bitCount+(Ns[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?s+=qn.calculateBinaryShiftCost(o)-qn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(s+=10),s<=o.bitCount}toBitArray(o){let s=[];for(let c=this.endBinaryShift(o.length).token;null!==c;c=c.getPrevious())s.unshift(c);let l=new it;for(const c of s)c.appendTo(l,o);return l}toString(){return Ce.format("%s bits=%d bytes=%d",Ms[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}qn.INITIAL_STATE=new qn(lu,cr,0,0);const Yt=function nl(x){const o=Ce.getCharCode(" "),s=Ce.getCharCode("."),l=Ce.getCharCode(",");x[cr][o]=1;const c=Ce.getCharCode("Z"),d=Ce.getCharCode("A");for(let I=d;I<=c;I++)x[cr][I]=I-d+2;x[_n][o]=1;const f=Ce.getCharCode("z"),h=Ce.getCharCode("a");for(let I=h;I<=f;I++)x[_n][I]=I-h+2;x[Jt][o]=1;const p=Ce.getCharCode("9"),w=Ce.getCharCode("0");for(let I=w;I<=p;I++)x[Jt][I]=I-w+2;x[Jt][l]=12,x[Jt][s]=13;const E=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let I=0;I<E.length;I++)x[tl][Ce.getCharCode(E[I])]=I;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<A.length;I++)Ce.getCharCode(A[I])>0&&(x[bn][Ce.getCharCode(A[I])]=I);return x}(It.createInt32Array(5,256));class Ft{constructor(o){this.text=o}encode(){const o=Ce.getCharCode(" "),s=Ce.getCharCode("\n");let l=kn.singletonList(qn.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,h=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ce.getCharCode("\r"):f=h===s?2:0;break;case Ce.getCharCode("."):f=h===o?3:0;break;case Ce.getCharCode(","):f=h===o?4:0;break;case Ce.getCharCode(":"):f=h===o?5:0;break;default:f=0}f>0?(l=Ft.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return kn.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,s){const l=[];for(let c of o)this.updateStateForChar(c,s,l);return Ft.simplifyStates(l)}updateStateForChar(o,s,l){let c=255&this.text[s],d=Yt[o.getMode()][c]>0,f=null;for(let h=0;h<=bn;h++){let p=Yt[h][c];if(p>0){if(null==f&&(f=o.endBinaryShift(s)),!d||h===o.getMode()||h===Jt){const w=f.latchAndAppend(h,p);l.push(w)}if(!d&&br[o.getMode()][h]>=0){const w=f.shiftAndAppend(h,p);l.push(w)}}}if(o.getBinaryShiftByteCount()>0||0===Yt[o.getMode()][c]){let h=o.addBinaryShiftChar(s);l.push(h)}}static updateStateListForPair(o,s,l){const c=[];for(let d of o)this.updateStateForPair(d,s,l,c);return this.simplifyStates(c)}static updateStateForPair(o,s,l,c){let d=o.endBinaryShift(s);if(c.push(d.latchAndAppend(bn,l)),o.getMode()!==bn&&c.push(d.shiftAndAppend(bn,l)),3===l||4===l){let f=d.latchAndAppend(Jt,16-l).latchAndAppend(Jt,1);c.push(f)}if(o.getBinaryShiftByteCount()>0){let f=o.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(f)}}static simplifyStates(o){let s=[];for(const l of o){let c=!0;for(const d of s){if(d.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(d)&&(s=s.filter(f=>f!==d))}c&&s.push(l)}return s}}class re{constructor(){}static encodeBytes(o){return re.encode(o,re.DEFAULT_EC_PERCENT,re.DEFAULT_AZTEC_LAYERS)}static encode(o,s,l){let h,p,w,E,A,c=new Ft(o).encode(),d=De.truncDivision(c.getSize()*s,100)+11,f=c.getSize()+d;if(l!==re.DEFAULT_AZTEC_LAYERS){if(h=l<0,p=Math.abs(l),p>(h?re.MAX_NB_BITS_COMPACT:re.MAX_NB_BITS))throw new te(Ce.format("Illegal value %s for layers",l));w=re.totalBitsInLayer(p,h),E=re.WORD_SIZE[p];let B=w-w%E;if(A=re.stuffBits(c,E),A.getSize()+d>B)throw new te("Data to large for user specified layer");if(h&&A.getSize()>64*E)throw new te("Data to large for user specified layer")}else{E=0,A=null;for(let B=0;;B++){if(B>re.MAX_NB_BITS)throw new te("Data too large for an Aztec code");if(h=B<=3,p=h?B+1:B,w=re.totalBitsInLayer(p,h),f>w)continue;(null==A||E!==re.WORD_SIZE[p])&&(E=re.WORD_SIZE[p],A=re.stuffBits(c,E));let Ie=w-w%E;if(!(h&&A.getSize()>64*E)&&A.getSize()+d<=Ie)break}}let N,I=re.generateCheckWords(A,w,E),S=A.getSize()/E,b=re.generateModeMessage(h,p,S),M=(h?11:14)+4*p,O=new Int32Array(M);if(h){N=M;for(let B=0;B<O.length;B++)O[B]=B}else{N=M+1+2*De.truncDivision(De.truncDivision(M,2)-1,15);let B=De.truncDivision(M,2),Ie=De.truncDivision(N,2);for(let se=0;se<B;se++){let kt=se+De.truncDivision(se,15);O[B-se-1]=Ie-kt-1,O[B+se]=Ie+kt+1}}let W=new Lt(N);for(let B=0,Ie=0;B<p;B++){let se=4*(p-B)+(h?9:12);for(let kt=0;kt<se;kt++){let en=2*kt;for(let ht=0;ht<2;ht++)I.get(Ie+en+ht)&&W.set(O[2*B+ht],O[2*B+kt]),I.get(Ie+2*se+en+ht)&&W.set(O[2*B+kt],O[M-1-2*B-ht]),I.get(Ie+4*se+en+ht)&&W.set(O[M-1-2*B-ht],O[M-1-2*B-kt]),I.get(Ie+6*se+en+ht)&&W.set(O[M-1-2*B-kt],O[2*B+ht])}Ie+=8*se}if(re.drawModeMessage(W,h,N,b),h)re.drawBullsEye(W,De.truncDivision(N,2),5);else{re.drawBullsEye(W,De.truncDivision(N,2),7);for(let B=0,Ie=0;B<De.truncDivision(M,2)-1;B+=15,Ie+=16)for(let se=1&De.truncDivision(N,2);se<N;se+=2)W.set(De.truncDivision(N,2)-Ie,se),W.set(De.truncDivision(N,2)+Ie,se),W.set(se,De.truncDivision(N,2)-Ie),W.set(se,De.truncDivision(N,2)+Ie)}let X=new Xn;return X.setCompact(h),X.setSize(N),X.setLayers(p),X.setCodeWords(S),X.setMatrix(W),X}static drawBullsEye(o,s,l){for(let c=0;c<l;c+=2)for(let d=s-c;d<=s+c;d++)o.set(d,s-c),o.set(d,s+c),o.set(s-c,d),o.set(s+c,d);o.set(s-l,s-l),o.set(s-l+1,s-l),o.set(s-l,s-l+1),o.set(s+l,s-l),o.set(s+l,s-l+1),o.set(s+l,s+l-1)}static generateModeMessage(o,s,l){let c=new it;return o?(c.appendBits(s-1,2),c.appendBits(l-1,6),c=re.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(l-1,11),c=re.generateCheckWords(c,40,4)),c}static drawModeMessage(o,s,l,c){let d=De.truncDivision(l,2);if(s)for(let f=0;f<7;f++){let h=d-3+f;c.get(f)&&o.set(h,d-5),c.get(f+7)&&o.set(d+5,h),c.get(20-f)&&o.set(h,d+5),c.get(27-f)&&o.set(d-5,h)}else for(let f=0;f<10;f++){let h=d-5+f+De.truncDivision(f,5);c.get(f)&&o.set(h,d-7),c.get(f+10)&&o.set(d+7,h),c.get(29-f)&&o.set(h,d+7),c.get(39-f)&&o.set(d-7,h)}}static generateCheckWords(o,s,l){let c=o.getSize()/l,d=new Ss(re.getGF(l)),f=De.truncDivision(s,l),h=re.bitsToWords(o,l,f);d.encode(h,f-c);let p=s%l,w=new it;w.appendBits(0,p);for(const E of Array.from(h))w.appendBits(E,l);return w}static bitsToWords(o,s,l){let d,f,c=new Int32Array(l);for(d=0,f=o.getSize()/s;d<f;d++){let h=0;for(let p=0;p<s;p++)h|=o.get(d*s+p)?1<<s-p-1:0;c[d]=h}return c}static getGF(o){switch(o){case 4:return Ge.AZTEC_PARAM;case 6:return Ge.AZTEC_DATA_6;case 8:return Ge.AZTEC_DATA_8;case 10:return Ge.AZTEC_DATA_10;case 12:return Ge.AZTEC_DATA_12;default:throw new te("Unsupported word size "+o)}}static stuffBits(o,s){let l=new it,c=o.getSize(),d=(1<<s)-2;for(let f=0;f<c;f+=s){let h=0;for(let p=0;p<s;p++)(f+p>=c||o.get(f+p))&&(h|=1<<s-1-p);(h&d)===d?(l.appendBits(h&d,s),f--):h&d?l.appendBits(h,s):(l.appendBits(1|h,s),f--)}return l}static totalBitsInLayer(o,s){return((s?88:112)+16*o)*o}}re.DEFAULT_EC_PERCENT=33,re.DEFAULT_AZTEC_LAYERS=0,re.MAX_NB_BITS=32,re.MAX_NB_BITS_COMPACT=4,re.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Mt{encode(o,s,l,c){return this.encodeWithHints(o,s,l,c,null)}encodeWithHints(o,s,l,c,d){let f=Ts.ISO_8859_1,h=re.DEFAULT_EC_PERCENT,p=re.DEFAULT_AZTEC_LAYERS;return null!=d&&(d.has(Tt.CHARACTER_SET)&&(f=el.forName(d.get(Tt.CHARACTER_SET).toString())),d.has(Tt.ERROR_CORRECTION)&&(h=De.parseInt(d.get(Tt.ERROR_CORRECTION).toString())),d.has(Tt.AZTEC_LAYERS)&&(p=De.parseInt(d.get(Tt.AZTEC_LAYERS).toString()))),Mt.encodeLayers(o,s,l,c,f,h,p)}static encodeLayers(o,s,l,c,d,f,h){if(s!==le.AZTEC)throw new te("Can only encode AZTEC, but got "+s);let p=re.encode(Ce.getBytes(o,d),f,h);return Mt.renderResult(p,l,c)}static renderResult(o,s,l){let c=o.getMatrix();if(null==c)throw new Er;let d=c.getWidth(),f=c.getHeight(),h=Math.max(s,d),p=Math.max(l,f),w=Math.min(h/d,p/f),E=(h-d*w)/2,A=(p-f*w)/2,I=new Lt(h,p);for(let S=0,b=A;S<f;S++,b+=w)for(let M=0,O=E;M<d;M++,O+=w)c.get(M,S)&&I.setRegion(O,b,w,w);return I}}G.AbstractExpandedDecoder=xs,G.ArgumentException=gn,G.ArithmeticException=Ua,G.AztecCode=Xn,G.AztecCodeReader=Yn,G.AztecCodeWriter=Mt,G.AztecDecoder=ja,G.AztecDetector=qc,G.AztecDetectorResult=Zc,G.AztecEncoder=re,G.AztecHighLevelEncoder=Ft,G.AztecPoint=ln,G.BarcodeFormat=le,G.Binarizer=hs,G.BinaryBitmap=rr,G.BitArray=it,G.BitMatrix=Lt,G.BitSource=Ds,G.BrowserAztecCodeReader=class Qc extends jr{constructor(o=500){super(new Yn,o)}},G.BrowserBarcodeReader=class ru extends jr{constructor(o=500,s){super(new hi(s),o,s)}},G.BrowserCodeReader=jr,G.BrowserDatamatrixCodeReader=class iu extends jr{constructor(o=500){super(new gi,o)}},G.BrowserMultiFormatReader=class Hh extends jr{constructor(o=null,s=500){const l=new au;l.setHints(o),super(l,s)}decodeBitmap(o){return this.reader.decodeWithState(o)}},G.BrowserPDF417Reader=class ki extends jr{constructor(o=500){super(new _e,o)}},G.BrowserQRCodeReader=class vs extends jr{constructor(o=500){super(new Wr,o)}},G.BrowserQRCodeSvgWriter=Be,G.CharacterSetECI=Y,G.ChecksumException=St,G.Code128Reader=Z,G.Code39Reader=za,G.DataMatrixDecodedBitStreamParser=je,G.DataMatrixReader=gi,G.DecodeHintType=at,G.DecoderResult=Ri,G.DefaultGridSampler=Ha,G.DetectorResult=lo,G.EAN13Reader=Li,G.EncodeHintType=Tt,G.Exception=Qt,G.FormatException=q,G.GenericGF=Ge,G.GenericGFPoly=Kt,G.GlobalHistogramBinarizer=ut,G.GridSampler=Va,G.GridSamplerInstance=Vr,G.HTMLCanvasElementLuminanceSource=or,G.HybridBinarizer=Te,G.ITFReader=ot,G.IllegalArgumentException=te,G.IllegalStateException=Er,G.InvertedLuminanceSource=lt,G.LuminanceSource=ci,G.MathUtils=We,G.MultiFormatOneDReader=hi,G.MultiFormatReader=au,G.MultiFormatWriter=class _s{encode(o,s,l,c,d){let f;if(s!==le.QR_CODE)throw new te("No encoder available for format "+s);return f=new Ui,f.encode(o,s,l,c,d)}},G.NotFoundException=U,G.OneDReader=_t,G.PDF417DecodedBitStreamParser=F,G.PDF417DecoderErrorCorrection=qe,G.PDF417Reader=_e,G.PDF417ResultMetadata=Za,G.PerspectiveTransform=In,G.PlanarYUVLuminanceSource=ji,G.QRCodeByteMatrix=Bi,G.QRCodeDataMask=nn,G.QRCodeDecodedBitStreamParser=$a,G.QRCodeDecoderErrorCorrectionLevel=K,G.QRCodeDecoderFormatInformation=Pt,G.QRCodeEncoder=ct,G.QRCodeEncoderQRCode=_r,G.QRCodeMaskUtil=yi,G.QRCodeMatrixUtil=de,G.QRCodeMode=ce,G.QRCodeReader=Wr,G.QRCodeVersion=oe,G.QRCodeWriter=Ui,G.RGBLuminanceSource=bs,G.RSS14Reader=pt,G.RSSExpandedReader=V,G.ReaderException=Ja,G.ReedSolomonDecoder=ao,G.ReedSolomonEncoder=Ss,G.ReedSolomonException=so,G.Result=ft,G.ResultMetadataType=Fe,G.ResultPoint=ie,G.StringUtils=Ce,G.UnsupportedOperationException=ir,G.VideoInputDevice=Ba,G.WhiteRectangleDetector=Oi,G.WriterException=Qe,G.ZXingArrays=It,G.ZXingCharset=el,G.ZXingInteger=De,G.ZXingStandardCharsets=Ts,G.ZXingStringBuilder=et,G.ZXingStringEncoding=Ht,G.ZXingSystem=rt,G.createAbstractExpandedDecoder=fi,Object.defineProperty(G,"__esModule",{value:!0})}(Pa)}},La=>{La(La.s=673)}]);